<!DOCTYPE html>
<!-- saved from url=(0061)file:///C:/Users/marti/Downloads/meddicc-dashboard%20(4).html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDDICC Playbook - Team Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0A1628 0%, #1a2942 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .card {
            background: rgba(255,255,255,0.04);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 25px 50px rgba(0,0,0,0.7);
            border: 1px solid rgba(255,255,255,0.12);
            backdrop-filter: blur(18px);
        }
        
        .mode-toggle {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .mode-btn {
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.85);
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }
        
        .mode-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: #ffffff;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .header-actions {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1.5rem;
        }
        
        .button-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            color: #ffffff;
            box-shadow: 0 8px 20px rgba(0,0,0,0.35);
        }
        
        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
            filter: brightness(1.08);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .btn-purple {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: 300;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }
        
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 1rem;
            letter-spacing: 0.08em;
        }
        
        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #ffffff;
        }
        
        .subtitle {
            color: rgba(255,255,255,0.7);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }
        
        input[type="text"], 
        input[type="date"],
        textarea, 
        select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
            background: rgba(10, 22, 40, 0.95);
            color: #ffffff;
            outline: none;
            transition: all 0.3s;
        }
        
        input::placeholder,
        textarea::placeholder {
            color: rgba(255,255,255,0.4);
        }
        
        input:focus,
        textarea:focus,
        select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 1px rgba(102,126,234,0.7);
        }
        
        select {
            cursor: pointer;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: rgba(255,255,255,0.85);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        
        input[type="text"]:first-of-type {
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }
        
        textarea {
            min-height: 200px;
            resize: vertical;
        }
        
        .grid-2 { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 2rem; 
        }
        
        .grid-3 { 
            display: grid; 
            grid-template-columns: 1fr 1fr 1fr; 
            gap: 1.5rem; 
        }
        
        .grid-4 { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 1rem; 
        }
        
        .stat-card {
            background: rgba(5,15,30,0.9);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.12);
            text-align: center;
            box-shadow: 0 12px 28px rgba(0,0,0,0.45);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            color: rgba(255,255,255,0.7);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        
        .stat-trend {
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        
        .trend-up { color: #38ef7d; }
        .trend-down { color: #f5576c; }
        
        .progress-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: rgba(255,255,255,0.7);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }
        
        .score-card {
            text-align: center;
            padding: 0.75rem;
            background: rgba(5,15,30,0.9);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.12);
        }
        
        .score-value {
            font-size: 2rem;
            font-weight: bold;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .tab {
            padding: 10px 20px;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .tab-inactive {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.85);
        }
        
        .tab-inactive:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }
        
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid #667eea;
            color: white;
            font-weight: bold;
        }
        
        .tab-completed::before {
            content: "‚úì ";
            color: #38ef7d;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-left: 4px solid;
            backdrop-filter: blur(8px);
        }
        
        .alert-danger {
            background: rgba(235, 51, 73, 0.15);
            border-color: #eb3349;
            color: #ffffff;
        }
        
        .alert-warning {
            background: rgba(245, 93, 108, 0.15);
            border-color: #f5576c;
            color: #ffffff;
        }
        
        .alert-success {
            background: rgba(56, 239, 125, 0.15);
            border-color: #38ef7d;
            color: #ffffff;
        }
        
        .alert-info {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
            color: #ffffff;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        th {
            color: rgba(255,255,255,0.85);
            font-weight: 600;
            background: rgba(10,22,40,0.9);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        
        td {
            color: rgba(255,255,255,0.9);
        }
        
        tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }
        
        .score-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-weight: bold;
            display: inline-block;
            font-size: 0.875rem;
        }
        
        .score-high { 
            background: rgba(56, 239, 125, 0.2); 
            color: #38ef7d;
            border: 1px solid #38ef7d;
        }
        
        .score-medium { 
            background: rgba(240, 147, 251, 0.2); 
            color: #f093fb;
            border: 1px solid #f093fb;
        }
        
        .score-low { 
            background: rgba(235, 51, 73, 0.2); 
            color: #eb3349;
            border: 1px solid #eb3349;
        }
        
        .stage-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .stage-discovery { 
            background: rgba(102, 126, 234, 0.2); 
            color: #667eea;
        }
        
        .stage-qualification { 
            background: rgba(17, 153, 142, 0.2); 
            color: #11998e;
        }
        
        .stage-proposal { 
            background: rgba(240, 147, 251, 0.2); 
            color: #f093fb;
        }
        
        .stage-negotiation { 
            background: rgba(245, 93, 108, 0.2); 
            color: #f5576c;
        }
        
        .stage-closed-won { 
            background: rgba(56, 239, 125, 0.2); 
            color: #38ef7d;
        }
        
        .stage-closed-lost { 
            background: rgba(235, 51, 73, 0.2); 
            color: #eb3349;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(8px);
            align-items: center;
            justify-content: center;
            z-index: 1000;
            overflow-y: auto;
            padding: 2rem;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: rgba(255,255,255,0.04);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 25px 50px rgba(0,0,0,0.7);
        }
        
        .modal-content.wide {
            max-width: 1200px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: rgba(255,255,255,0.7);
            transition: color 0.3s;
        }
        
        .close-btn:hover {
            color: #ffffff;
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            background: rgba(10,22,40,0.9);
            border-radius: 12px;
            padding: 1rem;
            padding-top: 2.5rem;
            display: flex;
            align-items: flex-end;
            gap: 0.5rem;
            border: 1px solid rgba(255,255,255,0.12);
            overflow: visible;
        }
        
        .chart-bar {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: all 0.3s;
            min-height: 20px;
            overflow: visible;
        }
        
        .chart-bar:hover {
            opacity: 0.8;
            filter: brightness(1.2);
        }
        
        .chart-label {
            position: absolute;
            bottom: -45px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.8);
            line-height: 1.3;
        }
        
        .chart-value {
            position: absolute;
            top: 5px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 1rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 6px rgba(0,0,0,0.5);
            white-space: nowrap;
            z-index: 10;
            line-height: 1.2;
        }
        
        .chart-value-above {
            top: -30px !important;
            color: #ffffff !important;
            background: rgba(102,126,234,0.9);
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
            margin: 0 auto;
            width: auto;
        }
        
        .hidden { 
            display: none; 
        }
        
        .filter-bar {
            background: rgba(10,22,40,0.9);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            border: 1px solid rgba(255,255,255,0.12);
        }
        
        .filter-bar select {
            width: auto;
            min-width: 150px;
        }
        
        .rep-card {
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(5,15,30,0.9);
        }
        
        .rep-card:hover {
            border-color: #667eea;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }
        
        .rep-name {
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .rep-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: rgba(255,255,255,0.7);
        }
        
        .gate-check {
            background: rgba(245, 93, 108, 0.15);
            border: 2px solid #f5576c;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            backdrop-filter: blur(8px);
        }
        
        .gate-check-title {
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .requirement-list {
            list-style: none;
            padding-left: 0;
        }
        
        .requirement-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(245, 93, 108, 0.2);
            color: rgba(255,255,255,0.9);
        }
        
        .requirement-list li:last-child {
            border-bottom: none;
        }
        
        .requirement-met {
            color: #38ef7d;
        }
        
        .requirement-met::before {
            content: "‚úì ";
            font-weight: bold;
        }
        
        .requirement-unmet {
            color: #f5576c;
        }
        
        .requirement-unmet::before {
            content: "‚úó ";
            font-weight: bold;
        }
        
        .section-prompt {
            color: rgba(255,255,255,0.7);
            margin-bottom: 1rem;
            font-style: italic;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Mode Toggle -->
        <div class="card" style="padding: 1rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15);">
            <div class="mode-toggle">
                <button class="mode-btn" id="rep-mode-btn" onclick="switchMode(&#39;rep&#39;)">Rep Mode</button>
                <button class="mode-btn" id="manager-mode-btn" onclick="switchMode(&#39;manager&#39;)">Manager Dashboard</button>
                <button class="mode-btn active" id="review-mode-btn" onclick="switchMode(&#39;review&#39;)">Pipeline Review</button>
            </div>
        </div>

        <!-- REP MODE -->
        <div id="rep-view" class="hidden">
            <!-- Header -->
            <div class="card">
                <div class="header-actions">
                    <div>
                        <h1>AI-Powered MEDDICC Playbook</h1>
                        <p class="subtitle">Real-time coaching ‚Ä¢ Auto-save ‚Ä¢ Team visibility</p>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-success" onclick="newDeal()">+ New Deal</button>
                        <button class="btn btn-primary" onclick="showDealListModal()">üìÅ My Deals (<span id="deal-count">61</span>)</button>
                        <button class="btn btn-secondary" onclick="loadSampleDeals()">üìù Load Sample Data</button>
                        <button class="btn btn-warning" onclick="exportData()">üì§ Export CSV</button>
                        <button class="btn btn-purple" onclick="downloadTemplate()">üìã Download Template</button>
                        <button class="btn btn-secondary" onclick="document.getElementById(&#39;csv-upload&#39;).click()">üì• Import CSV</button>
                        <input type="file" id="csv-upload" accept=".csv" style="display: none;" onchange="importCSV(event)">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Deal Name *</label>
                        <input type="text" id="deal-name" placeholder="Company Name - Opportunity" oninput="handleDealNameChange()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Deal Value (¬£) *</label>
                        <input type="text" id="deal-value" placeholder="50000" oninput="handleFieldChange()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Created Date *</label>
                        <input type="date" id="created-date" oninput="handleCreatedDateChange()" title="When was this opportunity first identified?">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Close Date *</label>
                        <input type="date" id="close-date" oninput="handleFieldChange()">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Sales Rep *</label>
                        <input type="text" id="sales-rep" placeholder="Your Name" oninput="handleFieldChange()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Deal Stage *</label>
                        <select id="deal-stage" onchange="handleStageChange()">
                            <option value="">Select Stage</option>
                            <option value="discovery">Discovery</option>
                            <option value="qualification">Qualification</option>
                            <option value="proposal">Proposal</option>
                            <option value="negotiation">Negotiation</option>
                            <option value="closed-won">Closed Won</option>
                            <option value="closed-lost">Closed Lost</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Forecast Category</label>
                        <select id="forecast-category" onchange="handleFieldChange()">
                            <option value="">Select Category</option>
                            <option value="pipeline">Pipeline</option>
                            <option value="best-case">Best Case</option>
                            <option value="commit">Commit</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                </div>
                
                <div id="gate-alert"></div>
                
                <div class="progress-section">
                    <div>
                        <div class="progress-info">
                            <span>MEDDICC Qualification Progress</span>
                            <span><span id="filled-count">0</span> / 7 components</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="score-card" id="score-card" style="display: none;">
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Deal Score</div>
                        <div class="score-value" id="score-value">0%</div>
                        <div style="font-size: 0.75rem; font-weight: bold;" id="score-status">High Risk</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <div class="score-card">
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Days Open</div>
                        <div class="score-value" id="days-open" style="font-size: 1.75rem; color: #667eea;">0</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);" id="days-open-label">Since Created</div>
                    </div>
                    <div class="score-card">
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Days in Stage</div>
                        <div class="score-value" id="days-in-stage" style="font-size: 1.75rem; color: #f093fb;">0</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);" id="stage-name-label">Current Stage</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <!-- Left Column -->
                <div>
                    <div class="tabs" id="section-tabs"><button class="tab tab-active " onclick="setActiveSection(0)">Metrics</button><button class="tab tab-inactive " onclick="setActiveSection(1)">Economic Buyer</button><button class="tab tab-inactive " onclick="setActiveSection(2)">Decision Criteria</button><button class="tab tab-inactive " onclick="setActiveSection(3)">Decision Process</button><button class="tab tab-inactive " onclick="setActiveSection(4)">Identify Pain</button><button class="tab tab-inactive " onclick="setActiveSection(5)">Champion</button><button class="tab tab-inactive " onclick="setActiveSection(6)">Competition</button></div>
                    
                    <div class="card">
                        <h2 id="section-title">Metrics</h2>
                        <p class="section-prompt" id="section-prompt">What quantifiable business metrics or outcomes matter to this prospect?</p>
                        <div id="guidance-container">
                    <div style="margin-bottom: 1rem;">
                        <button class="btn btn-secondary" onclick="toggleGuidance()" id="guidance-toggle" style="width: 100%; justify-content: center; display: flex; align-items: center; gap: 0.5rem;">
                            <span id="guidance-icon">‚ñº</span> Show Guidance &amp; Examples
                        </button>
                    </div>
                    
                    <div id="guidance-panel" class="hidden" style="background: rgba(10,22,40,0.95); border: 1px solid rgba(102,126,234,0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <h4 style="color: #667eea; margin-bottom: 1rem; font-size: 1rem;">üìã What to Include:</h4>
                        <ul style="color: rgba(255,255,255,0.8); margin-bottom: 1.5rem; padding-left: 1.5rem; line-height: 1.6;">
                            <li>Specific numbers (%, hours, costs)</li><li>Currency values (¬£, $, ‚Ç¨)</li><li>Current state vs desired state</li><li>Time period for measurement</li>
                        </ul>
                        
                        <h4 style="color: #38ef7d; margin-bottom: 0.5rem; font-size: 1rem;">‚úÖ Good Example:</h4>
                        <div style="background: rgba(56,239,125,0.05); border-left: 3px solid #38ef7d; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.85rem; white-space: pre-wrap; color: rgba(255,255,255,0.85);">
**Current State:** Processing 500 orders/day manually takes 12 hours/day (3 FTE @ ¬£35K each = ¬£105K/year labor cost)
**Desired State:** Automate 80% of orders, reduce processing time to 2 hours/day
**Business Impact:** Save ¬£84K/year in labor + redeploy staff to higher-value work
**Timeframe:** Measure over 6 months post-implementation
                        </div>
                        
                        <h4 style="color: #f5576c; margin-bottom: 0.5rem; font-size: 1rem;">‚ùå Bad Example:</h4>
                        <div style="background: rgba(245,93,108,0.05); border-left: 3px solid #f5576c; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.85rem; color: rgba(255,255,255,0.7);">
                            Want to improve efficiency and reduce costs. Looking to streamline operations.
                        </div>
                        
                        <h4 style="color: #f093fb; margin-bottom: 0.5rem; font-size: 1rem;">‚ùì Key Questions to Answer:</h4>
                        <ol style="color: rgba(255,255,255,0.8); padding-left: 1.5rem; line-height: 1.8;">
                            <li>What specific metric are you trying to move? (revenue, cost, time, error rate, etc.)</li><li>What is the current baseline measurement?</li><li>What is the target/goal measurement?</li><li>What is the financial impact in ¬£/$/‚Ç¨?</li><li>Over what time period will you measure this?</li>
                        </ol>
                    </div>
                </div><textarea id="section-input" placeholder="Enter details..."></textarea>
                        
                        <div id="quality-indicator">
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-radius: 12px; padding: 1rem; margin-top: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <span style="font-weight: 600; color: rgba(255,255,255,0.85);">Quality Score:</span>
                            <span style="font-size: 1.5rem; font-weight: bold; color: #f5576c;">
                                0%
                            </span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: 0%; height: 100%; background: #f5576c; transition: width 0.3s;"></div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: rgba(255,255,255,0.6);">
                                ‚óã Length: 0 / 100 chars
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: rgba(255,255,255,0.6);">
                                ‚óã Key terms: 0 / 3+
                            </div>
                        </div>
                        
                        
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(245,93,108,0.1); border-left: 3px solid #f5576c; border-radius: 6px; font-size: 0.85rem; color: rgba(255,255,255,0.85);">
                                <strong>üí° Tip:</strong> Add more detail - aim for at least 100 characters. Click "Show Guidance" above for examples.
                            </div>
                        
                    </div>
                </div><div id="button-row" style="display: flex; gap: 1rem; margin-top: 1rem; justify-content: space-between;">
                            <button class="btn btn-secondary" id="prev-btn" onclick="previousSection()" disabled="">Previous</button>
                            <button class="btn btn-success" id="save-btn" onclick="saveDeal()" disabled="">üíæ Save Deal</button>
                            <button class="btn btn-primary" id="next-btn" onclick="nextSection()">Next</button>
                        </div>
                    </div>
                </div>
                
                <!-- Right Column -->
                <div>
                    <div class="card">
                        <h2>ü§ñ AI Sales Coach</h2>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1.5rem;">
                            <button class="btn btn-success" onclick="getAICoaching()">Get Coaching</button>
                            <button class="btn btn-primary" id="champion-btn" onclick="generateChampionEmail()" disabled="">‚úâÔ∏è Champion</button>
                            <button class="btn btn-purple" id="eb-btn" onclick="generateEBEmail()" disabled="">üéØ Econ Buyer</button>
                            <button class="btn btn-warning" onclick="showRiskScore()">‚ö†Ô∏è Risk Score</button>
                        </div>
                        
                        <div id="insights-container">
                <div style="padding: 1.5rem; background: rgba(10,22,40,0.95); border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); white-space: pre-wrap; line-height: 1.6; color: rgba(255,255,255,0.9); box-shadow: 0 12px 28px rgba(0,0,0,0.45);">
                    **Import Complete!**

‚úÖ Successfully imported: 5 deals

                </div>
            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MANAGER DASHBOARD -->
        <div id="manager-view" class="hidden">
            <div class="card">
                <div class="header-actions">
                    <div>
                        <h1>Team Dashboard</h1>
                        <p class="subtitle">Real-time pipeline health and team performance</p>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="loadSampleDeals()">üìù Load Sample Data</button>
                        <button class="btn btn-warning" onclick="exportRiskReport()">üìä Export Risk Report</button>
                    </div>
                </div>
                
                <div class="grid-4">
                    <div class="stat-card">
                        <div class="stat-value" id="team-pipeline-value">¬£7,902,000</div>
                        <div class="stat-label">Total Pipeline</div>
                        <div class="stat-trend" id="pipeline-trend"></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="team-avg-score">58%</div>
                        <div class="stat-label">Avg Qualification Score</div>
                        <div class="stat-trend" id="score-trend"></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="team-deal-count">61</div>
                        <div class="stat-label">Active Deals</div>
                        <div class="stat-trend" id="deal-trend"></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="team-at-risk">25</div>
                        <div class="stat-label">Deals At Risk</div>
                        <div class="stat-trend" id="risk-trend"></div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card" style="padding-bottom: 3rem;">
                    <h2>Pipeline Health by Stage</h2>
                    <div class="chart-container" id="stage-chart">
                <div class="chart-bar" style="height: 88.04071246819338%;" title="discovery: ¬£2,076,000 (19 deals)">
                    <div class="chart-value ">¬£2.1M</div>
                    <div class="chart-label">
                        <strong>Discovery</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.9;">19 deals</span>
                    </div>
                </div>
            
                <div class="chart-bar" style="height: 97.45547073791349%;" title="qualification: ¬£2,298,000 (18 deals)">
                    <div class="chart-value ">¬£2.3M</div>
                    <div class="chart-label">
                        <strong>Qualification</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.9;">18 deals</span>
                    </div>
                </div>
            
                <div class="chart-bar" style="height: 100%;" title="proposal: ¬£2,358,000 (18 deals)">
                    <div class="chart-value ">¬£2.4M</div>
                    <div class="chart-label">
                        <strong>Proposal</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.9;">18 deals</span>
                    </div>
                </div>
            
                <div class="chart-bar" style="height: 49.61832061068702%;" title="negotiation: ¬£1,170,000 (6 deals)">
                    <div class="chart-value ">¬£1.2M</div>
                    <div class="chart-label">
                        <strong>Negotiation</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.9;">6 deals</span>
                    </div>
                </div>
            </div>
                </div>
                
                <div class="card" style="padding-bottom: 3rem;">
                    <h2>MEDDICC Component Completion</h2>
                    <div class="chart-container" id="component-chart">
                <div class="chart-bar" style="height: 98.36065573770492%;" title="metrics: 98% completion">
                    <div class="chart-label">Metrics</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="economicBuyer: 98% completion">
                    <div class="chart-label">Economic Buyer</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="decisionCriteria: 98% completion">
                    <div class="chart-label">Decision Criteria</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="decisionProcess: 98% completion">
                    <div class="chart-label">Decision Process</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="identifyPain: 98% completion">
                    <div class="chart-label">Identify Pain</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="champion: 98% completion">
                    <div class="chart-label">Champion</div>
                </div>
            
                <div class="chart-bar" style="height: 98.36065573770492%;" title="competition: 98% completion">
                    <div class="chart-label">Competition</div>
                </div>
            </div>
                </div>
            </div>

            <div class="card">
                <h2>Team Performance</h2>
                <div class="grid-3" id="rep-cards">
                    <div class="rep-card">
                        <div class="rep-name">Sarah Chen</div>
                        <div class="rep-stats">
                            <div>Deals: 24</div>
                            <div>Value: ¬£3,708,000</div>
                            <div>Avg Score:</div>
                            <div><span class="score-badge score-medium">74%</span></div>
                        </div>
                    </div>
                
                    <div class="rep-card">
                        <div class="rep-name">Michael Rodriguez</div>
                        <div class="rep-stats">
                            <div>Deals: 18</div>
                            <div>Value: ¬£2,118,000</div>
                            <div>Avg Score:</div>
                            <div><span class="score-badge score-medium">69%</span></div>
                        </div>
                    </div>
                
                    <div class="rep-card">
                        <div class="rep-name">James Wilson</div>
                        <div class="rep-stats">
                            <div>Deals: 18</div>
                            <div>Value: ¬£2,046,000</div>
                            <div>Avg Score:</div>
                            <div><span class="score-badge score-low">29%</span></div>
                        </div>
                    </div>
                
                    <div class="rep-card">
                        <div class="rep-name">Martin Brennan</div>
                        <div class="rep-stats">
                            <div>Deals: 1</div>
                            <div>Value: ¬£30,000</div>
                            <div>Avg Score:</div>
                            <div><span class="score-badge score-low">0%</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>‚ö†Ô∏è At Risk Deal Analysis</h2>
                <p class="subtitle">Deals requiring immediate attention based on multiple risk factors</p>
                
                <div class="filter-bar">
                    <label style="color: rgba(255,255,255,0.85); display: flex; align-items: center; gap: 0.5rem;">
                        <span>Risk Type:</span>
                        <select id="risk-filter" onchange="updateRiskDeals()" style="min-width: 200px;">
                            <option value="all">All At Risk Deals</option>
                            <option value="low-score">‚ùå Low Qualification (&lt;50%)</option>
                            <option value="stale">üïí Stale (&gt;45 days in stage)</option>
                            <option value="close-date">üìÖ Closing Soon &amp; Weak</option>
                            <option value="advanced-weak">üö® Advanced Stage &amp; Weak</option>
                            <option value="missing-key">üîë Missing Key Components</option>
                        </select>
                    </label>
                    <button class="btn btn-warning" onclick="exportRiskReport()">üìä Export Risk Report</button>
                </div>
                
                <div id="risk-summary" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; margin: 1.5rem 0;">
                    <div style="background: rgba(235,51,73,0.15); border: 1px solid #eb3349; border-radius: 12px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #eb3349;" id="risk-low-score-count">19</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;">Low Score<br>&lt;50%</div>
                    </div>
                    <div style="background: rgba(245,93,108,0.15); border: 1px solid #f5576c; border-radius: 12px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #f5576c;" id="risk-stale-count">0</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;">Stale<br>&gt;45 Days</div>
                    </div>
                    <div style="background: rgba(240,147,251,0.15); border: 1px solid #f093fb; border-radius: 12px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #f093fb;" id="risk-close-count">0</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;">Closing Soon<br>&amp; Weak</div>
                    </div>
                    <div style="background: rgba(255,165,0,0.15); border: 1px solid #ffa500; border-radius: 12px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #ffa500;" id="risk-advanced-count">0</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;">Advanced<br>&amp; Weak</div>
                    </div>
                    <div style="background: rgba(102,126,234,0.15); border: 1px solid #667eea; border-radius: 12px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #667eea;" id="risk-missing-count">13</div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.8); margin-top: 0.5rem;">Missing Key<br>Components</div>
                    </div>
                </div>
                
                <div id="risk-deals-container">
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802063909-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802078246-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">kota - Vision</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Martin Brennan</span>
                                    <span><strong>Value:</strong> ¬£30,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">0%</span></span>
                                    <span><strong>Days to Close:</strong> 43</span>
                                    <span><strong>Days in Stage:</strong> 0</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;deal_1767802159725&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                0% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Economic Buyer, Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802724059-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803228821-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803235863-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">DataCorp - Business Intelligence</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£95,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">22%</span></span>
                                    <span><strong>Days to Close:</strong> 174</span>
                                    <span><strong>Days in Stage:</strong> 28</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767804187547-4&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (2):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                22% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion, Decision Process
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802063909-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802063909-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802078246-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802078246-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802724059-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802724059-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803228821-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803228821-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803235863-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803235863-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">RetailMax - POS System Upgrade</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£178,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">38%</span></span>
                                    <span><strong>Days to Close:</strong> 144</span>
                                    <span><strong>Days in Stage:</strong> 33</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767804187547-7&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                38% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #eb3349; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">EduLearn - LMS Platform</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> James Wilson</span>
                                    <span><strong>Value:</strong> ¬£68,000</span>
                                    <span><strong>Stage:</strong> discovery</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-low">28%</span></span>
                                    <span><strong>Days to Close:</strong> 205</span>
                                    <span><strong>Days in Stage:</strong> 23</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767804187547-9&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">‚ùå</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #eb3349; margin-bottom: 0.25rem;">
                                                Low Qualification Score
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                28% - Below acceptable threshold
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Immediate qualification work required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802063909-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802078246-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767802724059-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803228821-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767803235863-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid #f5576c; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">GlobalRetail - Inventory Management</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> Michael Rodriguez</span>
                                    <span><strong>Value:</strong> ¬£85,000</span>
                                    <span><strong>Stage:</strong> qualification</span>
                                    <span><strong>Score:</strong> <span class="score-badge score-medium">58%</span></span>
                                    <span><strong>Days to Close:</strong> 113</span>
                                    <span><strong>Days in Stage:</strong> 18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal(&#39;sample-1767804187547-2&#39;); switchMode(&#39;rep&#39;)" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (1):</h4>
                            
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">üîë</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: #f5576c; margin-bottom: 0.25rem;">
                                                Missing Key MEDDICC Components
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                Missing: Champion
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí Cannot forecast without these components
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Deals Requiring Attention</h2>
                <div class="filter-bar">
                    <select id="filter-rep" onchange="filterManagerDeals()"><option value="">All Reps</option><option value="Sarah Chen">Sarah Chen</option><option value="Michael Rodriguez">Michael Rodriguez</option><option value="James Wilson">James Wilson</option><option value="Martin Brennan">Martin Brennan</option></select>
                    <select id="filter-stage" onchange="filterManagerDeals()">
                        <option value="">All Stages</option>
                        <option value="discovery">Discovery</option>
                        <option value="qualification">Qualification</option>
                        <option value="proposal">Proposal</option>
                        <option value="negotiation">Negotiation</option>
                    </select>
                    <select id="filter-risk" onchange="filterManagerDeals()">
                        <option value="">All Risk Levels</option>
                        <option value="high">High Risk (&lt;50%)</option>
                        <option value="medium">Medium Risk (50-74%)</option>
                        <option value="low">Low Risk (75%+)</option>
                    </select>
                </div>
                <table id="manager-deals-table">
                    <thead>
                        <tr>
                            <th>Deal Name</th>
                            <th>Rep</th>
                            <th>Value</th>
                            <th>Stage</th>
                            <th>Score</th>
                            <th>Close Date</th>
                            <th>Days in Stage</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="manager-deals-body">
                        <tr>
                            <td><strong>kota - Vision</strong></td>
                            <td>Martin Brennan</td>
                            <td>¬£30,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">0%</span></td>
                            <td>19/02/2026</td>
                            <td>0 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;deal_1767802159725&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>DataCorp - Business Intelligence</strong></td>
                            <td>James Wilson</td>
                            <td>¬£95,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">22%</span></td>
                            <td>30/06/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-4&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>EduLearn - LMS Platform</strong></td>
                            <td>James Wilson</td>
                            <td>¬£68,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">28%</span></td>
                            <td>31/07/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-9&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>RetailMax - POS System Upgrade</strong></td>
                            <td>James Wilson</td>
                            <td>¬£178,000</td>
                            <td><span class="stage-badge stage-discovery">discovery</span></td>
                            <td><span class="score-badge score-low">38%</span></td>
                            <td>31/05/2026</td>
                            <td>33 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-7&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>GlobalRetail - Inventory Management</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£85,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">58%</span></td>
                            <td>30/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-2&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>LogiTrans - Fleet Management</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£156,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">62%</span></td>
                            <td>30/04/2026</td>
                            <td>37 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-10&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>HealthTech Innovations - Patient Portal</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£142,000</td>
                            <td><span class="stage-badge stage-qualification">qualification</span></td>
                            <td><span class="score-badge score-medium">64%</span></td>
                            <td>15/04/2026</td>
                            <td>18 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-6&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>CloudServe - Security Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£210,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-medium">72%</span></td>
                            <td>15/03/2026</td>
                            <td>28 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-8&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>ManuCorp - Supply Chain Platform</strong></td>
                            <td>Michael Rodriguez</td>
                            <td>¬£58,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">76%</span></td>
                            <td>20/03/2026</td>
                            <td>10 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-5&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>FinTech Partners - Compliance Platform</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£195,000</td>
                            <td><span class="stage-badge stage-negotiation">negotiation</span></td>
                            <td><span class="score-badge score-high">82%</span></td>
                            <td>28/02/2026</td>
                            <td>5 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-3&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802063909-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802078246-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767802724059-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803228821-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767803235863-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    
                        <tr>
                            <td><strong>TechFlow Solutions - Marketing Automation</strong></td>
                            <td>Sarah Chen</td>
                            <td>¬£125,000</td>
                            <td><span class="stage-badge stage-proposal">proposal</span></td>
                            <td><span class="score-badge score-high">88%</span></td>
                            <td>31/03/2026</td>
                            <td>23 days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="loadDeal(&#39;sample-1767804187547-1&#39;); switchMode(&#39;rep&#39;)">Review</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>Forecast Accuracy Tracker</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Period</th>
                            <th>Forecast</th>
                            <th>Actual</th>
                            <th>Accuracy</th>
                            <th>Avg Score</th>
                        </tr>
                    </thead>
                    <tbody id="forecast-table-body">
                        <tr>
                            <td colspan="5" style="text-align: center; color: rgba(255,255,255,0.6); padding: 2rem;">
                                Track forecast accuracy as deals close
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- REVIEW MODE -->
        <div id="review-view" class="">
            <div class="card">
                <div class="header-actions">
                    <div>
                        <h1>Team Pipeline Review</h1>
                        <p class="subtitle">Executive insights and deal-level analysis</p>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="loadSampleDeals()">üìù Load Sample Data</button>
                        <button class="btn btn-primary" onclick="exportExecutiveSummary()">üìä Export Executive Summary</button>
                    </div>
                </div>
                
                <div class="filter-bar" style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; gap: 0.5rem;">
                        <select id="review-rep" onchange="loadReviewDeals()"><option value="">All Reps</option><option value="Sarah Chen">Sarah Chen</option><option value="Michael Rodriguez">Michael Rodriguez</option><option value="James Wilson">James Wilson</option><option value="Martin Brennan">Martin Brennan</option></select>
                        <select id="review-stage-filter" onchange="loadReviewDeals()">
                            <option value="">All Stages</option>
                            <option value="discovery">Discovery</option>
                            <option value="qualification">Qualification</option>
                            <option value="proposal">Proposal</option>
                            <option value="negotiation">Negotiation</option>
                        </select>
                        <select id="review-score-filter" onchange="loadReviewDeals()">
                            <option value="">All Scores</option>
                            <option value="critical">üö® Critical (&lt;30%)</option>
                            <option value="weak">‚ö†Ô∏è Weak (30-49%)</option>
                            <option value="moderate">üü° Moderate (50-69%)</option>
                            <option value="good">‚úÖ Good (70-84%)</option>
                            <option value="excellent">üåü Excellent (85%+)</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                        <span style="color: rgba(255,255,255,0.7); font-size: 0.875rem; margin-right: 0.5rem;">View:</span>
                        <button class="btn" id="executive-view-btn" onclick="switchReviewView(&#39;executive&#39;)" style="padding: 0.5rem 1rem; font-size: 0.875rem; background: linear-gradient(135deg, rgb(102, 126, 234) 0%, rgb(118, 75, 162) 100%); color: rgb(255, 255, 255);">
                            üìä Executive Dashboard
                        </button>
                        <button class="btn" id="deals-view-btn" onclick="switchReviewView(&#39;deals&#39;)" style="padding: 0.5rem 1rem; font-size: 0.875rem; background: rgba(255, 255, 255, 0.05); color: rgba(255, 255, 255, 0.7);">
                            üìã Deal-by-Deal
                        </button>
                    </div>
                </div>
            </div>

            <!-- Executive Dashboard View -->
            <div id="executive-dashboard-view" class="">
                
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Executive Summary</h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                        <div style="background: linear-gradient(135deg, rgba(102,126,234,0.2) 0%, rgba(118,75,162,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(102,126,234,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #ffffff; margin-bottom: 0.5rem;">¬£7902K</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Total Pipeline</div>
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">61 active deals</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(102,126,234,0.2) 0%, rgba(118,75,162,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(102,126,234,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #fb8500; margin-bottom: 0.5rem;">58% üü°</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Avg Health Score</div>
                            <div style="font-size: 0.8rem; color: #fb8500;">Medium qualification</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(235,51,73,0.2) 0%, rgba(195,31,53,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(235,51,73,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #eb3349; margin-bottom: 0.5rem;">19</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">At Critical Risk</div>
                            <div style="font-size: 0.8rem; color: #eb3349;">üö® Needs urgent action</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(251,133,0,0.2) 0%, rgba(221,113,0,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(251,133,0,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #28a745; margin-bottom: 0.5rem;">+¬£6402K</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Forecast Gap</div>
                            <div style="font-size: 0.8rem; color: #28a745;">‚úÖ 427% over</div>
                        </div>
                    </div>
                </div>
            
                
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Pipeline Health Heat Map</h2>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: separate; border-spacing: 0.5rem;">
                            <thead>
                                <tr>
                                    <th style="text-align: left; padding: 0.75rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;"></th>
                                    
                                        <th style="text-align: center; padding: 0.75rem; color: rgba(255,255,255,0.8); font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                                            discovery
                                        </th>
                                    
                                        <th style="text-align: center; padding: 0.75rem; color: rgba(255,255,255,0.8); font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                                            qualification
                                        </th>
                                    
                                        <th style="text-align: center; padding: 0.75rem; color: rgba(255,255,255,0.8); font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                                            proposal
                                        </th>
                                    
                                        <th style="text-align: center; padding: 0.75rem; color: rgba(255,255,255,0.8); font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                                            negotiation
                                        </th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                
                                    <tr>
                                        <td style="padding: 0.75rem; color: #28a745; font-weight: 600; font-size: 0.875rem;">Strong</td>
                                        
                                                <td style="text-align: center; padding: 1rem; background: rgba(40,167,69, 0.1); border-radius: 8px; border: 1px solid rgba(40,167,69, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(40,167,69, 0.1); border-radius: 8px; border: 1px solid rgba(40,167,69, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(40,167,69, 0.5); border-radius: 8px; border: 1px solid rgba(40,167,69, 0.3);">
                                                    
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£2358K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">18 deals</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(40,167,69, 0.29847328244274807); border-radius: 8px; border: 1px solid rgba(40,167,69, 0.3);">
                                                    
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£1170K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">6 deals</div>
                                                    
                                                </td>
                                            
                                    </tr>
                                
                                    <tr>
                                        <td style="padding: 0.75rem; color: #fb8500; font-weight: 600; font-size: 0.875rem;">Moderate</td>
                                        
                                                <td style="text-align: center; padding: 1rem; background: rgba(251,133,0, 0.1); border-radius: 8px; border: 1px solid rgba(251,133,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(251,133,0, 0.48982188295165396); border-radius: 8px; border: 1px solid rgba(251,133,0, 0.3);">
                                                    
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£2298K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">18 deals</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(251,133,0, 0.1); border-radius: 8px; border: 1px solid rgba(251,133,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(251,133,0, 0.1); border-radius: 8px; border: 1px solid rgba(251,133,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                    </tr>
                                
                                    <tr>
                                        <td style="padding: 0.75rem; color: #eb3349; font-weight: 600; font-size: 0.875rem;">Weak</td>
                                        
                                                <td style="text-align: center; padding: 1rem; background: rgba(235,51,73, 0.28117048346055984); border-radius: 8px; border: 1px solid rgba(235,51,73, 0.3);">
                                                    
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£1068K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">6 deals</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(235,51,73, 0.1); border-radius: 8px; border: 1px solid rgba(235,51,73, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(235,51,73, 0.1); border-radius: 8px; border: 1px solid rgba(235,51,73, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(235,51,73, 0.1); border-radius: 8px; border: 1px solid rgba(235,51,73, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                    </tr>
                                
                                    <tr>
                                        <td style="padding: 0.75rem; color: #8b0000; font-weight: 600; font-size: 0.875rem;">Critical</td>
                                        
                                                <td style="text-align: center; padding: 1rem; background: rgba(139,0,0, 0.27099236641221375); border-radius: 8px; border: 1px solid rgba(139,0,0, 0.3);">
                                                    
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£1008K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">13 deals</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(139,0,0, 0.1); border-radius: 8px; border: 1px solid rgba(139,0,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(139,0,0, 0.1); border-radius: 8px; border: 1px solid rgba(139,0,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                                <td style="text-align: center; padding: 1rem; background: rgba(139,0,0, 0.1); border-radius: 8px; border: 1px solid rgba(139,0,0, 0.3);">
                                                    
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    
                                                </td>
                                            
                                    </tr>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
            
                
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Key Insights</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        
                            <div style="background: rgba(235,51,73,0.1); border: 1px solid rgba(235,51,73,0.3); border-radius: 8px; padding: 1.25rem;">
                                <div style="display: flex; gap: 1rem;">
                                    <div style="font-size: 2rem; line-height: 1;">üö®</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.5rem; font-size: 0.875rem;">
                                            CRITICAL
                                        </div>
                                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 0.75rem; line-height: 1.5; font-size: 0.9rem;">
                                            13 deals (¬£1008K) with score &lt;30% - 12 owned by James Wilson. Risk: 77% loss rate without immediate intervention.
                                        </div>
                                        <div style="display: flex; align-items: start; gap: 0.5rem; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 6px;">
                                            <div style="color: #eb3349; font-weight: 600; font-size: 0.85rem;">‚Üí</div>
                                            <div style="color: rgba(255,255,255,0.85); font-size: 0.85rem; line-height: 1.4;">
                                                Emergency coaching session with James Wilson this week
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                            <div style="background: rgba(251,133,0,0.1); border: 1px solid rgba(251,133,0,0.3); border-radius: 8px; padding: 1.25rem;">
                                <div style="display: flex; gap: 1rem;">
                                    <div style="font-size: 2rem; line-height: 1;">‚ö†Ô∏è</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #fb8500; margin-bottom: 0.5rem; font-size: 0.875rem;">
                                            ACCESS ISSUE
                                        </div>
                                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 0.75rem; line-height: 1.5; font-size: 0.9rem;">
                                            1 deal (¬£30K) with no Economic Buyer identified. Only 23% of deals without EB access close successfully.
                                        </div>
                                        <div style="display: flex; align-items: start; gap: 0.5rem; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 6px;">
                                            <div style="color: #fb8500; font-weight: 600; font-size: 0.85rem;">‚Üí</div>
                                            <div style="color: rgba(255,255,255,0.85); font-size: 0.85rem; line-height: 1.4;">
                                                Make EB access the #1 priority for these deals - 94% of won deals had EB by qualification stage
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                            <div style="background: rgba(40,167,69,0.1); border: 1px solid rgba(40,167,69,0.3); border-radius: 8px; padding: 1.25rem;">
                                <div style="display: flex; gap: 1rem;">
                                    <div style="font-size: 2rem; line-height: 1;">‚úÖ</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #28a745; margin-bottom: 0.5rem; font-size: 0.875rem;">
                                            STRENGTH
                                        </div>
                                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 0.75rem; line-height: 1.5; font-size: 0.9rem;">
                                            6 deals (¬£750K) at 85%+ qualification - all owned by Sarah Chen. These deals have strong EB relationships, champions, and quantified value.
                                        </div>
                                        <div style="display: flex; align-items: start; gap: 0.5rem; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 6px;">
                                            <div style="color: #28a745; font-weight: 600; font-size: 0.85rem;">‚Üí</div>
                                            <div style="color: rgba(255,255,255,0.85); font-size: 0.85rem; line-height: 1.4;">
                                                Have Sarah Chen share best practices with team
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                    </div>
                </div>
            
                
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Rep Performance Snapshot</h2>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid rgba(255,255,255,0.1);">
                                    <th style="text-align: left; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Rep</th>
                                    <th style="text-align: right; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Pipeline</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Avg Score</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">At Risk</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Health</th>
                                </tr>
                            </thead>
                            <tbody>
                                
                                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                        <td style="padding: 1rem; color: #ffffff; font-weight: 500;">
                                            Sarah Chen
                                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">24 deals</div>
                                        </td>
                                        <td style="padding: 1rem; text-align: right; color: #ffffff; font-weight: 500;">
                                            ¬£3708K
                                        </td>
                                        <td style="padding: 1rem; text-align: center;">
                                            <span style="display: inline-block; padding: 0.375rem 0.75rem; background: #28a74522; color: #28a745; border-radius: 6px; font-weight: 600; font-size: 0.875rem;">
                                                74% üü¢
                                            </span>
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: rgba(255,255,255,0.5); font-weight: 600;">
                                            ‚Äî
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #28a745; font-weight: 600;">
                                            Excellent
                                        </td>
                                    </tr>
                                
                                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                        <td style="padding: 1rem; color: #ffffff; font-weight: 500;">
                                            Michael Rodriguez
                                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">18 deals</div>
                                        </td>
                                        <td style="padding: 1rem; text-align: right; color: #ffffff; font-weight: 500;">
                                            ¬£2118K
                                        </td>
                                        <td style="padding: 1rem; text-align: center;">
                                            <span style="display: inline-block; padding: 0.375rem 0.75rem; background: #fb850022; color: #fb8500; border-radius: 6px; font-weight: 600; font-size: 0.875rem;">
                                                69% üü°
                                            </span>
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: rgba(255,255,255,0.5); font-weight: 600;">
                                            ‚Äî
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #fb8500; font-weight: 600;">
                                            Moderate
                                        </td>
                                    </tr>
                                
                                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                        <td style="padding: 1rem; color: #ffffff; font-weight: 500;">
                                            James Wilson
                                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">18 deals</div>
                                        </td>
                                        <td style="padding: 1rem; text-align: right; color: #ffffff; font-weight: 500;">
                                            ¬£2046K
                                        </td>
                                        <td style="padding: 1rem; text-align: center;">
                                            <span style="display: inline-block; padding: 0.375rem 0.75rem; background: #eb334922; color: #eb3349; border-radius: 6px; font-weight: 600; font-size: 0.875rem;">
                                                29% üî¥
                                            </span>
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #eb3349; font-weight: 600;">
                                            18 deals
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #eb3349; font-weight: 600;">
                                            Critical ‚ö†Ô∏è
                                        </td>
                                    </tr>
                                
                                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                        <td style="padding: 1rem; color: #ffffff; font-weight: 500;">
                                            Martin Brennan
                                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">1 deal</div>
                                        </td>
                                        <td style="padding: 1rem; text-align: right; color: #ffffff; font-weight: 500;">
                                            ¬£30K
                                        </td>
                                        <td style="padding: 1rem; text-align: center;">
                                            <span style="display: inline-block; padding: 0.375rem 0.75rem; background: #eb334922; color: #eb3349; border-radius: 6px; font-weight: 600; font-size: 0.875rem;">
                                                0% üî¥
                                            </span>
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #eb3349; font-weight: 600;">
                                            1 deal
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: #eb3349; font-weight: 600;">
                                            Critical ‚ö†Ô∏è
                                        </td>
                                    </tr>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
            
                
                <div class="card">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Top 5 Deals Requiring Attention</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                1. kota - Vision
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">Martin Brennan</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£30,000</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge score-low" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">0%</span>
                                                
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® 2 critical
                                                    </span>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                üö© No Coach/Champion Identified ‚Ä¢ üö© Economic Buyer Not Identified
                                            </div>
                                        </div>
                                    
                                    
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    üî¥ <strong>Get Economic Buyer Meeting:</strong> Request introduction from current contact to CFO/VP/Budget Owner level. Without EB access, technical validation is meaningless.
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    7 days
                                                </div>
                                            </div>
                                        </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView(&#39;deals&#39;); setTimeout(() =&gt; showReviewDetail(&#39;deal_1767802159725&#39;), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                2. DataCorp - Business Intelligence
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">James Wilson</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£95,000</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge score-low" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">22%</span>
                                                
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® 1 critical
                                                    </span>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                üö© No Coach/Champion Identified
                                            </div>
                                        </div>
                                    
                                    
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    üî¥ <strong>Develop Internal Champion:</strong> Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    14 days
                                                </div>
                                            </div>
                                        </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView(&#39;deals&#39;); setTimeout(() =&gt; showReviewDetail(&#39;sample-1767802063909-4&#39;), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                3. DataCorp - Business Intelligence
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">James Wilson</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£95,000</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge score-low" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">22%</span>
                                                
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® 1 critical
                                                    </span>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                üö© No Coach/Champion Identified
                                            </div>
                                        </div>
                                    
                                    
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    üî¥ <strong>Develop Internal Champion:</strong> Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    14 days
                                                </div>
                                            </div>
                                        </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView(&#39;deals&#39;); setTimeout(() =&gt; showReviewDetail(&#39;sample-1767802078246-4&#39;), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                4. DataCorp - Business Intelligence
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">James Wilson</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£95,000</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge score-low" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">22%</span>
                                                
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® 1 critical
                                                    </span>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                üö© No Coach/Champion Identified
                                            </div>
                                        </div>
                                    
                                    
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    üî¥ <strong>Develop Internal Champion:</strong> Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    14 days
                                                </div>
                                            </div>
                                        </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView(&#39;deals&#39;); setTimeout(() =&gt; showReviewDetail(&#39;sample-1767802724059-4&#39;), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                5. DataCorp - Business Intelligence
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">James Wilson</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£95,000</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge score-low" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">22%</span>
                                                
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® 1 critical
                                                    </span>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                üö© No Coach/Champion Identified
                                            </div>
                                        </div>
                                    
                                    
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    üî¥ <strong>Develop Internal Champion:</strong> Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    14 days
                                                </div>
                                            </div>
                                        </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView(&#39;deals&#39;); setTimeout(() =&gt; showReviewDetail(&#39;sample-1767803228821-4&#39;), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            
                    </div>
                </div>
            
            </div>

            <!-- Deal-by-Deal View -->
            <div id="deal-by-deal-view" class="hidden">
                <div id="review-summary" style="padding: 1rem; background: rgba(10,22,40,0.6); border-radius: 8px; margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center;">
                    <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8);">
                        <span id="review-deal-count">61 deals</span> in queue ‚Ä¢ 
                        Avg Score: <span id="review-avg-score">58%</span> ‚Ä¢ 
                        At Risk: <span id="review-at-risk-count">19</span>
                    </div>
                </div>
                
                <div class="grid-2">
                    <div class="card">
                        <h2>Deal Queue <span id="queue-subtitle" style="font-size: 0.875rem; font-weight: normal; color: rgba(255,255,255,0.6);">(sorted by score - lowest first)</span></h2>
                        <div id="review-deal-list">
                        <div style="padding: 1rem; border: 1px solid rgba(255, 255, 255, 0.12); background: rgba(5, 15, 30, 0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: 0.3s; box-shadow: none;" onclick="showReviewDetail(&#39;deal_1767802159725&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">kota - Vision</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Martin Brennan</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">0%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£30,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">0 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 2 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255, 255, 255, 0.12); background: rgba(5, 15, 30, 0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: 0.3s; box-shadow: none;" onclick="showReviewDetail(&#39;sample-1767802063909-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-4&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">DataCorp - Business Intelligence</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">22%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£95,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-9&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">EduLearn - LMS Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">28%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£68,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-7&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">RetailMax - POS System Upgrade</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">James Wilson</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-low">38%</span>
                                <span class="stage-badge stage-discovery">discovery</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£178,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">33 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-2&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">GlobalRetail - Inventory Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">58%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£85,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© 1 critical</span>
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-10&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">LogiTrans - Fleet Management</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">62%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£156,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">37 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 3 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-6&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">HealthTech Innovations - Patient Portal</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">64%</span>
                                <span class="stage-badge stage-qualification">qualification</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£142,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">18 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-8&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">CloudServe - Security Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-medium">72%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£210,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">28 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-5&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">ManuCorp - Supply Chain Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Michael Rodriguez</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">76%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£58,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">10 days</span>
                                
                                <span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è 1 high</span>
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-3&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">FinTech Partners - Compliance Platform</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">82%</span>
                                <span class="stage-badge stage-negotiation">negotiation</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£195,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">5 days</span>
                                
                                
                                <span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ 4 positive</span>
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802063909-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802078246-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767802724059-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803228821-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767803235863-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" onclick="showReviewDetail(&#39;sample-1767804187547-1&#39;)" onmouseenter="this.style.borderColor=&#39;#667eea&#39;; this.style.boxShadow=&#39;0 8px 24px rgba(102, 126, 234, 0.3)&#39;" onmouseleave="this.style.borderColor=&#39;rgba(255,255,255,0.12)&#39;; this.style.boxShadow=&#39;none&#39;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">TechFlow Solutions - Marketing Automation</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">Sarah Chen</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge score-high">88%</span>
                                <span class="stage-badge stage-proposal">proposal</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£125,000</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">23 days</span>
                                
                                
                                
                            </div>
                        </div>
                    </div>
                    </div>
                    
                    <div class="card">
                        <h2>Deal Review</h2>
                        <div id="review-deal-detail">
                <h3 style="color: #ffffff;">kota - Vision</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0; font-size: 0.875rem; color: rgba(255,255,255,0.8);">
                    <div><strong style="color: #ffffff;">Rep:</strong> Martin Brennan</div>
                    <div><strong style="color: #ffffff;">Value:</strong> ¬£30,000</div>
                    <div><strong style="color: #ffffff;">Stage:</strong> discovery</div>
                    <div><strong style="color: #ffffff;">Close Date:</strong> 19/02/2026</div>
                    <div><strong style="color: #ffffff;">Score:</strong> <span class="score-badge score-low">0%</span></div>
                    <div><strong style="color: #ffffff;">Days in Stage:</strong> 0</div>
                </div>
                
                
                
                    <div style="background: rgba(235,51,73,0.1); border: 1px solid rgba(235,51,73,0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <h4 style="color: #eb3349; margin: 0 0 0.75rem 0; font-size: 0.95rem;">üö© Red Flags (4)</h4>
                        
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(235,51,73,0.2); last-child:border-bottom: none;">
                                <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    üö© No Coach/Champion Identified
                                    <span style="background: rgba(235,51,73,0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">CRITICAL</span>
                                    
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">Without an internal advocate, this deal is 71% more likely to be lost to status quo or competitor</div>
                            </div>
                        
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(235,51,73,0.2); last-child:border-bottom: none;">
                                <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    üö© Economic Buyer Not Identified
                                    <span style="background: rgba(235,51,73,0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">CRITICAL</span>
                                    
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">Only 23% of deals without EB access close. 94% of won deals had EB identified by qualification stage</div>
                            </div>
                        
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(235,51,73,0.2); last-child:border-bottom: none;">
                                <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    üö© Metrics Not Documented
                                    
                                    
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">Missing quantified business impact weakens value prop and urgency</div>
                            </div>
                        
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(235,51,73,0.2); last-child:border-bottom: none;">
                                <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    üö© Decision Process Not Mapped
                                    
                                    
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">Without understanding the buying process, surprises emerge late and cause slips</div>
                            </div>
                        
                    </div>
                
                
                
            
                
                
                <div style="background: rgba(102,126,234,0.1); border: 1px solid rgba(102,126,234,0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <h4 style="color: #667eea; margin: 0 0 1rem 0; font-size: 0.95rem;">üéØ Next Best Actions (4)</h4>
                    
                        <div style="background: rgba(10,22,40,0.6); border-left: 3px solid #eb3349; padding: 0.75rem; margin-bottom: 0.75rem; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: 600; color: #ffffff; font-size: 0.875rem;">
                                    üî¥ Get Economic Buyer Meeting
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); white-space: nowrap; margin-left: 1rem;">
                                    7 days
                                </div>
                            </div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Current:</span>
                                <span style="color: rgba(255,255,255,0.85);"> No EB identified</span>
                            </div>
                            
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Action:</span>
                                <span style="color: rgba(255,255,255,0.9);"> Request introduction from current contact to CFO/VP/Budget Owner level. Without EB access, technical validation is meaningless.</span>
                            </div>
                            
                                <div style="font-size: 0.75rem; color: #28a745; font-style: italic; margin-top: 0.5rem;">
                                    üí° 94% of won deals had Economic Buyer identified by qualification stage
                                </div>
                            
                            
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-top: 0.5rem;">
                                    Only Economic Buyers can give final approval. Deals without EB access have 77% lower close rate.
                                </div>
                            
                        </div>
                    
                        <div style="background: rgba(10,22,40,0.6); border-left: 3px solid #eb3349; padding: 0.75rem; margin-bottom: 0.75rem; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: 600; color: #ffffff; font-size: 0.875rem;">
                                    üî¥ Develop Internal Champion
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); white-space: nowrap; margin-left: 1rem;">
                                    14 days
                                </div>
                            </div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Current:</span>
                                <span style="color: rgba(255,255,255,0.85);"> No coach/champion identified</span>
                            </div>
                            
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Action:</span>
                                <span style="color: rgba(255,255,255,0.9);"> Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.</span>
                            </div>
                            
                                <div style="font-size: 0.75rem; color: #28a745; font-style: italic; margin-top: 0.5rem;">
                                    üí° Deals with active champion have 78% win rate vs 29% without
                                </div>
                            
                            
                        </div>
                    
                        <div style="background: rgba(10,22,40,0.6); border-left: 3px solid #fb8500; padding: 0.75rem; margin-bottom: 0.75rem; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: 600; color: #ffffff; font-size: 0.875rem;">
                                    üü° Quantify Business Impact
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); white-space: nowrap; margin-left: 1rem;">
                                    14 days
                                </div>
                            </div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Current:</span>
                                <span style="color: rgba(255,255,255,0.85);"> Vague or missing metrics</span>
                            </div>
                            
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Action:</span>
                                <span style="color: rgba(255,255,255,0.9);"> Discovery call to quantify: (1) Current state costs (time, money, risk), (2) Desired future state, (3) Financial impact (ROI, payback), (4) Timeline urgency</span>
                            </div>
                            
                                <div style="font-size: 0.75rem; color: #28a745; font-style: italic; margin-top: 0.5rem;">
                                    üí° Quantified metrics increase win rate from 41% to 81%
                                </div>
                            
                            
                        </div>
                    
                        <div style="background: rgba(10,22,40,0.6); border-left: 3px solid #fb8500; padding: 0.75rem; margin-bottom: 0.75rem; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: 600; color: #ffffff; font-size: 0.875rem;">
                                    üü° Map Complete Decision Process
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); white-space: nowrap; margin-left: 1rem;">
                                    14 days
                                </div>
                            </div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Current:</span>
                                <span style="color: rgba(255,255,255,0.85);"> Buying process unclear</span>
                            </div>
                            
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Action:</span>
                                <span style="color: rgba(255,255,255,0.9);"> Ask champion/EB: "Walk me through exactly how decisions like this get made at your company. Who needs to approve? What stages? How long does each take?" Map all steps, stakeholders, and timing.</span>
                            </div>
                            
                            
                        </div>
                    
                </div>
            
                
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; color: #ffffff;">MEDDICC Review</h4>
                <div style="background: rgba(10,22,40,0.9); padding: 1rem; border-radius: 12px; margin-bottom: 1rem; border: 1px solid rgba(255,255,255,0.12);">
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Metrics:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Economic Buyer:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Decision Criteria:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Decision Process:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Identify Pain:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Champion:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">Competition:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;"><em style="color: rgba(255,255,255,0.5);">Not completed</em></p>
                        </div>
                    
                </div>
                
                <h4 style="margin-bottom: 1rem; color: #ffffff;">Qualification Requirements</h4>
                <ul class="requirement-list">
                    
                        <li class="requirement-unmet">Quantified metrics with numbers/currency</li>
                    
                        <li class="requirement-unmet">Economic Buyer identified with title</li>
                    
                        <li class="requirement-unmet">Multiple decision criteria documented</li>
                    
                        <li class="requirement-unmet">Decision process with timeline</li>
                    
                        <li class="requirement-unmet">Business pain with impact keywords</li>
                    
                        <li class="requirement-unmet">Champion with influence documented</li>
                    
                        <li class="requirement-unmet">Competition understood (&gt;30 chars)</li>
                    
                </ul>
                
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; color: #ffffff;">Review Notes</h4>
                <textarea id="review-notes-deal_1767802159725" placeholder="Add notes from this review..." style="width: 100%; min-height: 100px; padding: 0.75rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(10,22,40,0.95); color: #ffffff;"></textarea>
                
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-primary" onclick="saveReviewNotes(&#39;deal_1767802159725&#39;)">Save Notes</button>
                    <button class="btn btn-secondary" onclick="loadDeal(&#39;deal_1767802159725&#39;); switchMode(&#39;rep&#39;)">Edit Deal</button>
                </div>
            </div>
                    </div>
                </div>
            </div>
        </div>
                <div class="card">
                    <h2>Deal Queue <span id="queue-subtitle" style="font-size: 0.875rem; font-weight: normal; color: rgba(255,255,255,0.6);"></span></h2>
                    <div id="review-deal-list"></div>
                </div>
                
                <div class="card">
                    <h2>Deal Review</h2>
                    <div id="review-deal-detail">
                        <div style="padding: 3rem 2rem; text-align: center; color: rgba(255,255,255,0.6);">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üëà</div>
                            <h3 style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">Getting Started</h3>
                            <p style="margin-bottom: 1.5rem; line-height: 1.6;">
                                Click on any deal in the <strong style="color: #ffffff;">Deal Queue</strong> (left) to see:
                            </p>
                            <div style="text-align: left; max-width: 400px; margin: 0 auto; background: rgba(10,22,40,0.6); padding: 1.5rem; border-radius: 8px;">
                                <div style="margin-bottom: 1rem;">
                                    <div style="color: #eb3349; font-weight: 600; margin-bottom: 0.5rem;">üö© Red Flags</div>
                                    <div style="font-size: 0.875rem;">Critical issues &amp; risks detected automatically</div>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <div style="color: #28a745; font-weight: 600; margin-bottom: 0.5rem;">‚úÖ Green Flags</div>
                                    <div style="font-size: 0.875rem;">Positive indicators from won deal patterns</div>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <div style="color: #667eea; font-weight: 600; margin-bottom: 0.5rem;">üéØ Next Best Actions</div>
                                    <div style="font-size: 0.875rem;">Specific recommendations with deadlines</div>
                                </div>
                                <div>
                                    <div style="color: rgba(255,255,255,0.8); font-weight: 600; margin-bottom: 0.5rem;">üìã Full MEDDICC Review</div>
                                    <div style="font-size: 0.875rem;">Complete qualification details</div>
                                </div>
                            </div>
                            <div style="margin-top: 2rem; padding: 1rem; background: rgba(102,126,234,0.15); border-radius: 8px; border: 1px solid rgba(102,126,234,0.3);">
                                <div style="font-weight: 600; color: #667eea; margin-bottom: 0.5rem;">üí° Pro Tip</div>
                                <div style="font-size: 0.875rem;">
                                    Deals are sorted by score (lowest first) so you can focus on the highest-risk deals immediately
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
    

    <!-- Modals -->
    <div class="modal" id="deal-list-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>My Deals</h2>
                <button class="close-btn" onclick="closeDealListModal()">√ó</button>
            </div>
            <div id="deal-list"></div>
        </div>
    </div>

    <script>
        // Configuration
        const QUALIFICATION_GATES = {
            'qualification': { minScore: 40, message: 'Deals must be 40%+ qualified to move to Qualification' },
            'proposal': { minScore: 60, message: 'Deals must be 60%+ qualified to move to Proposal' },
            'negotiation': { minScore: 70, message: 'Deals must be 70%+ qualified to move to Negotiation' },
            'commit': { minScore: 75, message: 'Only deals 75%+ qualified can be forecasted as Commit' }
        };

        const sections = [
            { 
                id: 'metrics', 
                label: 'Metrics', 
                prompt: 'What quantifiable business metrics or outcomes matter to this prospect?',
                guidance: {
                    whatToInclude: [
                        'Specific numbers (%, hours, costs)',
                        'Currency values (¬£, $, ‚Ç¨)',
                        'Current state vs desired state',
                        'Time period for measurement'
                    ],
                    goodExample: '**Current State:** Processing 500 orders/day manually takes 12 hours/day (3 FTE @ ¬£35K each = ¬£105K/year labor cost)\n**Desired State:** Automate 80% of orders, reduce processing time to 2 hours/day\n**Business Impact:** Save ¬£84K/year in labor + redeploy staff to higher-value work\n**Timeframe:** Measure over 6 months post-implementation',
                    badExample: 'Want to improve efficiency and reduce costs. Looking to streamline operations.',
                    questions: [
                        'What specific metric are you trying to move? (revenue, cost, time, error rate, etc.)',
                        'What is the current baseline measurement?',
                        'What is the target/goal measurement?',
                        'What is the financial impact in ¬£/$/‚Ç¨?',
                        'Over what time period will you measure this?'
                    ],
                    minLength: 100,
                    keywords: ['¬£', '$', '‚Ç¨', '%', 'hours', 'days', 'cost', 'save', 'increase', 'reduce']
                }
            },
            { 
                id: 'economicBuyer', 
                label: 'Economic Buyer', 
                prompt: 'Who has budget authority and final sign-off for this purchase?',
                guidance: {
                    whatToInclude: [
                        'Full name and exact title',
                        'Their spending authority level',
                        'Evidence of access (meeting scheduled, introduced, etc.)',
                        'Their strategic priorities this year'
                    ],
                    goodExample: '**Name:** Sarah Chen, CFO\n**Authority:** Signs off on all investments >¬£25K, part of executive committee\n**Access:** Champion (David) reports directly to her, intro meeting scheduled 15th Jan\n**Priorities:** Cost reduction initiatives, digital transformation, improving cash flow\n**Relationship:** Warm - she attended our webinar last month and requested follow-up',
                    badExample: 'Finance department will approve. Talking to the IT manager who seems interested.',
                    questions: [
                        'What is their exact title? (CFO, CEO, VP Finance, etc.)',
                        'What is their spending authority threshold?',
                        'When do you have a meeting scheduled with them?',
                        'What are their top 3 business priorities this year?',
                        'How will you get access to them if you haven\'t met yet?'
                    ],
                    minLength: 80,
                    keywords: ['cfo', 'ceo', 'cto', 'cio', 'vp', 'director', 'head', 'meeting', 'scheduled', 'access']
                }
            },
            { 
                id: 'decisionCriteria', 
                label: 'Decision Criteria', 
                prompt: 'What specific criteria will they use to evaluate solutions?',
                guidance: {
                    whatToInclude: [
                        'Technical requirements (must-haves)',
                        'Business requirements (ROI, payback period)',
                        'Weighted priorities (what matters most)',
                        'Deal-breakers (what eliminates vendors)'
                    ],
                    goodExample: '**Must-Haves:**\n1. API integration with Salesforce (critical)\n2. SOC2 compliance (non-negotiable)\n3. <6 month implementation (board mandate)\n\n**Evaluation Criteria (weighted):**\n- ROI/Payback period (40%)\n- Ease of implementation (30%)\n- Vendor stability/references (20%)\n- Ongoing support quality (10%)\n\n**Deal-Breakers:**\n- No on-premise option (regulatory requirement)\n- Implementation >¬£50K (budget constraint)',
                    badExample: 'Looking for best value, good features, and reliable vendor. Want something that works well.',
                    questions: [
                        'What are the absolute must-have features/requirements?',
                        'What are the nice-to-haves vs must-haves?',
                        'How will they score/weight different criteria?',
                        'What would eliminate a vendor from consideration?',
                        'Who defined these criteria and when?'
                    ],
                    minLength: 120,
                    keywords: ['must', 'require', 'need', 'critical', 'important', 'roi', 'compliance', 'integration']
                }
            },
            { 
                id: 'decisionProcess', 
                label: 'Decision Process', 
                prompt: 'What are the steps, timeline, and stakeholders in their buying process?',
                guidance: {
                    whatToInclude: [
                        'Each stage/step with dates',
                        'Who is involved at each stage',
                        'Approval gates and sign-offs',
                        'Legal, procurement, security reviews'
                    ],
                    goodExample: '**Stage 1 - Technical Evaluation (Jan 15-30):**\nIT team tests solution, security review by CISO\n\n**Stage 2 - Business Case (Feb 1-14):**\nChampion presents ROI to CFO & COO, need exec approval to proceed\n\n**Stage 3 - Vendor Selection (Feb 15-28):**\nFinal vendor presentations, reference calls, negotiation\n\n**Stage 4 - Legal/Procurement (Mar 1-15):**\nContract review (Legal - 1 week), PO creation (Procurement)\n\n**Stage 5 - Signature (Mar 20 target):**\nCFO signs, Budget approved in Q1\n\n**Dependencies:** Security review can delay 2-3 weeks if issues found',
                    badExample: 'Need to get approval from a few people. Probably take a few weeks. Will let you know.',
                    questions: [
                        'What are the specific stages from here to signed contract?',
                        'Who needs to approve at each stage?',
                        'What are the realistic dates for each stage?',
                        'Is Legal/Procurement/Security involved? When?',
                        'What could delay the process?'
                    ],
                    minLength: 150,
                    keywords: ['week', 'month', 'date', 'stage', 'step', 'phase', 'legal', 'procurement', 'approval', 'review']
                }
            },
            { 
                id: 'identifyPain', 
                label: 'Identify Pain', 
                prompt: 'What business pain are they experiencing? What happens if they do nothing?',
                guidance: {
                    whatToInclude: [
                        'Specific problem being experienced now',
                        'Business impact/consequences',
                        'Why this is urgent (trigger event)',
                        'Cost of doing nothing'
                    ],
                    goodExample: '**Current Pain:**\nManual order processing causing 4-6 hour delays, leading to customer complaints and lost orders. Last month: 23 cancelled orders worth ¬£127K due to slow processing.\n\n**Root Cause:**\nLegacy system can\'t handle volume growth (40% increase in 18 months), no integration between sales & fulfillment.\n\n**Business Impact:**\n- Revenue at risk: ¬£1.5M/year in lost orders\n- Customer satisfaction dropping (NPS down from 52 to 38)\n- Staff burnout (overtime costs +¬£45K/year)\n\n**Urgency:**\nCEO mandate to fix before peak season (May), board reviewing this in Q1\n\n**Cost of Inaction:**\nContinue losing 5-7% of orders, reputation damage, potential staff turnover',
                    badExample: 'Current system is old and inefficient. Want to modernize and improve things.',
                    questions: [
                        'What specific problem are they experiencing right now?',
                        'What is the measurable business impact?',
                        'Why is this urgent? What changed?',
                        'What happens if they do nothing?',
                        'Who is feeling this pain most acutely?'
                    ],
                    minLength: 120,
                    keywords: ['cost', 'lose', 'losing', 'risk', 'waste', 'fail', 'failing', 'urgent', 'problem', 'issue']
                }
            },
            { 
                id: 'champion', 
                label: 'Champion', 
                prompt: 'Who is actively selling internally on your behalf? What\'s their influence?',
                guidance: {
                    whatToInclude: [
                        'Champion name, title, and tenure',
                        'Why they care (personal stake)',
                        'Their influence and credibility',
                        'Evidence they\'re actively selling for you'
                    ],
                    goodExample: '**Champion:** David Thompson, VP Operations (8 years tenure)\n\n**Why He Cares:**\nDirectly measured on operational efficiency KPIs. His bonus tied to cost reduction targets. Board pressure to modernize. This is his initiative.\n\n**Influence & Access:**\n- Reports directly to COO\n- Respected by CFO (worked together 4 years)\n- Owns budget for operations technology (¬£500K)\n- Sits on digital transformation steering committee\n\n**Active Advocacy:**\n- Built internal business case deck using our ROI data\n- Already presented to COO, got verbal approval\n- Scheduled meeting with CFO for us (Jan 15)\n- Provided us with their evaluation criteria\n- Giving us intel on procurement process\n\n**Relationship Quality:** Strong - meets bi-weekly, responds within hours, proactively shares updates',
                    badExample: 'IT manager David seems interested and likes our solution. He\'s helpful.',
                    questions: [
                        'What is their name and exact title?',
                        'Why do they personally care about solving this?',
                        'What is their relationship with the Economic Buyer?',
                        'What have they done to actively sell for you internally?',
                        'What access/credibility do they have with decision-makers?'
                    ],
                    minLength: 100,
                    keywords: ['access', 'influence', 'credibility', 'advocate', 'champion', 'support', 'reports to', 'relationship']
                }
            },
            { 
                id: 'competition', 
                label: 'Competition', 
                prompt: 'What alternatives are they considering (competitors, DIY, status quo)?',
                guidance: {
                    whatToInclude: [
                        'Named competitors being evaluated',
                        'Their perceived strengths/weaknesses',
                        'Status quo/do-nothing option',
                        'Your differentiation'
                    ],
                    goodExample: '**Direct Competitors:**\n1. **Competitor A** - Incumbent (3 years), known brand\n   - Strengths: Existing relationship, familiar to team\n   - Weaknesses: No Salesforce integration (critical gap), slow implementation (8-12 months), 40% more expensive\n   - Status: In evaluation, not preferred by Champion\n\n2. **Competitor B** - New vendor\n   - Strengths: Lower price (¬£15K less)\n   - Weaknesses: No SOC2 yet (deal-breaker), small company (stability concerns), limited UK support\n   - Status: Under consideration\n\n**Status Quo:**\n- Keep current manual process\n- Risk: Continue losing orders, staff burnout\n- Champion strongly against this, CEO mandate to change\n\n**Our Differentiation:**\n- Only vendor with native Salesforce integration\n- Fastest implementation (8 weeks vs 6+ months)\n- Mid-market pricing with enterprise features',
                    badExample: 'Looking at a few other vendors. Might also consider building internally or staying with current solution.',
                    questions: [
                        'Who are the specific competitors by name?',
                        'What do you know about their strengths and weaknesses?',
                        'Is "do nothing" or "build it themselves" an option?',
                        'What makes you different/better than each alternative?',
                        'Which competitor does the Champion prefer and why?'
                    ],
                    minLength: 120,
                    keywords: ['competitor', 'alternative', 'status quo', 'build', 'internal', 'current', 'versus', 'compared']
                }
            }
        ];

        let currentMode = 'rep';
        let currentDealId = null;
        let activeSection = 0;
        let dealData = {};
        let autoSaveTimer = null;

        // Initialize
        function init() {
            resetDealData();
            renderTabs();
            updateSection();
            updateDealCount();
        }

        function resetDealData() {
            const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD format
            dealData = {
                dealName: '',
                dealValue: '',
                closeDate: '',
                salesRep: '',
                dealStage: '',
                forecastCategory: '',
                createdDate: today,
                stageHistory: [],
                metrics: '',
                economicBuyer: '',
                decisionCriteria: '',
                decisionProcess: '',
                identifyPain: '',
                champion: '',
                competition: ''
            };
        }

        function switchMode(mode) {
            currentMode = mode;
            
            // Update button states
            document.getElementById('rep-mode-btn').classList.toggle('active', mode === 'rep');
            document.getElementById('manager-mode-btn').classList.toggle('active', mode === 'manager');
            document.getElementById('review-mode-btn').classList.toggle('active', mode === 'review');
            
            // Show/hide views
            document.getElementById('rep-view').classList.toggle('hidden', mode !== 'rep');
            document.getElementById('manager-view').classList.toggle('hidden', mode !== 'manager');
            document.getElementById('review-view').classList.toggle('hidden', mode !== 'review');
            
            if (mode === 'manager') {
                loadManagerDashboard();
            } else if (mode === 'review') {
                loadReviewMode();
            }
        }

        function renderTabs() {
            const tabsContainer = document.getElementById('section-tabs');
            tabsContainer.innerHTML = sections.map((section, index) => {
                const isActive = index === activeSection;
                const isCompleted = dealData[section.id] && dealData[section.id].trim() !== '';
                return `<button class="tab ${isActive ? 'tab-active' : 'tab-inactive'} ${isCompleted ? 'tab-completed' : ''}" 
                        onclick="setActiveSection(${index})">${section.label}</button>`;
            }).join('');
        }

        function setActiveSection(index) {
            activeSection = index;
            updateSection();
        }

        function updateSection() {
            const section = sections[activeSection];
            document.getElementById('section-title').textContent = section.label;
            document.getElementById('section-prompt').textContent = section.prompt;
            document.getElementById('section-input').value = dealData[section.id] || '';
            
            document.getElementById('prev-btn').disabled = activeSection === 0;
            document.getElementById('next-btn').disabled = activeSection === sections.length - 1;
            
            // Add guidance panel
            if (section.guidance) {
                renderGuidancePanel(section);
                
                // Update quality indicators (needs to happen after DOM is ready)
                setTimeout(() => {
                    updateQualityIndicators(section);
                }, 100);
            }
            
            renderTabs();
            updateProgress();
        }

        function renderGuidancePanel(section) {
            try {
                const guidance = section.guidance;
                
                if (!guidance) {
                    console.warn('No guidance found for section:', section.id);
                    return;
                }
                
                // Check if textarea exists
                const textarea = document.getElementById('section-input');
                if (!textarea) {
                    console.error('Textarea not found');
                    return;
                }
                
                const guidanceHTML = `
                    <div style="margin-bottom: 1rem;">
                        <button class="btn btn-secondary" onclick="toggleGuidance()" id="guidance-toggle" style="width: 100%; justify-content: center; display: flex; align-items: center; gap: 0.5rem;">
                            <span id="guidance-icon">‚ñº</span> Show Guidance & Examples
                        </button>
                    </div>
                    
                    <div id="guidance-panel" class="hidden" style="background: rgba(10,22,40,0.95); border: 1px solid rgba(102,126,234,0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <h4 style="color: #667eea; margin-bottom: 1rem; font-size: 1rem;">üìã What to Include:</h4>
                        <ul style="color: rgba(255,255,255,0.8); margin-bottom: 1.5rem; padding-left: 1.5rem; line-height: 1.6;">
                            ${guidance.whatToInclude.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        
                        <h4 style="color: #38ef7d; margin-bottom: 0.5rem; font-size: 1rem;">‚úÖ Good Example:</h4>
                        <div style="background: rgba(56,239,125,0.05); border-left: 3px solid #38ef7d; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.85rem; white-space: pre-wrap; color: rgba(255,255,255,0.85);">
${guidance.goodExample}
                        </div>
                        
                        <h4 style="color: #f5576c; margin-bottom: 0.5rem; font-size: 1rem;">‚ùå Bad Example:</h4>
                        <div style="background: rgba(245,93,108,0.05); border-left: 3px solid #f5576c; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.85rem; color: rgba(255,255,255,0.7);">
                            ${guidance.badExample}
                        </div>
                        
                        <h4 style="color: #f093fb; margin-bottom: 0.5rem; font-size: 1rem;">‚ùì Key Questions to Answer:</h4>
                        <ol style="color: rgba(255,255,255,0.8); padding-left: 1.5rem; line-height: 1.8;">
                            ${guidance.questions.map(q => `<li>${q}</li>`).join('')}
                        </ol>
                    </div>
                `;
                
                // Check if guidance container already exists
                const existingGuidance = document.getElementById('guidance-container');
                if (existingGuidance) {
                    existingGuidance.innerHTML = guidanceHTML;
                } else {
                    // Create new container
                    const container = document.createElement('div');
                    container.id = 'guidance-container';
                    container.innerHTML = guidanceHTML;
                    
                    // Insert before textarea
                    if (textarea.parentNode) {
                        textarea.parentNode.insertBefore(container, textarea);
                    } else {
                        console.warn('Cannot find textarea parent node');
                    }
                }
            } catch (error) {
                console.error('Error rendering guidance panel:', error);
            }
        }

        function toggleGuidance() {
            const panel = document.getElementById('guidance-panel');
            const button = document.getElementById('guidance-toggle');
            
            if (!panel || !button) return;
            
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                button.innerHTML = '<span id="guidance-icon">‚ñ≤</span> Hide Guidance';
            } else {
                panel.classList.add('hidden');
                button.innerHTML = '<span id="guidance-icon">‚ñº</span> Show Guidance & Examples';
            }
        }

        function updateQualityIndicators(section) {
            try {
                const value = dealData[section.id] || '';
                const guidance = section.guidance;
                
                if (!guidance) {
                    console.warn('No guidance found for section:', section.id);
                    return;
                }
                
                const length = value.length;
                const meetsLength = length >= guidance.minLength;
                
                const keywordsFound = guidance.keywords.filter(keyword => 
                    value.toLowerCase().includes(keyword)
                ).length;
                const keywordScore = Math.min((keywordsFound / 3) * 100, 100);
                
                let qualityScore = 0;
                if (meetsLength) qualityScore += 50;
                qualityScore += (keywordScore / 2);
                
                const qualityHTML = `
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-radius: 12px; padding: 1rem; margin-top: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <span style="font-weight: 600; color: rgba(255,255,255,0.85);">Quality Score:</span>
                            <span style="font-size: 1.5rem; font-weight: bold; color: ${qualityScore >= 75 ? '#38ef7d' : qualityScore >= 50 ? '#f093fb' : '#f5576c'};">
                                ${Math.round(qualityScore)}%
                            </span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: ${qualityScore}%; height: 100%; background: ${qualityScore >= 75 ? '#38ef7d' : qualityScore >= 50 ? '#f093fb' : '#f5576c'}; transition: width 0.3s;"></div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.85rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: ${meetsLength ? '#38ef7d' : 'rgba(255,255,255,0.6)'};">
                                ${meetsLength ? '‚úì' : '‚óã'} Length: ${length} / ${guidance.minLength} chars
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: ${keywordsFound >= 3 ? '#38ef7d' : 'rgba(255,255,255,0.6)'};">
                                ${keywordsFound >= 3 ? '‚úì' : '‚óã'} Key terms: ${keywordsFound} / 3+
                            </div>
                        </div>
                        
                        ${qualityScore < 75 ? `
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(245,93,108,0.1); border-left: 3px solid #f5576c; border-radius: 6px; font-size: 0.85rem; color: rgba(255,255,255,0.85);">
                                <strong>üí° Tip:</strong> ${getQualityTip(section.id, value, guidance)}
                            </div>
                        ` : ''}
                    </div>
                `;
                
                // Check if quality indicator already exists
                let existingIndicator = document.getElementById('quality-indicator');
                if (existingIndicator) {
                    // Update existing
                    existingIndicator.innerHTML = qualityHTML;
                } else {
                    // Create new one
                    const buttonRow = document.getElementById('button-row');
                    if (buttonRow && buttonRow.parentNode) {
                        const container = document.createElement('div');
                        container.id = 'quality-indicator';
                        container.innerHTML = qualityHTML;
                        
                        // Insert before button row
                        buttonRow.parentNode.insertBefore(container, buttonRow);
                    } else {
                        console.warn('Cannot find button-row element');
                    }
                }
            } catch (error) {
                console.error('Error updating quality indicators:', error);
            }
        }

        function getQualityTip(sectionId, value, guidance) {
            const length = value.length;
            const hasKeywords = guidance.keywords.some(k => value.toLowerCase().includes(k));
            
            if (length < guidance.minLength) {
                return `Add more detail - aim for at least ${guidance.minLength} characters. Click "Show Guidance" above for examples.`;
            }
            
            if (!hasKeywords) {
                switch(sectionId) {
                    case 'metrics':
                        return 'Include specific numbers with currency symbols (¬£, $, ‚Ç¨) and percentages.';
                    case 'economicBuyer':
                        return 'Add their exact title (CFO, CEO, etc.) and describe your access to them.';
                    case 'decisionCriteria':
                        return 'List specific must-have requirements and how they\'ll be evaluated.';
                    case 'decisionProcess':
                        return 'Include specific stages with dates and approval gates.';
                    case 'identifyPain':
                        return 'Describe the business impact and cost of doing nothing.';
                    case 'champion':
                        return 'Explain their influence, access to decision-makers, and what they\'re doing to help.';
                    case 'competition':
                        return 'Name specific competitors and explain status quo as an option.';
                }
            }
            
            return 'Almost there! Review the good example above for more detail.';
        }

        function previousSection() {
            if (activeSection > 0) {
                activeSection--;
                updateSection();
            }
        }

        function nextSection() {
            if (activeSection < sections.length - 1) {
                activeSection++;
                updateSection();
            }
        }

        function handleDealNameChange() {
            dealData.dealName = document.getElementById('deal-name').value;
            updateSaveButton();
            scheduleAutoSave();
        }

        function handleFieldChange() {
            // Sync all fields to dealData
            dealData.dealValue = document.getElementById('deal-value').value;
            dealData.closeDate = document.getElementById('close-date').value;
            dealData.salesRep = document.getElementById('sales-rep').value;
            dealData.forecastCategory = document.getElementById('forecast-category').value;
            
            updateSaveButton();
            scheduleAutoSave();
            checkGates();
            updateProgress();
        }

        function handleStageChange() {
            const newStage = document.getElementById('deal-stage').value;
            const oldStage = dealData.dealStage;
            
            dealData.dealStage = newStage;
            
            if (oldStage !== newStage && newStage) {
                if (!dealData.stageHistory) dealData.stageHistory = [];
                dealData.stageHistory.push({
                    stage: newStage,
                    date: new Date().toISOString(),
                    score: calculateDealScore()
                });
            }
            
            checkGates();
            updateDealAge();
            handleFieldChange();
        }

        function checkGates() {
            const stage = dealData.dealStage;
            const forecast = dealData.forecastCategory;
            const score = calculateDealScore();
            const alertDiv = document.getElementById('gate-alert');
            
            let blocked = false;
            let message = '';
            let requirements = [];
            
            // Check stage gates
            if (stage && QUALIFICATION_GATES[stage] && score < QUALIFICATION_GATES[stage].minScore) {
                blocked = true;
                message = QUALIFICATION_GATES[stage].message;
            }
            
            // Check forecast gates
            if (forecast === 'commit' && score < 75) {
                blocked = true;
                message = 'Only deals 75%+ qualified can be forecasted as Commit';
            }
            
            // Generate requirements list
            if (blocked) {
                requirements = getMissingRequirements(QUALIFICATION_GATES[stage]?.minScore || 75);
            }
            
            if (blocked) {
                alertDiv.innerHTML = `
                    <div class="gate-check">
                        <div class="gate-check-title">‚ö†Ô∏è Qualification Gate Not Met</div>
                        <p style="margin-bottom: 1rem; color: #92400e;">${message}</p>
                        <ul class="requirement-list">
                            ${requirements.map(req => `
                                <li class="${req.met ? 'requirement-met' : 'requirement-unmet'}">
                                    ${req.text}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
            } else {
                alertDiv.innerHTML = '';
            }
        }

        function getMissingRequirements(targetScore) {
            const requirements = [
                { text: 'Quantified metrics with numbers/currency', met: /\d/.test(dealData.metrics) && /[$‚Ç¨¬£]/.test(dealData.metrics) },
                { text: 'Economic Buyer identified with title', met: /(cfo|ceo|cto|cio|vp|director|head)/i.test(dealData.economicBuyer) },
                { text: 'Multiple decision criteria documented', met: dealData.decisionCriteria.split(',').length >= 2 },
                { text: 'Decision process with timeline', met: /\d+\s*(week|month|day)/i.test(dealData.decisionProcess) },
                { text: 'Business pain with impact keywords', met: /(cost|lose|risk|waste|fail)/i.test(dealData.identifyPain) },
                { text: 'Champion with influence documented', met: /(close|access|credibility|influence)/i.test(dealData.champion) },
                { text: 'Competition understood (>30 chars)', met: dealData.competition.length > 30 }
            ];
            
            return requirements;
        }

        function updateSaveButton() {
            const dealName = document.getElementById('deal-name').value;
            const dealValue = document.getElementById('deal-value').value;
            const closeDate = document.getElementById('close-date').value;
            const salesRep = document.getElementById('sales-rep').value;
            const dealStage = document.getElementById('deal-stage').value;
            
            const hasRequired = dealName && dealName.trim() && 
                               dealValue && dealValue.trim() && 
                               closeDate && 
                               salesRep && salesRep.trim() && 
                               dealStage;
            
            const saveBtn = document.getElementById('save-btn');
            saveBtn.disabled = !hasRequired;
            
            if (hasRequired) {
                saveBtn.style.opacity = '1';
                saveBtn.style.cursor = 'pointer';
            } else {
                saveBtn.style.opacity = '0.5';
                saveBtn.style.cursor = 'not-allowed';
            }
        }

        // Listen to textarea changes and input events
        document.addEventListener('DOMContentLoaded', () => {
            init();
            
            // Section textarea
            document.getElementById('section-input').addEventListener('input', (e) => {
                const section = sections[activeSection];
                dealData[section.id] = e.target.value;
                scheduleAutoSave();
                updateProgress();
                renderTabs();
                checkGates();
                updateSaveButton();
                
                // Only update quality indicators if guidance exists
                if (section.guidance) {
                    updateQualityIndicators(section);
                }
                
                document.getElementById('champion-btn').disabled = !dealData.champion || !dealData.champion.trim();
                document.getElementById('eb-btn').disabled = !dealData.economicBuyer || !dealData.economicBuyer.trim();
            });
            
            // Deal name input
            document.getElementById('deal-name').addEventListener('input', (e) => {
                handleDealNameChange();
            });
            
            // Deal value input
            document.getElementById('deal-value').addEventListener('input', (e) => {
                handleFieldChange();
            });
            
            // Close date input
            document.getElementById('close-date').addEventListener('input', (e) => {
                handleFieldChange();
            });
            
            // Sales rep input
            document.getElementById('sales-rep').addEventListener('input', (e) => {
                handleFieldChange();
            });
            
            // Deal stage select
            document.getElementById('deal-stage').addEventListener('change', (e) => {
                handleStageChange();
            });
            
            // Forecast category select
            document.getElementById('forecast-category').addEventListener('change', (e) => {
                handleFieldChange();
            });
        });

        function scheduleAutoSave() {
            if (autoSaveTimer) clearTimeout(autoSaveTimer);
            if (currentDealId && dealData.dealName) {
                autoSaveTimer = setTimeout(() => {
                    saveDeal(true);
                }, 2000);
            }
        }

        function updateDealAge() {
            const createdDateInput = document.getElementById('created-date').value;
            
            if (!createdDateInput) {
                document.getElementById('days-open').textContent = '0';
                document.getElementById('days-in-stage').textContent = '0';
                document.getElementById('stage-name-label').textContent = 'Current Stage';
                return;
            }
            
            // Calculate days open (from user-entered created date)
            const createdDate = new Date(createdDateInput);
            const now = new Date();
            const daysOpen = Math.floor((now - createdDate) / (1000 * 60 * 60 * 24));
            
            // Calculate days in current stage
            let daysInStage = daysOpen; // Default to days open if no stage history
            if (dealData.stageHistory && dealData.stageHistory.length > 0) {
                const lastStageChange = new Date(dealData.stageHistory[dealData.stageHistory.length - 1].date);
                daysInStage = Math.floor((now - lastStageChange) / (1000 * 60 * 60 * 24));
            }
            
            // Update displays
            document.getElementById('days-open').textContent = daysOpen;
            document.getElementById('days-in-stage').textContent = daysInStage;
            
            // Update stage label
            const stageName = dealData.dealStage || 'No stage';
            const stageLabel = stageName.charAt(0).toUpperCase() + stageName.slice(1);
            document.getElementById('stage-name-label').textContent = `In ${stageLabel}`;
            
            // Color code based on age
            const daysOpenElement = document.getElementById('days-open');
            const daysInStageElement = document.getElementById('days-in-stage');
            
            // Days open color coding
            if (daysOpen > 90) {
                daysOpenElement.style.color = '#f5576c'; // Red - very old
            } else if (daysOpen > 60) {
                daysOpenElement.style.color = '#ffa500'; // Orange - getting old
            } else if (daysOpen > 30) {
                daysOpenElement.style.color = '#f093fb'; // Purple - moderate
            } else {
                daysOpenElement.style.color = '#667eea'; // Blue - fresh
            }
            
            // Days in stage color coding
            if (daysInStage > 45) {
                daysInStageElement.style.color = '#f5576c'; // Red - stale
            } else if (daysInStage > 30) {
                daysInStageElement.style.color = '#ffa500'; // Orange - getting stale
            } else if (daysInStage > 14) {
                daysInStageElement.style.color = '#f093fb'; // Purple - moderate
            } else {
                daysInStageElement.style.color = '#38ef7d'; // Green - moving fast
            }
        }
        
        function handleCreatedDateChange() {
            dealData.createdDate = document.getElementById('created-date').value;
            updateDealAge();
            handleFieldChange();
        }
        
        function updateProgress() {
            const filledCount = Object.keys(dealData).filter(key => 
                sections.find(s => s.id === key) && dealData[key] && dealData[key].trim()
            ).length;
            
            document.getElementById('filled-count').textContent = filledCount;
            document.getElementById('progress-fill').style.width = `${(filledCount / 7) * 100}%`;
            
            calculateDealScore();
        }

        function calculateDealScore() {
            let score = 0;
            
            sections.forEach(section => {
                const value = dealData[section.id] || '';
                const guidance = section.guidance;
                let sectionScore = 0;
                
                switch(section.id) {
                    case 'metrics':
                        if (value) {
                            const hasNumbers = /\d/.test(value);
                            const hasCurrency = /[$‚Ç¨¬£]/.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasNumbers && hasCurrency && meetsLength) {
                                sectionScore = 20;
                            } else if (hasNumbers && hasCurrency) {
                                sectionScore = 15;
                            } else if (hasNumbers) {
                                sectionScore = 10;
                            } else {
                                sectionScore = 5;
                            }
                        }
                        break;
                        
                    case 'economicBuyer':
                        if (value) {
                            const hasTitle = /(cfo|ceo|cto|cio|vp|director|head)/i.test(value);
                            const hasAccess = /(meeting|scheduled|access|introduced)/i.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasTitle && hasAccess && meetsLength) {
                                sectionScore = 15;
                            } else if (hasTitle && meetsLength) {
                                sectionScore = 12;
                            } else if (hasTitle) {
                                sectionScore = 8;
                            } else {
                                sectionScore = 5;
                            }
                        }
                        break;
                        
                    case 'decisionCriteria':
                        if (value) {
                            const criteriaCount = value.split(/[,\n]/).filter(c => c.trim().length > 10).length;
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (criteriaCount >= 3 && meetsLength) {
                                sectionScore = 15;
                            } else if (criteriaCount >= 2 && meetsLength) {
                                sectionScore = 12;
                            } else if (criteriaCount >= 1) {
                                sectionScore = 8;
                            } else {
                                sectionScore = 5;
                            }
                        }
                        break;
                        
                    case 'decisionProcess':
                        if (value) {
                            const hasTimeline = /\d+\s*(week|month|day)/i.test(value);
                            const hasStages = /(step|stage|phase)/i.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasTimeline && hasStages && meetsLength) {
                                sectionScore = 15;
                            } else if (hasTimeline && meetsLength) {
                                sectionScore = 12;
                            } else if (hasTimeline || hasStages) {
                                sectionScore = 8;
                            } else {
                                sectionScore = 5;
                            }
                        }
                        break;
                        
                    case 'identifyPain':
                        if (value) {
                            const hasImpact = /(cost|lose|risk|waste|fail)/i.test(value);
                            const hasUrgency = /(urgent|now|deadline|must)/i.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasImpact && hasUrgency && meetsLength) {
                                sectionScore = 15;
                            } else if (hasImpact && meetsLength) {
                                sectionScore = 12;
                            } else if (hasImpact) {
                                sectionScore = 8;
                            } else {
                                sectionScore = 5;
                            }
                        }
                        break;
                        
                    case 'champion':
                        if (value) {
                            const hasInfluence = /(access|influence|credibility|reports to)/i.test(value);
                            const hasAdvocacy = /(advocate|champion|support|selling)/i.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasInfluence && hasAdvocacy && meetsLength) {
                                sectionScore = 10;
                            } else if (hasInfluence && meetsLength) {
                                sectionScore = 8;
                            } else if (meetsLength) {
                                sectionScore = 6;
                            } else {
                                sectionScore = 3;
                            }
                        }
                        break;
                        
                    case 'competition':
                        if (value) {
                            const hasCompetitors = value.length > 50;
                            const hasStatusQuo = /(status quo|current|do nothing|build)/i.test(value);
                            const meetsLength = value.length >= guidance.minLength;
                            
                            if (hasCompetitors && hasStatusQuo && meetsLength) {
                                sectionScore = 10;
                            } else if (hasCompetitors && meetsLength) {
                                sectionScore = 8;
                            } else if (meetsLength) {
                                sectionScore = 6;
                            } else {
                                sectionScore = 3;
                            }
                        }
                        break;
                }
                
                score += sectionScore;
            });
            
            const totalScore = Math.round(score);
            let status = 'High Risk';
            let color = '#f5576c';
            
            if (totalScore >= 75) {
                status = 'Well Qualified';
                color = '#38ef7d';
            } else if (totalScore >= 50) {
                status = 'Moderate Risk';
                color = '#f093fb';
            }
            
            const scoreCard = document.getElementById('score-card');
            if (totalScore > 0) {
                scoreCard.style.display = 'block';
                document.getElementById('score-value').textContent = totalScore + '%';
                document.getElementById('score-value').style.color = color;
                document.getElementById('score-status').textContent = status;
                document.getElementById('score-status').style.color = color;
            } else {
                scoreCard.style.display = 'none';
            }
            
            return totalScore;
        }

        // Storage functions
        function saveDeal(silent = false) {
            // Read all values from DOM to ensure they're current
            dealData.dealName = document.getElementById('deal-name').value.trim();
            dealData.dealValue = document.getElementById('deal-value').value.trim();
            dealData.closeDate = document.getElementById('close-date').value;
            dealData.createdDate = document.getElementById('created-date').value;
            dealData.salesRep = document.getElementById('sales-rep').value.trim();
            dealData.dealStage = document.getElementById('deal-stage').value;
            dealData.forecastCategory = document.getElementById('forecast-category').value;
            
            if (!dealData.dealName || !dealData.dealValue || !dealData.closeDate || !dealData.createdDate || !dealData.salesRep || !dealData.dealStage) {
                if (!silent) {
                    alert('Please fill in all required fields:\n- Deal Name\n- Deal Value\n- Close Date\n- Created Date\n- Sales Rep\n- Deal Stage');
                }
                return;
            }
            
            const dealId = currentDealId || `deal_${Date.now()}`;
            const score = calculateDealScore();
            
            const dealToSave = {
                ...dealData,
                id: dealId,
                lastUpdated: new Date().toISOString(),
                score: score
            };
            
            try {
                const deals = getDeals();
                const existingIndex = deals.findIndex(d => d.id === dealId);
                
                if (existingIndex >= 0) {
                    deals[existingIndex] = dealToSave;
                } else {
                    deals.push(dealToSave);
                }
                
                localStorage.setItem('meddicc_deals', JSON.stringify(deals));
                currentDealId = dealId;
                updateDealCount();
                
                if (!silent) {
                    // Visual feedback
                    const saveBtn = document.getElementById('save-btn');
                    const originalText = saveBtn.innerHTML;
                    saveBtn.innerHTML = '‚úì Saved!';
                    saveBtn.style.background = '#10b981';
                    
                    setTimeout(() => {
                        saveBtn.innerHTML = originalText;
                        saveBtn.style.background = '';
                    }, 2000);
                }
                
                return true;
            } catch (error) {
                console.error('Save error:', error);
                alert('Error saving deal. Please try again.');
                return false;
            }
        }

        function getDeals() {
            try {
                return JSON.parse(localStorage.getItem('meddicc_deals') || '[]');
            } catch {
                return [];
            }
        }

        function loadDeal(dealId) {
            const deals = getDeals();
            const deal = deals.find(d => d.id === dealId);
            
            if (deal) {
                dealData = { ...deal };
                currentDealId = dealId;
                
                document.getElementById('deal-name').value = dealData.dealName || '';
                document.getElementById('deal-value').value = dealData.dealValue || '';
                document.getElementById('close-date').value = dealData.closeDate || '';
                document.getElementById('created-date').value = dealData.createdDate || new Date().toISOString().split('T')[0];
                document.getElementById('sales-rep').value = dealData.salesRep || '';
                document.getElementById('deal-stage').value = dealData.dealStage || '';
                document.getElementById('forecast-category').value = dealData.forecastCategory || '';
                
                updateSection();
                updateProgress();
                updateDealAge();
                updateSaveButton();
                checkGates();
                closeDealListModal();
            }
        }

        function deleteDeal(dealId) {
            if (!confirm('Delete this deal?')) return;
            
            const deals = getDeals().filter(d => d.id !== dealId);
            localStorage.setItem('meddicc_deals', JSON.stringify(deals));
            
            if (currentDealId === dealId) {
                newDeal();
            }
            
            updateDealCount();
            if (currentMode === 'rep') {
                showDealListModal();
            } else if (currentMode === 'manager') {
                loadManagerDashboard();
            }
        }

        function newDeal() {
            resetDealData();
            currentDealId = null;
            activeSection = 0;
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('deal-name').value = '';
            document.getElementById('deal-value').value = '';
            document.getElementById('close-date').value = '';
            document.getElementById('created-date').value = today;
            document.getElementById('sales-rep').value = '';
            document.getElementById('deal-stage').value = '';
            document.getElementById('forecast-category').value = '';
            document.getElementById('gate-alert').innerHTML = '';
            
            document.getElementById('champion-btn').disabled = true;
            document.getElementById('eb-btn').disabled = true;
            
            updateSection();
            updateProgress();
            updateDealAge();
            updateSaveButton();
            
            document.getElementById('insights-container').innerHTML = `
                <div style="padding: 3rem; text-align: center; color: rgba(255,255,255,0.6);">
                    <p style="font-size: 3rem; margin-bottom: 1rem;">üí°</p>
                    <p style="margin-bottom: 1rem; color: rgba(255,255,255,0.8);">Fill in your MEDDICC components to receive:</p>
                    <ul style="text-align: left; display: inline-block; list-style: none; padding: 0; color: rgba(255,255,255,0.7);">
                        <li>‚úì Real-time qualification feedback</li>
                        <li>‚úì Critical questions to ask</li>
                        <li>‚úì Deal risk identification</li>
                        <li>‚úì Mandatory gate validation</li>
                    </ul>
                </div>
            `;
        }

        function updateDealCount() {
            const deals = getDeals();
            document.getElementById('deal-count').textContent = deals.length;
        }

        function showDealListModal() {
            const deals = getDeals().sort((a, b) => new Date(b.lastUpdated) - new Date(a.lastUpdated));
            const dealList = document.getElementById('deal-list');
            
            if (deals.length === 0) {
                dealList.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.6); padding: 2rem;">No saved deals yet</p>';
            } else {
                dealList.innerHTML = deals.map(deal => {
                    const scoreClass = deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low';
                    return `
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;" 
                             onclick="loadDeal('${deal.id}')"
                             onmouseenter="this.style.borderColor='#667eea'; this.style.boxShadow='0 8px 24px rgba(102, 126, 234, 0.3)'"
                             onmouseleave="this.style.borderColor='rgba(255,255,255,0.12)'; this.style.boxShadow='none'">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">${deal.dealName}</div>
                                    <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7);">
                                        ${deal.salesRep} ‚Ä¢ ${deal.dealStage || 'No stage'} ‚Ä¢ ¬£${deal.dealValue || '0'}
                                    </div>
                                    <div style="margin-top: 0.5rem;">
                                        <span class="score-badge ${scoreClass}">${deal.score}%</span>
                                    </div>
                                </div>
                                <button class="btn btn-danger" onclick="event.stopPropagation(); deleteDeal('${deal.id}')" style="padding: 0.5rem;">√ó</button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('deal-list-modal').classList.add('show');
        }

        function closeDealListModal() {
            document.getElementById('deal-list-modal').classList.remove('show');
        }

        // Manager Dashboard
        function loadManagerDashboard() {
            const deals = getDeals();
            const activeDeals = deals.filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            // Calculate stats
            const totalValue = activeDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
            const avgScore = activeDeals.length > 0 
                ? Math.round(activeDeals.reduce((sum, d) => sum + d.score, 0) / activeDeals.length)
                : 0;
            const atRisk = activeDeals.filter(d => calculateDealRisks(d).length > 0).length;
            
            document.getElementById('team-pipeline-value').textContent = `¬£${totalValue.toLocaleString()}`;
            document.getElementById('team-avg-score').textContent = `${avgScore}%`;
            document.getElementById('team-deal-count').textContent = activeDeals.length;
            document.getElementById('team-at-risk').textContent = atRisk;
            
            // Render charts
            renderStageChart(activeDeals);
            renderComponentChart(activeDeals);
            
            // Render rep cards
            renderRepCards(activeDeals);
            
            // Render deals table
            renderManagerDealsTable(activeDeals);
            
            // Populate filters
            populateManagerFilters(deals);
            
            // Update at-risk deals analysis
            updateRiskDeals();
        }
        
        function calculateDealRisks(deal) {
            const risks = [];
            const now = new Date();
            const closeDate = deal.closeDate ? new Date(deal.closeDate) : null;
            const daysToClose = closeDate ? Math.ceil((closeDate - now) / (1000 * 60 * 60 * 24)) : 999;
            const daysInStage = calculateDaysInStage(deal);
            
            // Low qualification score
            if (deal.score < 50) {
                risks.push({
                    type: 'low-score',
                    severity: 'critical',
                    icon: '‚ùå',
                    label: 'Low Qualification Score',
                    detail: `${deal.score}% - Below acceptable threshold`,
                    action: 'Immediate qualification work required'
                });
            }
            
            // Stale deal
            if (daysInStage > 45) {
                risks.push({
                    type: 'stale',
                    severity: 'high',
                    icon: 'üïí',
                    label: 'Stale Deal',
                    detail: `${daysInStage} days in ${deal.dealStage} stage`,
                    action: 'Create urgency or disqualify'
                });
            }
            
            // Closing soon but weak
            if (daysToClose < 30 && daysToClose > 0 && deal.score < 65) {
                risks.push({
                    type: 'close-date',
                    severity: 'critical',
                    icon: 'üìÖ',
                    label: 'Closing Soon & Poorly Qualified',
                    detail: `${daysToClose} days to close with ${deal.score}% qualification`,
                    action: 'Push close date or accelerate qualification'
                });
            }
            
            // Advanced stage but weak qualification
            if ((deal.dealStage === 'proposal' || deal.dealStage === 'negotiation') && deal.score < 70) {
                risks.push({
                    type: 'advanced-weak',
                    severity: 'critical',
                    icon: 'üö®',
                    label: 'Advanced Stage, Weak Qualification',
                    detail: `In ${deal.dealStage} with only ${deal.score}% qualification`,
                    action: 'Should not be in this stage - back to qualification'
                });
            }
            
            // Missing key components
            const missingComponents = [];
            if (!deal.economicBuyer || deal.economicBuyer.length < 50) missingComponents.push('Economic Buyer');
            if (!deal.champion || deal.champion.length < 50) missingComponents.push('Champion');
            if (!deal.decisionProcess || deal.decisionProcess.length < 50) missingComponents.push('Decision Process');
            
            if (missingComponents.length > 0) {
                risks.push({
                    type: 'missing-key',
                    severity: 'high',
                    icon: 'üîë',
                    label: 'Missing Key MEDDICC Components',
                    detail: `Missing: ${missingComponents.join(', ')}`,
                    action: 'Cannot forecast without these components'
                });
            }
            
            return risks;
        }
        
        function updateRiskDeals() {
            const deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            const filterType = document.getElementById('risk-filter').value;
            
            let atRiskDeals = [];
            const riskCounts = {
                'low-score': 0,
                'stale': 0,
                'close-date': 0,
                'advanced-weak': 0,
                'missing-key': 0
            };
            
            // Calculate all at-risk deals and counts
            deals.forEach(deal => {
                const risks = calculateDealRisks(deal);
                
                if (risks.length > 0) {
                    // Count by type
                    risks.forEach(risk => {
                        if (riskCounts.hasOwnProperty(risk.type)) {
                            riskCounts[risk.type]++;
                        }
                    });
                    
                    // Filter by selected type
                    if (filterType === 'all') {
                        atRiskDeals.push({ deal, risks });
                    } else {
                        const matchingRisks = risks.filter(r => r.type === filterType);
                        if (matchingRisks.length > 0) {
                            atRiskDeals.push({ deal, risks: matchingRisks });
                        }
                    }
                }
            });
            
            // Update counts
            document.getElementById('risk-low-score-count').textContent = riskCounts['low-score'];
            document.getElementById('risk-stale-count').textContent = riskCounts['stale'];
            document.getElementById('risk-close-count').textContent = riskCounts['close-date'];
            document.getElementById('risk-advanced-count').textContent = riskCounts['advanced-weak'];
            document.getElementById('risk-missing-count').textContent = riskCounts['missing-key'];
            
            // Display deals
            const container = document.getElementById('risk-deals-container');
            
            if (atRiskDeals.length === 0) {
                container.innerHTML = `
                    <div style="padding: 3rem; text-align: center; color: rgba(255,255,255,0.6);">
                        <p style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</p>
                        <p style="font-size: 1.2rem; color: #38ef7d; margin-bottom: 0.5rem;">No Deals At Risk!</p>
                        <p>All deals are properly qualified and progressing well.</p>
                    </div>
                `;
                return;
            }
            
            // Sort by severity and number of risks
            atRiskDeals.sort((a, b) => {
                const aSeverity = a.risks.filter(r => r.severity === 'critical').length;
                const bSeverity = b.risks.filter(r => r.severity === 'critical').length;
                if (aSeverity !== bSeverity) return bSeverity - aSeverity;
                return b.risks.length - a.risks.length;
            });
            
            container.innerHTML = atRiskDeals.map(({ deal, risks }) => {
                const scoreClass = deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low';
                const daysInStage = calculateDaysInStage(deal);
                const closeDate = deal.closeDate ? new Date(deal.closeDate) : null;
                const daysToClose = closeDate ? Math.ceil((closeDate - new Date()) / (1000 * 60 * 60 * 24)) : null;
                
                return `
                    <div style="background: rgba(10,22,40,0.95); border: 1px solid rgba(255,255,255,0.12); border-left: 4px solid ${risks[0].severity === 'critical' ? '#eb3349' : '#f5576c'}; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <h3 style="color: #ffffff; margin-bottom: 0.5rem;">${deal.dealName}</h3>
                                <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: rgba(255,255,255,0.7); flex-wrap: wrap;">
                                    <span><strong>Rep:</strong> ${deal.salesRep}</span>
                                    <span><strong>Value:</strong> ¬£${parseFloat(deal.dealValue || 0).toLocaleString()}</span>
                                    <span><strong>Stage:</strong> ${deal.dealStage}</span>
                                    <span><strong>Score:</strong> <span class="score-badge ${scoreClass}">${deal.score}%</span></span>
                                    ${daysToClose !== null && daysToClose > 0 ? `<span><strong>Days to Close:</strong> ${daysToClose}</span>` : ''}
                                    <span><strong>Days in Stage:</strong> ${daysInStage}</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="loadDeal('${deal.id}'); switchMode('rep')" style="padding: 0.5rem 1rem;">Review Deal</button>
                        </div>
                        
                        <div style="background: rgba(235,51,73,0.1); border-radius: 8px; padding: 1rem;">
                            <h4 style="color: #f5576c; margin-bottom: 0.75rem; font-size: 0.9rem;">‚ö†Ô∏è Risk Factors (${risks.length}):</h4>
                            ${risks.map(risk => `
                                <div style="padding: 0.75rem; background: rgba(10,22,40,0.9); border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                                        <span style="font-size: 1.5rem;">${risk.icon}</span>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; color: ${risk.severity === 'critical' ? '#eb3349' : '#f5576c'}; margin-bottom: 0.25rem;">
                                                ${risk.label}
                                            </div>
                                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.8); margin-bottom: 0.5rem;">
                                                ${risk.detail}
                                            </div>
                                            <div style="font-size: 0.875rem; color: #667eea; font-style: italic;">
                                                ‚Üí ${risk.action}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function exportRiskReport() {
            const deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            const atRiskDeals = [];
            
            deals.forEach(deal => {
                const risks = calculateDealRisks(deal);
                if (risks.length > 0) {
                    atRiskDeals.push({ deal, risks });
                }
            });
            
            if (atRiskDeals.length === 0) {
                alert('No at-risk deals to export');
                return;
            }
            
            const headers = [
                'Deal Name',
                'Sales Rep',
                'Deal Value (¬£)',
                'Stage',
                'Score (%)',
                'Close Date',
                'Days in Stage',
                'Risk Count',
                'Risk Types',
                'Primary Risk',
                'Action Required'
            ];
            
            const csv = [
                headers.join(','),
                ...atRiskDeals.map(({ deal, risks }) => {
                    const daysInStage = calculateDaysInStage(deal);
                    const riskTypes = risks.map(r => r.label).join('; ');
                    const primaryRisk = risks[0].label;
                    const action = risks[0].action;
                    
                    return [
                        `"${deal.dealName}"`,
                        `"${deal.salesRep}"`,
                        deal.dealValue || 0,
                        deal.dealStage,
                        deal.score,
                        deal.closeDate || 'Not set',
                        daysInStage,
                        risks.length,
                        `"${riskTypes}"`,
                        `"${primaryRisk}"`,
                        `"${action}"`
                    ].join(',');
                })
            ].join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `at-risk-deals-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function renderStageChart(deals) {
            const stages = ['discovery', 'qualification', 'proposal', 'negotiation'];
            const chartData = stages.map(stage => ({
                stage: stage,
                count: deals.filter(d => d.dealStage === stage).length,
                value: deals.filter(d => d.dealStage === stage).reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0)
            }));
            
            console.log('Stage Chart Data:', chartData);
            
            const maxValue = Math.max(...chartData.map(d => d.value), 1);
            
            // Format value for display
            const formatValue = (value) => {
                if (value === 0) return '¬£0';
                if (value >= 1000000) return `¬£${(value / 1000000).toFixed(1)}M`;
                if (value >= 1000) return `¬£${(value / 1000).toFixed(0)}K`;
                return `¬£${value.toLocaleString()}`;
            };
            
            const html = chartData.map(data => {
                const heightPercent = (data.value / maxValue) * 100;
                const isShortBar = heightPercent < 15; // If bar is less than 15% height, position value above
                const formattedValue = formatValue(data.value);
                
                console.log(`${data.stage}: height=${heightPercent}%, value=${formattedValue}, isShort=${isShortBar}`);
                
                return `
                <div class="chart-bar" style="height: ${heightPercent}%;" title="${data.stage}: ¬£${data.value.toLocaleString()} (${data.count} deals)">
                    <div class="chart-value ${isShortBar ? 'chart-value-above' : ''}">${formattedValue}</div>
                    <div class="chart-label">
                        <strong>${data.stage.charAt(0).toUpperCase() + data.stage.slice(1)}</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.9;">${data.count} deal${data.count !== 1 ? 's' : ''}</span>
                    </div>
                </div>
            `;
            }).join('');
            
            document.getElementById('stage-chart').innerHTML = html;
            console.log('Stage chart rendered');
        }

        function renderComponentChart(deals) {
            const components = ['metrics', 'economicBuyer', 'decisionCriteria', 'decisionProcess', 'identifyPain', 'champion', 'competition'];
            const chartData = components.map(comp => ({
                name: comp,
                completion: deals.length > 0 
                    ? (deals.filter(d => d[comp] && d[comp].trim()).length / deals.length) * 100
                    : 0
            }));
            
            document.getElementById('component-chart').innerHTML = chartData.map(data => `
                <div class="chart-bar" style="height: ${data.completion}%;" 
                     title="${data.name}: ${Math.round(data.completion)}% completion">
                    <div class="chart-label">${sections.find(s => s.id === data.name).label}</div>
                </div>
            `).join('');
        }

        function renderRepCards(deals) {
            const reps = [...new Set(deals.map(d => d.salesRep))].filter(r => r);
            
            const repCards = reps.map(rep => {
                const repDeals = deals.filter(d => d.salesRep === rep);
                const avgScore = Math.round(repDeals.reduce((sum, d) => sum + d.score, 0) / repDeals.length);
                const totalValue = repDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                const scoreClass = avgScore >= 75 ? 'score-high' : avgScore >= 50 ? 'score-medium' : 'score-low';
                
                return `
                    <div class="rep-card">
                        <div class="rep-name">${rep}</div>
                        <div class="rep-stats">
                            <div>Deals: ${repDeals.length}</div>
                            <div>Value: ¬£${totalValue.toLocaleString()}</div>
                            <div>Avg Score:</div>
                            <div><span class="score-badge ${scoreClass}">${avgScore}%</span></div>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('rep-cards').innerHTML = repCards || '<p style="text-align: center; color: rgba(255,255,255,0.6);">No rep data available</p>';
        }

        function renderManagerDealsTable(deals) {
            const tbody = document.getElementById('manager-deals-body');
            
            if (deals.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: rgba(255,255,255,0.6); padding: 2rem;">No active deals</td></tr>';
                return;
            }
            
            tbody.innerHTML = deals
                .sort((a, b) => a.score - b.score)
                .map(deal => {
                    const scoreClass = deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low';
                    const stageClass = `stage-${deal.dealStage}`;
                    const daysInStage = calculateDaysInStage(deal);
                    
                    return `
                        <tr>
                            <td><strong>${deal.dealName}</strong></td>
                            <td>${deal.salesRep}</td>
                            <td>¬£${parseFloat(deal.dealValue || 0).toLocaleString()}</td>
                            <td><span class="stage-badge ${stageClass}">${deal.dealStage}</span></td>
                            <td><span class="score-badge ${scoreClass}">${deal.score}%</span></td>
                            <td>${deal.closeDate ? new Date(deal.closeDate).toLocaleDateString() : 'Not set'}</td>
                            <td>${daysInStage} days</td>
                            <td>
                                <button class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;" 
                                        onclick="loadDeal('${deal.id}'); switchMode('rep')">Review</button>
                            </td>
                        </tr>
                    `;
                }).join('');
        }

        function calculateDaysInStage(deal) {
            if (!deal.stageHistory || deal.stageHistory.length === 0) {
                return Math.floor((new Date() - new Date(deal.createdDate)) / (1000 * 60 * 60 * 24));
            }
            
            const lastChange = deal.stageHistory[deal.stageHistory.length - 1];
            return Math.floor((new Date() - new Date(lastChange.date)) / (1000 * 60 * 60 * 24));
        }

        function populateManagerFilters(deals) {
            const reps = [...new Set(deals.map(d => d.salesRep))].filter(r => r);
            
            const repFilter = document.getElementById('filter-rep');
            repFilter.innerHTML = '<option value="">All Reps</option>' + 
                reps.map(rep => `<option value="${rep}">${rep}</option>`).join('');
        }

        function filterManagerDeals() {
            const rep = document.getElementById('filter-rep').value;
            const stage = document.getElementById('filter-stage').value;
            const risk = document.getElementById('filter-risk').value;
            
            let deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            if (rep) deals = deals.filter(d => d.salesRep === rep);
            if (stage) deals = deals.filter(d => d.dealStage === stage);
            if (risk) {
                if (risk === 'high') deals = deals.filter(d => d.score < 50);
                else if (risk === 'medium') deals = deals.filter(d => d.score >= 50 && d.score < 75);
                else if (risk === 'low') deals = deals.filter(d => d.score >= 75);
            }
            
            renderManagerDealsTable(deals);
        }

        // Review Mode
        let currentReviewView = 'executive'; // 'executive' or 'deals'
        
        function loadReviewMode() {
            const deals = getDeals();
            const reps = [...new Set(deals.map(d => d.salesRep))].filter(r => r);
            
            console.log('loadReviewMode called - Deals:', deals.length, 'Reps:', reps);
            
            const repSelect = document.getElementById('review-rep');
            if (!repSelect) {
                console.error('review-rep dropdown not found!');
                return;
            }
            
            repSelect.innerHTML = '<option value="">All Reps</option>' + 
                reps.map(rep => `<option value="${rep}">${rep}</option>`).join('');
            
            console.log('Dropdown populated with', reps.length, 'reps');
            
            // Load the default view
            switchReviewView(currentReviewView);
        }
        
        function switchReviewView(view) {
            currentReviewView = view;
            
            // Update button states
            const executiveBtn = document.getElementById('executive-view-btn');
            const dealsBtn = document.getElementById('deals-view-btn');
            
            if (executiveBtn && dealsBtn) {
                if (view === 'executive') {
                    executiveBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    executiveBtn.style.color = '#ffffff';
                    dealsBtn.style.background = 'rgba(255,255,255,0.05)';
                    dealsBtn.style.color = 'rgba(255,255,255,0.7)';
                } else {
                    dealsBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    dealsBtn.style.color = '#ffffff';
                    executiveBtn.style.background = 'rgba(255,255,255,0.05)';
                    executiveBtn.style.color = 'rgba(255,255,255,0.7)';
                }
            }
            
            // Show/hide views
            const executiveView = document.getElementById('executive-dashboard-view');
            const dealsView = document.getElementById('deal-by-deal-view');
            
            if (view === 'executive') {
                executiveView.classList.remove('hidden');
                dealsView.classList.add('hidden');
                loadExecutiveDashboard();
            } else {
                executiveView.classList.add('hidden');
                dealsView.classList.remove('hidden');
                loadReviewDeals();
            }
        }
        
        function loadExecutiveDashboard() {
            const rep = document.getElementById('review-rep').value;
            const stage = document.getElementById('review-stage-filter').value;
            const scoreFilter = document.getElementById('review-score-filter').value;
            
            let deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            // Apply filters
            if (rep) deals = deals.filter(d => d.salesRep === rep);
            if (stage) deals = deals.filter(d => d.dealStage === stage);
            if (scoreFilter) {
                if (scoreFilter === 'critical') deals = deals.filter(d => d.score < 30);
                else if (scoreFilter === 'weak') deals = deals.filter(d => d.score >= 30 && d.score < 50);
                else if (scoreFilter === 'moderate') deals = deals.filter(d => d.score >= 50 && d.score < 70);
                else if (scoreFilter === 'good') deals = deals.filter(d => d.score >= 70 && d.score < 85);
                else if (scoreFilter === 'excellent') deals = deals.filter(d => d.score >= 85);
            }
            
            // Calculate metrics
            const totalValue = deals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
            const avgScore = deals.length > 0 ? Math.round(deals.reduce((sum, d) => sum + d.score, 0) / deals.length) : 0;
            const criticalCount = deals.filter(d => d.score < 30).length;
            const weakCount = deals.filter(d => d.score >= 30 && d.score < 50).length;
            const atRiskCount = criticalCount + weakCount;
            
            // Forecast calculation (simplified)
            const targetRevenue = 1500000; // ¬£1.5M target
            const forecastGap = targetRevenue - totalValue;
            const gapPercentage = Math.round((forecastGap / targetRevenue) * 100);
            
            const dashboard = document.getElementById('executive-dashboard-view');
            dashboard.innerHTML = `
                ${buildSummaryCards(deals, totalValue, avgScore, atRiskCount, forecastGap, gapPercentage)}
                ${buildHeatMap(deals)}
                ${buildKeyInsights(deals)}
                ${buildRepPerformance(deals)}
                ${buildTopDeals(deals)}
            `;
        }
        
        function buildSummaryCards(deals, totalValue, avgScore, atRiskCount, forecastGap, gapPercentage) {
            const scoreColor = avgScore >= 70 ? '#28a745' : avgScore >= 50 ? '#fb8500' : '#eb3349';
            const scoreEmoji = avgScore >= 70 ? 'üü¢' : avgScore >= 50 ? 'üü°' : 'üî¥';
            const gapClass = Math.abs(forecastGap) < 100000 ? 'good' : Math.abs(forecastGap) < 300000 ? 'warning' : 'critical';
            
            return `
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Executive Summary</h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                        <div style="background: linear-gradient(135deg, rgba(102,126,234,0.2) 0%, rgba(118,75,162,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(102,126,234,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #ffffff; margin-bottom: 0.5rem;">¬£${(totalValue / 1000).toFixed(0)}K</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Total Pipeline</div>
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">${deals.length} active deal${deals.length !== 1 ? 's' : ''}</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(102,126,234,0.2) 0%, rgba(118,75,162,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(102,126,234,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: ${scoreColor}; margin-bottom: 0.5rem;">${avgScore}% ${scoreEmoji}</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Avg Health Score</div>
                            <div style="font-size: 0.8rem; color: ${scoreColor};">${avgScore >= 70 ? 'Strong' : avgScore >= 50 ? 'Medium' : 'Weak'} qualification</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(235,51,73,0.2) 0%, rgba(195,31,53,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(235,51,73,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: #eb3349; margin-bottom: 0.5rem;">${atRiskCount}</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">At Critical Risk</div>
                            <div style="font-size: 0.8rem; color: #eb3349;">${atRiskCount > 0 ? 'üö® Needs urgent action' : '‚úÖ No critical risks'}</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(251,133,0,0.2) 0%, rgba(221,113,0,0.2) 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(251,133,0,0.3);">
                            <div style="font-size: 2rem; font-weight: bold; color: ${forecastGap > 0 ? '#fb8500' : '#28a745'}; margin-bottom: 0.5rem;">${forecastGap > 0 ? '-' : '+'}¬£${Math.abs(forecastGap / 1000).toFixed(0)}K</div>
                            <div style="font-size: 0.875rem; color: rgba(255,255,255,0.7); margin-bottom: 0.25rem;">Forecast Gap</div>
                            <div style="font-size: 0.8rem; color: ${forecastGap > 0 ? '#fb8500' : '#28a745'};">${forecastGap > 0 ? '‚ö†Ô∏è ' + Math.abs(gapPercentage) + '% short' : '‚úÖ ' + Math.abs(gapPercentage) + '% over'}</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function buildHeatMap(deals) {
            const stages = ['discovery', 'qualification', 'proposal', 'negotiation'];
            const healthLevels = [
                { name: 'Strong', min: 70, color: '#28a745' },
                { name: 'Moderate', min: 50, max: 69, color: '#fb8500' },
                { name: 'Weak', min: 30, max: 49, color: '#eb3349' },
                { name: 'Critical', max: 29, color: '#8b0000' }
            ];
            
            // Build matrix data
            const matrix = {};
            healthLevels.forEach(level => {
                matrix[level.name] = {};
                stages.forEach(stage => {
                    const stageDeals = deals.filter(d => {
                        const inStage = d.dealStage === stage;
                        const inHealth = level.max !== undefined ? 
                            (d.score >= (level.min || 0) && d.score <= level.max) :
                            (d.score >= level.min);
                        return inStage && inHealth;
                    });
                    const value = stageDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                    matrix[level.name][stage] = {
                        count: stageDeals.length,
                        value: value
                    };
                });
            });
            
            // Find max value for scaling
            let maxValue = 1;
            Object.values(matrix).forEach(levels => {
                Object.values(levels).forEach(cell => {
                    if (cell.value > maxValue) maxValue = cell.value;
                });
            });
            
            return `
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Pipeline Health Heat Map</h2>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: separate; border-spacing: 0.5rem;">
                            <thead>
                                <tr>
                                    <th style="text-align: left; padding: 0.75rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;"></th>
                                    ${stages.map(stage => `
                                        <th style="text-align: center; padding: 0.75rem; color: rgba(255,255,255,0.8); font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                                            ${stage}
                                        </th>
                                    `).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${healthLevels.map(level => `
                                    <tr>
                                        <td style="padding: 0.75rem; color: ${level.color}; font-weight: 600; font-size: 0.875rem;">${level.name}</td>
                                        ${stages.map(stage => {
                                            const cell = matrix[level.name][stage];
                                            const intensity = cell.value > 0 ? (cell.value / maxValue) : 0;
                                            const bgOpacity = 0.1 + (intensity * 0.4);
                                            return `
                                                <td style="text-align: center; padding: 1rem; background: rgba(${level.name === 'Strong' ? '40,167,69' : level.name === 'Moderate' ? '251,133,0' : level.name === 'Weak' ? '235,51,73' : '139,0,0'}, ${bgOpacity}); border-radius: 8px; border: 1px solid rgba(${level.name === 'Strong' ? '40,167,69' : level.name === 'Moderate' ? '251,133,0' : level.name === 'Weak' ? '235,51,73' : '139,0,0'}, 0.3);">
                                                    ${cell.count > 0 ? `
                                                        <div style="font-size: 1.25rem; font-weight: bold; color: #ffffff; margin-bottom: 0.25rem;">¬£${(cell.value / 1000).toFixed(0)}K</div>
                                                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7);">${cell.count} deal${cell.count !== 1 ? 's' : ''}</div>
                                                    ` : `
                                                        <div style="color: rgba(255,255,255,0.3); font-size: 0.875rem;">‚Äî</div>
                                                    `}
                                                </td>
                                            `;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function buildKeyInsights(deals) {
            const insights = [];
            
            // Critical deals analysis
            const criticalDeals = deals.filter(d => d.score < 30);
            if (criticalDeals.length > 0) {
                const criticalValue = criticalDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                const repGroups = {};
                criticalDeals.forEach(d => {
                    if (!repGroups[d.salesRep]) repGroups[d.salesRep] = [];
                    repGroups[d.salesRep].push(d);
                });
                const worstRep = Object.entries(repGroups).sort((a, b) => b[1].length - a[1].length)[0];
                
                insights.push({
                    type: 'critical',
                    icon: 'üö®',
                    title: 'CRITICAL',
                    text: `${criticalDeals.length} deal${criticalDeals.length !== 1 ? 's' : ''} (¬£${(criticalValue/1000).toFixed(0)}K) with score <30% - ${worstRep ? `${worstRep[1].length} owned by ${worstRep[0]}` : 'across team'}. Risk: 77% loss rate without immediate intervention.`,
                    action: worstRep ? `Emergency coaching session with ${worstRep[0]} this week` : 'Review all critical deals this week'
                });
            }
            
            // Stuck deals analysis
            const stuckDeals = deals.filter(d => calculateDaysInStage(d) > 45);
            if (stuckDeals.length > 0) {
                const stuckValue = stuckDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                const stuckInDiscovery = stuckDeals.filter(d => d.dealStage === 'discovery' && calculateDaysInStage(d) > 30);
                
                insights.push({
                    type: 'warning',
                    icon: '‚ö†Ô∏è',
                    title: 'CONCERN',
                    text: `${stuckDeals.length} deal${stuckDeals.length !== 1 ? 's' : ''} (¬£${(stuckValue/1000).toFixed(0)}K) stuck >45 days in stage${stuckInDiscovery.length > 0 ? `, including ${stuckInDiscovery.length} in discovery >30 days` : ''}. Historical data shows 73% of these deals slip or are lost.`,
                    action: stuckInDiscovery.length > 0 ? `Qualify or disqualify ${stuckInDiscovery.length} discovery deal${stuckInDiscovery.length !== 1 ? 's' : ''} by end of week` : 'Review velocity blockers and create urgency'
                });
            }
            
            // EB access analysis
            const noEBDeals = deals.filter(d => !d.economicBuyer || d.economicBuyer.trim().length < 50);
            if (noEBDeals.length > 0) {
                const noEBValue = noEBDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                insights.push({
                    type: 'warning',
                    icon: '‚ö†Ô∏è',
                    title: 'ACCESS ISSUE',
                    text: `${noEBDeals.length} deal${noEBDeals.length !== 1 ? 's' : ''} (¬£${(noEBValue/1000).toFixed(0)}K) with no Economic Buyer identified. Only 23% of deals without EB access close successfully.`,
                    action: 'Make EB access the #1 priority for these deals - 94% of won deals had EB by qualification stage'
                });
            }
            
            // Strong deals analysis
            const strongDeals = deals.filter(d => d.score >= 85);
            if (strongDeals.length > 0) {
                const strongValue = strongDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                const strongReps = [...new Set(strongDeals.map(d => d.salesRep))];
                
                insights.push({
                    type: 'success',
                    icon: '‚úÖ',
                    title: 'STRENGTH',
                    text: `${strongDeals.length} deal${strongDeals.length !== 1 ? 's' : ''} (¬£${(strongValue/1000).toFixed(0)}K) at 85%+ qualification${strongReps.length === 1 ? ` - all owned by ${strongReps[0]}` : ` across ${strongReps.length} rep${strongReps.length !== 1 ? 's' : ''}`}. These deals have strong EB relationships, champions, and quantified value.`,
                    action: strongReps.length === 1 ? `Have ${strongReps[0]} share best practices with team` : 'Focus on accelerating these deals to close'
                });
            }
            
            if (insights.length === 0) {
                insights.push({
                    type: 'info',
                    icon: 'üìä',
                    title: 'ANALYSIS',
                    text: 'Pipeline health is balanced with no critical issues detected.',
                    action: 'Continue standard qualification and coaching processes'
                });
            }
            
            return `
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Key Insights</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        ${insights.map(insight => `
                            <div style="background: ${insight.type === 'critical' ? 'rgba(235,51,73,0.1)' : insight.type === 'warning' ? 'rgba(251,133,0,0.1)' : insight.type === 'success' ? 'rgba(40,167,69,0.1)' : 'rgba(102,126,234,0.1)'}; border: 1px solid ${insight.type === 'critical' ? 'rgba(235,51,73,0.3)' : insight.type === 'warning' ? 'rgba(251,133,0,0.3)' : insight.type === 'success' ? 'rgba(40,167,69,0.3)' : 'rgba(102,126,234,0.3)'}; border-radius: 8px; padding: 1.25rem;">
                                <div style="display: flex; gap: 1rem;">
                                    <div style="font-size: 2rem; line-height: 1;">${insight.icon}</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: ${insight.type === 'critical' ? '#eb3349' : insight.type === 'warning' ? '#fb8500' : insight.type === 'success' ? '#28a745' : '#667eea'}; margin-bottom: 0.5rem; font-size: 0.875rem;">
                                            ${insight.title}
                                        </div>
                                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 0.75rem; line-height: 1.5; font-size: 0.9rem;">
                                            ${insight.text}
                                        </div>
                                        <div style="display: flex; align-items: start; gap: 0.5rem; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 6px;">
                                            <div style="color: ${insight.type === 'critical' ? '#eb3349' : insight.type === 'warning' ? '#fb8500' : insight.type === 'success' ? '#28a745' : '#667eea'}; font-weight: 600; font-size: 0.85rem;">‚Üí</div>
                                            <div style="color: rgba(255,255,255,0.85); font-size: 0.85rem; line-height: 1.4;">
                                                ${insight.action}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        
        function buildRepPerformance(deals) {
            const reps = [...new Set(deals.map(d => d.salesRep))].filter(r => r);
            
            const repData = reps.map(rep => {
                const repDeals = deals.filter(d => d.salesRep === rep);
                const pipeline = repDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                const avgScore = repDeals.length > 0 ? Math.round(repDeals.reduce((sum, d) => sum + d.score, 0) / repDeals.length) : 0;
                const atRisk = repDeals.filter(d => d.score < 50).length;
                const health = avgScore >= 70 ? 'Excellent' : avgScore >= 50 ? 'Moderate' : 'Critical';
                const healthColor = avgScore >= 70 ? '#28a745' : avgScore >= 50 ? '#fb8500' : '#eb3349';
                const healthEmoji = avgScore >= 70 ? 'üü¢' : avgScore >= 50 ? 'üü°' : 'üî¥';
                
                return { rep, pipeline, avgScore, atRisk, health, healthColor, healthEmoji, dealCount: repDeals.length };
            }).sort((a, b) => b.avgScore - a.avgScore);
            
            return `
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Rep Performance Snapshot</h2>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid rgba(255,255,255,0.1);">
                                    <th style="text-align: left; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Rep</th>
                                    <th style="text-align: right; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Pipeline</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Avg Score</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">At Risk</th>
                                    <th style="text-align: center; padding: 1rem; color: rgba(255,255,255,0.7); font-weight: 600; font-size: 0.875rem;">Health</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${repData.map(data => `
                                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                        <td style="padding: 1rem; color: #ffffff; font-weight: 500;">
                                            ${data.rep}
                                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-top: 0.25rem;">${data.dealCount} deal${data.dealCount !== 1 ? 's' : ''}</div>
                                        </td>
                                        <td style="padding: 1rem; text-align: right; color: #ffffff; font-weight: 500;">
                                            ¬£${(data.pipeline / 1000).toFixed(0)}K
                                        </td>
                                        <td style="padding: 1rem; text-align: center;">
                                            <span style="display: inline-block; padding: 0.375rem 0.75rem; background: ${data.healthColor}22; color: ${data.healthColor}; border-radius: 6px; font-weight: 600; font-size: 0.875rem;">
                                                ${data.avgScore}% ${data.healthEmoji}
                                            </span>
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: ${data.atRisk > 0 ? '#eb3349' : 'rgba(255,255,255,0.5)'}; font-weight: 600;">
                                            ${data.atRisk > 0 ? data.atRisk + ' deal' + (data.atRisk !== 1 ? 's' : '') : '‚Äî'}
                                        </td>
                                        <td style="padding: 1rem; text-align: center; color: ${data.healthColor}; font-weight: 600;">
                                            ${data.health}${data.atRisk === data.dealCount && data.dealCount > 0 ? ' ‚ö†Ô∏è' : ''}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function buildTopDeals(deals) {
            // Get top 5 deals requiring attention (sorted by score, lowest first)
            const topDeals = deals
                .sort((a, b) => a.score - b.score)
                .slice(0, 5);
            
            return `
                <div class="card">
                    <h2 style="margin-bottom: 1.5rem; color: #ffffff;">Top 5 Deals Requiring Attention</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        ${topDeals.length === 0 ? `
                            <div style="padding: 2rem; text-align: center; color: rgba(255,255,255,0.6);">
                                No deals match current filters
                            </div>
                        ` : topDeals.map((deal, index) => {
                            const { redFlags } = analyzeDealFlags(deal);
                            const actions = generateNextBestActions(deal);
                            const scoreClass = deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low';
                            const topAction = actions[0];
                            const criticalFlags = redFlags.filter(f => f.severity === 'critical');
                            
                            return `
                                <div style="background: rgba(10,22,40,0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.25rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #ffffff; font-size: 1rem; margin-bottom: 0.5rem;">
                                                ${index + 1}. ${deal.dealName}
                                            </div>
                                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">${deal.salesRep}</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">¬£${parseFloat(deal.dealValue || 0).toLocaleString()}</span>
                                                <span style="color: rgba(255,255,255,0.4);">‚Ä¢</span>
                                                <span class="score-badge ${scoreClass}" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">${deal.score}%</span>
                                                ${criticalFlags.length > 0 ? `
                                                    <span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                                        üö® ${criticalFlags.length} critical
                                                    </span>
                                                ` : ''}
                                            </div>
                                        </div>
                                    </div>
                                    ${criticalFlags.length > 0 ? `
                                        <div style="background: rgba(235,51,73,0.1); border-left: 3px solid #eb3349; padding: 0.75rem 1rem; border-radius: 4px; margin-bottom: 0.75rem;">
                                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); line-height: 1.5;">
                                                ${criticalFlags.map(f => `üö© ${f.text}`).join(' ‚Ä¢ ')}
                                            </div>
                                        </div>
                                    ` : ''}
                                    ${topAction ? `
                                        <div style="background: rgba(102,126,234,0.1); border-left: 3px solid #667eea; padding: 0.75rem 1rem; border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.9); line-height: 1.5;">
                                                    ${topAction.icon} <strong>${topAction.action}:</strong> ${topAction.recommendation}
                                                </div>
                                                <div style="font-size: 0.75rem; color: #667eea; white-space: nowrap; font-weight: 600;">
                                                    ${topAction.deadline}
                                                </div>
                                            </div>
                                        </div>
                                    ` : ''}
                                    <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem;">
                                        <button class="btn btn-secondary" onclick="switchReviewView('deals'); setTimeout(() => showReviewDetail('${deal.id}'), 100);" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                                            View Full Details ‚Üí
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }
        
        function exportExecutiveSummary() {
            const rep = document.getElementById('review-rep').value;
            const stage = document.getElementById('review-stage-filter').value;
            const scoreFilter = document.getElementById('review-score-filter').value;
            
            let deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            // Apply same filters
            if (rep) deals = deals.filter(d => d.salesRep === rep);
            if (stage) deals = deals.filter(d => d.dealStage === stage);
            if (scoreFilter) {
                if (scoreFilter === 'critical') deals = deals.filter(d => d.score < 30);
                else if (scoreFilter === 'weak') deals = deals.filter(d => d.score >= 30 && d.score < 50);
                else if (scoreFilter === 'moderate') deals = deals.filter(d => d.score >= 50 && d.score < 70);
                else if (scoreFilter === 'good') deals = deals.filter(d => d.score >= 70 && d.score < 85);
                else if (scoreFilter === 'excellent') deals = deals.filter(d => d.score >= 85);
            }
            
            if (deals.length === 0) {
                alert('No deals to export');
                return;
            }
            
            const totalValue = deals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
            const avgScore = deals.length > 0 ? Math.round(deals.reduce((sum, d) => sum + d.score, 0) / deals.length) : 0;
            const atRisk = deals.filter(d => d.score < 50).length;
            
            const title = rep ? `Executive Pipeline Summary - ${rep}` : 'Team Executive Pipeline Summary';
            let output = `${title}\n`;
            output += `Generated: ${new Date().toLocaleString()}\n`;
            output += `${'='.repeat(80)}\n\n`;
            
            output += `EXECUTIVE SUMMARY\n`;
            output += `-`.repeat(80) + `\n`;
            output += `Total Pipeline: ¬£${totalValue.toLocaleString()}\n`;
            output += `Active Deals: ${deals.length}\n`;
            output += `Average Health Score: ${avgScore}%\n`;
            output += `At Risk (<50%): ${atRisk} deals\n`;
            if (stage) output += `Stage Filter: ${stage}\n`;
            if (scoreFilter) output += `Score Filter: ${scoreFilter}\n`;
            output += `\n`;
            
            // Top 5 deals
            const topDeals = deals.sort((a, b) => a.score - b.score).slice(0, 5);
            output += `TOP 5 DEALS REQUIRING ATTENTION\n`;
            output += `-`.repeat(80) + `\n`;
            topDeals.forEach((deal, index) => {
                const { redFlags } = analyzeDealFlags(deal);
                const actions = generateNextBestActions(deal);
                output += `\n${index + 1}. ${deal.dealName}\n`;
                output += `   Rep: ${deal.salesRep} | Value: ¬£${deal.dealValue} | Score: ${deal.score}%\n`;
                if (redFlags.length > 0) {
                    output += `   Red Flags: ${redFlags.slice(0, 2).map(f => f.text).join(', ')}\n`;
                }
                if (actions.length > 0) {
                    output += `   Top Action: ${actions[0].action} (${actions[0].deadline})\n`;
                }
            });
            output += `\n`;
            
            // Rep performance
            const reps = [...new Set(deals.map(d => d.salesRep))].filter(r => r);
            if (reps.length > 1) {
                output += `\nREP PERFORMANCE\n`;
                output += `-`.repeat(80) + `\n`;
                reps.forEach(rep => {
                    const repDeals = deals.filter(d => d.salesRep === rep);
                    const repPipeline = repDeals.reduce((sum, d) => sum + parseFloat(d.dealValue || 0), 0);
                    const repAvgScore = repDeals.length > 0 ? Math.round(repDeals.reduce((sum, d) => sum + d.score, 0) / repDeals.length) : 0;
                    const repAtRisk = repDeals.filter(d => d.score < 50).length;
                    output += `\n${rep}:\n`;
                    output += `   Pipeline: ¬£${repPipeline.toLocaleString()} (${repDeals.length} deals)\n`;
                    output += `   Avg Score: ${repAvgScore}%\n`;
                    output += `   At Risk: ${repAtRisk} deals\n`;
                });
            }
            
            const blob = new Blob([output], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const filename = rep 
                ? `executive-summary-${rep}-${new Date().toISOString().split('T')[0]}.txt`
                : `team-executive-summary-${new Date().toISOString().split('T')[0]}.txt`;
            a.href = url;
            a.download = filename;
            a.click();
        }


        function loadReviewDeals() {
            const rep = document.getElementById('review-rep').value;
            const stage = document.getElementById('review-stage-filter').value;
            const scoreFilter = document.getElementById('review-score-filter').value;
            
            console.log('loadReviewDeals called - Rep:', rep || 'All', 'Stage:', stage || 'All', 'Score:', scoreFilter || 'All');
            
            // Get all active deals
            let deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            // Apply filters
            if (rep) deals = deals.filter(d => d.salesRep === rep);
            if (stage) deals = deals.filter(d => d.dealStage === stage);
            if (scoreFilter) {
                if (scoreFilter === 'critical') deals = deals.filter(d => d.score < 30);
                else if (scoreFilter === 'weak') deals = deals.filter(d => d.score >= 30 && d.score < 50);
                else if (scoreFilter === 'moderate') deals = deals.filter(d => d.score >= 50 && d.score < 70);
                else if (scoreFilter === 'good') deals = deals.filter(d => d.score >= 70 && d.score < 85);
                else if (scoreFilter === 'excellent') deals = deals.filter(d => d.score >= 85);
            }
            
            console.log('Filtered deals:', deals.length);
            
            // Update summary stats
            const avgScore = deals.length > 0 
                ? Math.round(deals.reduce((sum, d) => sum + d.score, 0) / deals.length)
                : 0;
            const atRisk = deals.filter(d => d.score < 50).length;
            
            document.getElementById('review-deal-count').textContent = `${deals.length} deal${deals.length !== 1 ? 's' : ''}`;
            document.getElementById('review-avg-score').textContent = `${avgScore}%`;
            document.getElementById('review-at-risk-count').textContent = atRisk;
            
            // Update queue subtitle
            let subtitle = '(sorted by score - lowest first)';
            if (rep) subtitle = `(${rep} - ${subtitle})`;
            document.getElementById('queue-subtitle').textContent = subtitle;
            
            const dealList = document.getElementById('review-deal-list');
            
            if (deals.length === 0) {
                dealList.innerHTML = '<p style="padding: 2rem; text-align: center; color: rgba(255,255,255,0.6);">No deals match filters</p>';
                return;
            }
            
            dealList.innerHTML = deals
                .sort((a, b) => a.score - b.score) // Sort by score ascending (lowest/riskiest first)
                .map(deal => {
                    const scoreClass = deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low';
                    const { redFlags, greenFlags } = analyzeDealFlags(deal);
                    const criticalFlags = redFlags.filter(f => f.severity === 'critical').length;
                    const highFlags = redFlags.filter(f => f.severity === 'high').length;
                    
                    return `
                        <div style="padding: 1rem; border: 1px solid rgba(255,255,255,0.12); background: rgba(5,15,30,0.9); border-radius: 12px; margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s;"
                             onclick="showReviewDetail('${deal.id}')"
                             onmouseenter="this.style.borderColor='#667eea'; this.style.boxShadow='0 8px 24px rgba(102, 126, 234, 0.3)'"
                             onmouseleave="this.style.borderColor='rgba(255,255,255,0.12)'; this.style.boxShadow='none'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: bold; color: #ffffff;">${deal.dealName}</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 2px 8px; background: rgba(102,126,234,0.2); border-radius: 4px; white-space: nowrap; margin-left: 0.5rem;">${deal.salesRep || 'Unassigned'}</div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap; align-items: center;">
                                <span class="score-badge ${scoreClass}">${deal.score}%</span>
                                <span class="stage-badge stage-${deal.dealStage}">${deal.dealStage}</span>
                                <span style="color: rgba(255,255,255,0.7);">¬£${parseFloat(deal.dealValue || 0).toLocaleString()}</span>
                                <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">${calculateDaysInStage(deal)} days</span>
                                ${criticalFlags > 0 ? `<span style="background: rgba(235,51,73,0.2); color: #eb3349; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">üö© ${criticalFlags} critical</span>` : ''}
                                ${highFlags > 0 && criticalFlags === 0 ? `<span style="background: rgba(251,133,0,0.2); color: #fb8500; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚ö†Ô∏è ${highFlags} high</span>` : ''}
                                ${redFlags.length === 0 && greenFlags.length > 0 ? `<span style="background: rgba(40,167,69,0.2); color: #28a745; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem;">‚úÖ ${greenFlags.length} positive</span>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
        }

        // Deal Flags Analysis
        function analyzeDealFlags(deal) {
            const redFlags = [];
            const greenFlags = [];
            
            // RED FLAGS
            
            // No Champion/Coach
            if (!deal.champion || deal.champion.trim().length < 50) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'No Coach/Champion Identified',
                    severity: 'critical',
                    detail: 'Without an internal advocate, this deal is 71% more likely to be lost to status quo or competitor'
                });
            }
            
            // Economic Buyer Issues
            const ebText = (deal.economicBuyer || '').toLowerCase();
            if (!deal.economicBuyer || deal.economicBuyer.trim().length < 50) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Economic Buyer Not Identified',
                    severity: 'critical',
                    detail: 'Only 23% of deals without EB access close. 94% of won deals had EB identified by qualification stage'
                });
            } else if (ebText.includes('trouble')) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Economic Buyer in Trouble Mode',
                    severity: 'high',
                    detail: 'Risk-averse buyers in Trouble mode have 68% loss rate. Focus on risk mitigation and references'
                });
            } else if (ebText.match(/rating.*?[0-5]\/10|[0-5]\/10.*?rating/i)) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Weak Economic Buyer Relationship',
                    severity: 'high',
                    detail: 'EB relationship rated 5/10 or below. Deals with EB rating <6 have 54% lower close rate'
                });
            }
            
            // Stuck in Stage
            const daysInStage = calculateDaysInStage(deal);
            if (daysInStage > 60) {
                redFlags.push({
                    icon: 'üö©',
                    text: `Stalled ${daysInStage} Days in Stage`,
                    severity: 'critical',
                    detail: 'Deals >60 days in one stage have 73% loss rate. Create urgency or disqualify'
                });
            } else if (daysInStage > 45) {
                redFlags.push({
                    icon: 'üö©',
                    text: `Slow Progress - ${daysInStage} Days in Stage`,
                    severity: 'high',
                    detail: 'Velocity significantly below average. Identify blockers and create compelling event'
                });
            } else if (deal.dealStage === 'discovery' && daysInStage > 30) {
                redFlags.push({
                    icon: 'üö©',
                    text: `Extended Discovery - ${daysInStage} Days`,
                    severity: 'high',
                    detail: '73% of deals >30 days in discovery slip or are lost. Qualify or disqualify this week'
                });
            }
            
            // Weak Metrics
            const metricsText = (deal.metrics || '').toLowerCase();
            if (!deal.metrics || deal.metrics.trim().length < 100) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Metrics Not Documented',
                    severity: 'medium',
                    detail: 'Missing quantified business impact weakens value prop and urgency'
                });
            } else if (!metricsText.match(/\d/) && !metricsText.includes('quantif')) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Metrics Not Quantified',
                    severity: 'medium',
                    detail: 'Vague pain statements result in 41% win rate vs 81% for quantified metrics'
                });
            }
            
            // No Compelling Event
            const painText = (deal.identifyPain || '').toLowerCase();
            if (!painText.includes('deadline') && !painText.includes('date') && !painText.includes('mandate') && 
                !painText.includes('quarter') && !painText.includes('month') && daysInStage > 30) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'No Compelling Event/Urgency',
                    severity: 'medium',
                    detail: 'Without external pressure to decide, deals drag and slip'
                });
            }
            
            // Competition Risk
            const compText = (deal.competition || '').toLowerCase();
            if (compText.includes('incumbent') && !compText.includes('switching')) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Competing Against Incumbent',
                    severity: 'medium',
                    detail: 'Incumbent advantage. Need strong differentiation and compelling reason to switch'
                });
            }
            
            // Decision Process Not Mapped
            if (!deal.decisionProcess || deal.decisionProcess.trim().length < 100) {
                redFlags.push({
                    icon: 'üö©',
                    text: 'Decision Process Not Mapped',
                    severity: 'medium',
                    detail: 'Without understanding the buying process, surprises emerge late and cause slips'
                });
            }
            
            // GREEN FLAGS
            
            // Strong Champion
            const champText = (deal.champion || '').toLowerCase();
            if (champText.match(/9\/10|10\/10/i)) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Strong Champion (9-10/10)',
                    detail: 'Deals with champion rating 8+ have 87% win rate. This champion is well-positioned'
                });
            } else if (champText.match(/8\/10/i)) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Good Champion (8/10)',
                    detail: 'Solid internal advocate provides guidance and access'
                });
            }
            
            // Strong Economic Buyer
            if (ebText.match(/9\/10|10\/10/i) || ebText.match(/rating.*?[9]\/10/i)) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Strong Economic Buyer Relationship (9-10/10)',
                    detail: 'Excellent EB access and relationship. This is a key success factor'
                });
            } else if (ebText.match(/8\/10/i) || ebText.match(/rating.*?8\/10/i)) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Good Economic Buyer Relationship (8/10)',
                    detail: 'Solid relationship with budget authority'
                });
            }
            
            // EB in Growth Mode
            if (ebText.includes('growth')) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Economic Buyer in Growth Mode',
                    detail: 'Growth-oriented buyers are 3.2x more likely to close than risk-averse buyers'
                });
            }
            
            // Board Mandate / CEO Priority
            if (painText.includes('board mandate') || painText.includes('ceo mandate') || 
                painText.includes('board pressure') || painText.includes('board reviewing')) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Board Mandate / CEO Priority',
                    detail: 'Executive-level priority creates urgency and ensures resources/budget'
                });
            }
            
            // Successful Pilot/POC
            if (painText.includes('pilot') && (painText.includes('successful') || painText.includes('complete')) ||
                deal.decisionProcess && deal.decisionProcess.toLowerCase().includes('pilot') && 
                deal.decisionProcess.toLowerCase().includes('complete')) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Successful Pilot/POC Completed',
                    detail: 'Completed pilots have 78% win rate vs 62% without. Proof of value established'
                });
            }
            
            // Quantified ROI
            if (metricsText.includes('roi') || metricsText.includes('payback') || 
                (metricsText.match(/\d+%/) && metricsText.match(/¬£\d|$\d/))) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Quantified ROI/Business Case',
                    detail: 'Clear financial justification strengthens champion\'s ability to sell internally'
                });
            }
            
            // Competitive Advantage
            if (compText.includes('only alternative') || compText.includes('front runner') || 
                compText.includes('lead') && !compText.includes('behind')) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Strong Competitive Position',
                    detail: 'Leading position vs competitors increases win probability'
                });
            }
            
            // Fast Velocity
            if (deal.dealStage !== 'discovery' && daysInStage < 15) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: `Fast Velocity - ${daysInStage} Days in Stage`,
                    detail: 'Deal moving quickly indicates high urgency and strong qualification'
                });
            }
            
            // Multiple Buying Influences Engaged
            if (ebText.includes('cfo') && (champText.includes('director') || champText.includes('manager')) &&
                (ebText.includes('coo') || ebText.includes('cto') || painText.includes('it'))) {
                greenFlags.push({
                    icon: '‚úÖ',
                    text: 'Multiple Stakeholders Engaged',
                    detail: 'Broad stakeholder engagement reduces single-threaded risk'
                });
            }
            
            return { redFlags, greenFlags };
        }

        function generateNextBestActions(deal) {
            const actions = [];
            const daysInStage = calculateDaysInStage(deal);
            const ebText = (deal.economicBuyer || '').toLowerCase();
            const champText = (deal.champion || '').toLowerCase();
            const metricsText = (deal.metrics || '').toLowerCase();
            const painText = (deal.identifyPain || '').toLowerCase();
            
            // CRITICAL ACTIONS
            
            // No Economic Buyer - CRITICAL
            if (!deal.economicBuyer || deal.economicBuyer.trim().length < 50) {
                actions.push({
                    priority: 'critical',
                    icon: 'üî¥',
                    action: 'Get Economic Buyer Meeting',
                    current: 'No EB identified',
                    recommendation: 'Request introduction from current contact to CFO/VP/Budget Owner level. Without EB access, technical validation is meaningless.',
                    successPattern: '94% of won deals had Economic Buyer identified by qualification stage',
                    deadline: '7 days',
                    reasoning: 'Only Economic Buyers can give final approval. Deals without EB access have 77% lower close rate.'
                });
            } else if (ebText.match(/rating.*?[0-5]\/10|[0-5]\/10.*?rating/i)) {
                actions.push({
                    priority: 'critical',
                    icon: 'üî¥',
                    action: 'Strengthen Economic Buyer Relationship',
                    current: 'EB relationship rated ‚â§5/10',
                    recommendation: 'Schedule additional EB meetings to understand their priorities, concerns, and success criteria. Build trust through value-focused discussions.',
                    successPattern: 'Deals with EB rating 8+ close at 87% rate vs 32% for rating <6',
                    deadline: '14 days'
                });
            }
            
            // Stuck in Stage - CRITICAL
            if (daysInStage > 60) {
                actions.push({
                    priority: 'critical',
                    icon: 'üî¥',
                    action: 'Qualify or Disqualify Immediately',
                    current: `${daysInStage} days in ${deal.dealStage} stage`,
                    risk: '73% of deals >60 days in one stage are lost',
                    recommendation: 'Emergency review: What specific event will move this forward? If none identified by this week ‚Üí Disqualify and focus resources elsewhere.',
                    deadline: '3 days'
                });
            } else if (deal.dealStage === 'discovery' && daysInStage > 30) {
                actions.push({
                    priority: 'critical',
                    icon: 'üî¥',
                    action: 'Qualify or Disqualify by End of Week',
                    current: `${daysInStage} days in discovery`,
                    risk: '73% of deals >30 days in discovery slip or are lost',
                    recommendation: 'If no Economic Buyer meeting scheduled and no clear compelling event identified by Friday ‚Üí Disqualify',
                    deadline: '7 days'
                });
            }
            
            // No Champion - CRITICAL
            if (!deal.champion || deal.champion.trim().length < 50) {
                actions.push({
                    priority: 'critical',
                    icon: 'üî¥',
                    action: 'Develop Internal Champion',
                    current: 'No coach/champion identified',
                    recommendation: 'Identify someone who will benefit personally from this solution and coach them to sell internally. Without internal advocate, deal is 71% more likely to be lost.',
                    successPattern: 'Deals with active champion have 78% win rate vs 29% without',
                    deadline: '14 days'
                });
            }
            
            // HIGH PRIORITY ACTIONS
            
            // EB in Trouble Mode
            if (ebText.includes('trouble')) {
                actions.push({
                    priority: 'high',
                    icon: 'üü°',
                    action: 'Address Economic Buyer Risk Aversion',
                    current: 'EB in Trouble mode (risk-averse)',
                    recommendation: 'Focus on risk mitigation: provide references from similar companies, offer phased implementation, create proof of concept. De-risk the decision.',
                    successPattern: 'Trouble mode buyers respond to references, case studies, and risk mitigation strategies',
                    deadline: '14 days'
                });
            }
            
            // Weak Metrics
            if (!deal.metrics || deal.metrics.trim().length < 100 || !metricsText.match(/\d/)) {
                actions.push({
                    priority: 'high',
                    icon: 'üü°',
                    action: 'Quantify Business Impact',
                    current: 'Vague or missing metrics',
                    recommendation: 'Discovery call to quantify: (1) Current state costs (time, money, risk), (2) Desired future state, (3) Financial impact (ROI, payback), (4) Timeline urgency',
                    successPattern: 'Quantified metrics increase win rate from 41% to 81%',
                    deadline: '14 days'
                });
            }
            
            // No Compelling Event
            if (daysInStage > 30 && !painText.includes('deadline') && !painText.includes('mandate') && 
                !painText.includes('quarter') && !painText.includes('board')) {
                actions.push({
                    priority: 'high',
                    icon: 'üü°',
                    action: 'Create Compelling Event',
                    current: 'No external pressure to decide',
                    recommendation: 'Identify or create urgency: regulatory deadline, board meeting, fiscal year end, competitive threat, growth target. Without urgency, deals slip indefinitely.',
                    deadline: '14 days'
                });
            }
            
            // Decision Process Not Mapped
            if (!deal.decisionProcess || deal.decisionProcess.trim().length < 100) {
                actions.push({
                    priority: 'high',
                    icon: 'üü°',
                    action: 'Map Complete Decision Process',
                    current: 'Buying process unclear',
                    recommendation: 'Ask champion/EB: "Walk me through exactly how decisions like this get made at your company. Who needs to approve? What stages? How long does each take?" Map all steps, stakeholders, and timing.',
                    deadline: '14 days'
                });
            }
            
            // MEDIUM PRIORITY ACTIONS
            
            // Weak Champion
            if (champText.length > 50 && champText.match(/[3-6]\/10/i)) {
                actions.push({
                    priority: 'medium',
                    icon: 'üü¢',
                    action: 'Strengthen Champion Relationship',
                    current: 'Champion rated 3-6/10',
                    recommendation: 'Invest time coaching champion to sell internally. Provide them with ROI calculator, competitive comparison, executive presentation materials.',
                    successPattern: 'Champion rating 8+ increases win rate to 87%',
                    deadline: '21 days'
                });
            }
            
            // Competition
            const compText = (deal.competition || '').toLowerCase();
            if (compText.includes('incumbent') || (compText.length > 50 && !compText.includes('only'))) {
                actions.push({
                    priority: 'medium',
                    icon: 'üü¢',
                    action: 'Develop Competitive Strategy',
                    current: 'Competing against other vendors',
                    recommendation: 'Create competitive battle card: (1) Our unique differentiation, (2) Competitor weaknesses, (3) Proof points (references, case studies), (4) TCO comparison showing our value',
                    deadline: '21 days'
                });
            }
            
            // Advanced Stage + Weak Score
            if ((deal.dealStage === 'proposal' || deal.dealStage === 'negotiation') && deal.score < 70) {
                actions.push({
                    priority: 'high',
                    icon: 'üü°',
                    action: 'Resolve Qualification Gaps Before Advancing',
                    current: `${deal.score}% qualification in ${deal.dealStage} stage`,
                    risk: 'Deals in proposal/negotiation with <70% score have 64% slip rate',
                    recommendation: 'Do not proceed to contract/negotiation until qualification gaps are closed. Go back and strengthen weak areas.',
                    deadline: '7 days'
                });
            }
            
            // Slow Velocity
            if (daysInStage > 45 && daysInStage <= 60) {
                actions.push({
                    priority: 'medium',
                    icon: 'üü¢',
                    action: 'Accelerate Deal Velocity',
                    current: `Slower than average (${daysInStage} days in stage)`,
                    recommendation: 'Identify blocker preventing next step. Create internal timeline with champion. Offer to help remove obstacles (executive call, custom demo, reference call).',
                    deadline: '14 days'
                });
            }
            
            // Sort by priority
            const priorityOrder = { critical: 0, high: 1, medium: 2 };
            actions.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);
            
            return actions;
        }

        function showReviewDetail(dealId) {
            const deal = getDeals().find(d => d.id === dealId);
            if (!deal) return;
            
            const requirements = getMissingRequirements(75);
            const { redFlags, greenFlags } = analyzeDealFlags(deal);
            const actions = generateNextBestActions(deal);
            
            // Build flags HTML
            const flagsHTML = `
                ${redFlags.length > 0 ? `
                    <div style="background: rgba(235,51,73,0.1); border: 1px solid rgba(235,51,73,0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <h4 style="color: #eb3349; margin: 0 0 0.75rem 0; font-size: 0.95rem;">üö© Red Flags (${redFlags.length})</h4>
                        ${redFlags.map(flag => `
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(235,51,73,0.2); last-child:border-bottom: none;">
                                <div style="font-weight: 600; color: #eb3349; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    ${flag.icon} ${flag.text}
                                    ${flag.severity === 'critical' ? '<span style="background: rgba(235,51,73,0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">CRITICAL</span>' : ''}
                                    ${flag.severity === 'high' ? '<span style="background: rgba(251,133,0,0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">HIGH</span>' : ''}
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">${flag.detail}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
                
                ${greenFlags.length > 0 ? `
                    <div style="background: rgba(40,167,69,0.1); border: 1px solid rgba(40,167,69,0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <h4 style="color: #28a745; margin: 0 0 0.75rem 0; font-size: 0.95rem;">‚úÖ Green Flags (${greenFlags.length})</h4>
                        ${greenFlags.map(flag => `
                            <div style="margin-bottom: 0.75rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(40,167,69,0.2);">
                                <div style="font-weight: 600; color: #28a745; margin-bottom: 0.25rem; font-size: 0.875rem;">
                                    ${flag.icon} ${flag.text}
                                </div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem; line-height: 1.4;">${flag.detail}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
            `;
            
            // Build actions HTML
            const actionsHTML = actions.length > 0 ? `
                <div style="background: rgba(102,126,234,0.1); border: 1px solid rgba(102,126,234,0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <h4 style="color: #667eea; margin: 0 0 1rem 0; font-size: 0.95rem;">üéØ Next Best Actions (${actions.length})</h4>
                    ${actions.map((action, index) => `
                        <div style="background: rgba(10,22,40,0.6); border-left: 3px solid ${action.priority === 'critical' ? '#eb3349' : action.priority === 'high' ? '#fb8500' : '#28a745'}; padding: 0.75rem; margin-bottom: 0.75rem; border-radius: 4px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                <div style="font-weight: 600; color: #ffffff; font-size: 0.875rem;">
                                    ${action.icon} ${action.action}
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); white-space: nowrap; margin-left: 1rem;">
                                    ${action.deadline}
                                </div>
                            </div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Current:</span>
                                <span style="color: rgba(255,255,255,0.85);"> ${action.current}</span>
                            </div>
                            ${action.risk ? `
                                <div style="background: rgba(235,51,73,0.15); padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; font-size: 0.8rem;">
                                    <span style="color: #eb3349; font-weight: 600;">‚ö†Ô∏è Risk:</span>
                                    <span style="color: rgba(255,255,255,0.85);"> ${action.risk}</span>
                                </div>
                            ` : ''}
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span style="color: rgba(255,255,255,0.6);">Action:</span>
                                <span style="color: rgba(255,255,255,0.9);"> ${action.recommendation}</span>
                            </div>
                            ${action.successPattern ? `
                                <div style="font-size: 0.75rem; color: #28a745; font-style: italic; margin-top: 0.5rem;">
                                    üí° ${action.successPattern}
                                </div>
                            ` : ''}
                            ${action.reasoning ? `
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-top: 0.5rem;">
                                    ${action.reasoning}
                                </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            ` : '';
            
            document.getElementById('review-deal-detail').innerHTML = `
                <h3 style="color: #ffffff;">${deal.dealName}</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0; font-size: 0.875rem; color: rgba(255,255,255,0.8);">
                    <div><strong style="color: #ffffff;">Rep:</strong> ${deal.salesRep}</div>
                    <div><strong style="color: #ffffff;">Value:</strong> ¬£${parseFloat(deal.dealValue || 0).toLocaleString()}</div>
                    <div><strong style="color: #ffffff;">Stage:</strong> ${deal.dealStage}</div>
                    <div><strong style="color: #ffffff;">Close Date:</strong> ${deal.closeDate ? new Date(deal.closeDate).toLocaleDateString() : 'Not set'}</div>
                    <div><strong style="color: #ffffff;">Score:</strong> <span class="score-badge ${deal.score >= 75 ? 'score-high' : deal.score >= 50 ? 'score-medium' : 'score-low'}">${deal.score}%</span></div>
                    <div><strong style="color: #ffffff;">Days in Stage:</strong> ${calculateDaysInStage(deal)}</div>
                </div>
                
                ${flagsHTML}
                
                ${actionsHTML}
                
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; color: #ffffff;">MEDDICC Review</h4>
                <div style="background: rgba(10,22,40,0.9); padding: 1rem; border-radius: 12px; margin-bottom: 1rem; border: 1px solid rgba(255,255,255,0.12);">
                    ${sections.map(section => `
                        <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <strong style="color: #ffffff;">${section.label}:</strong>
                            <p style="margin-top: 0.5rem; color: rgba(255,255,255,0.8); white-space: pre-wrap;">${deal[section.id] || '<em style="color: rgba(255,255,255,0.5);">Not completed</em>'}</p>
                        </div>
                    `).join('')}
                </div>
                
                <h4 style="margin-bottom: 1rem; color: #ffffff;">Qualification Requirements</h4>
                <ul class="requirement-list">
                    ${requirements.map(req => `
                        <li class="${req.met ? 'requirement-met' : 'requirement-unmet'}">${req.text}</li>
                    `).join('')}
                </ul>
                
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; color: #ffffff;">Review Notes</h4>
                <textarea id="review-notes-${dealId}" placeholder="Add notes from this review..." 
                          style="width: 100%; min-height: 100px; padding: 0.75rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(10,22,40,0.95); color: #ffffff;"></textarea>
                
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-primary" onclick="saveReviewNotes('${dealId}')">Save Notes</button>
                    <button class="btn btn-secondary" onclick="loadDeal('${dealId}'); switchMode('rep')">Edit Deal</button>
                </div>
            `;
        }

        function saveReviewNotes(dealId) {
            const notes = document.getElementById(`review-notes-${dealId}`).value;
            const deals = getDeals();
            const deal = deals.find(d => d.id === dealId);
            
            if (deal) {
                if (!deal.reviewNotes) deal.reviewNotes = [];
                deal.reviewNotes.push({
                    date: new Date().toISOString(),
                    notes: notes
                });
                
                localStorage.setItem('meddicc_deals', JSON.stringify(deals));
                alert('Review notes saved!');
            }
        }

        function exportReviewNotes() {
            const rep = document.getElementById('review-rep').value;
            const stage = document.getElementById('review-stage-filter').value;
            const scoreFilter = document.getElementById('review-score-filter').value;
            
            let deals = getDeals().filter(d => !['closed-won', 'closed-lost'].includes(d.dealStage));
            
            // Apply same filters as current view
            if (rep) deals = deals.filter(d => d.salesRep === rep);
            if (stage) deals = deals.filter(d => d.dealStage === stage);
            if (scoreFilter) {
                if (scoreFilter === 'critical') deals = deals.filter(d => d.score < 30);
                else if (scoreFilter === 'weak') deals = deals.filter(d => d.score >= 30 && d.score < 50);
                else if (scoreFilter === 'moderate') deals = deals.filter(d => d.score >= 50 && d.score < 70);
                else if (scoreFilter === 'good') deals = deals.filter(d => d.score >= 70 && d.score < 85);
                else if (scoreFilter === 'excellent') deals = deals.filter(d => d.score >= 85);
            }
            
            if (deals.length === 0) {
                alert('No deals to export');
                return;
            }
            
            const title = rep ? `Pipeline Review - ${rep}` : 'Team Pipeline Review - All Reps';
            let output = `${title}\nGenerated: ${new Date().toLocaleString()}\n`;
            output += `Total Deals: ${deals.length}\n`;
            if (stage) output += `Stage Filter: ${stage}\n`;
            if (scoreFilter) output += `Score Filter: ${scoreFilter}\n`;
            output += `\n`;
            
            // Sort by score (lowest first)
            deals.sort((a, b) => a.score - b.score);
            
            deals.forEach(deal => {
                output += `\n${'='.repeat(60)}\n`;
                output += `Deal: ${deal.dealName}\n`;
                output += `Rep: ${deal.salesRep || 'Unassigned'}\n`;
                output += `Value: ¬£${deal.dealValue} | Stage: ${deal.dealStage} | Score: ${deal.score}%\n`;
                output += `Days in Stage: ${calculateDaysInStage(deal)}\n`;
                output += `${'='.repeat(60)}\n`;
                
                if (deal.reviewNotes && deal.reviewNotes.length > 0) {
                    deal.reviewNotes.forEach(note => {
                        output += `\n[${new Date(note.date).toLocaleDateString()}]\n${note.notes}\n`;
                    });
                } else {
                    output += '\nNo review notes yet.\n';
                }
            });
            
            const blob = new Blob([output], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const filename = rep 
                ? `pipeline-review-${rep}-${new Date().toISOString().split('T')[0]}.txt`
                : `team-pipeline-review-${new Date().toISOString().split('T')[0]}.txt`;
            a.href = url;
            a.download = filename;
            a.click();
        }

        // Export functions
        function downloadTemplate() {
            const headers = [
                'Deal Name',
                'Deal Value (¬£)',
                'Close Date (YYYY-MM-DD)',
                'Created Date (YYYY-MM-DD)',
                'Sales Rep',
                'Deal Stage',
                'Forecast Category',
                'Metrics',
                'Economic Buyer',
                'Decision Criteria',
                'Decision Process',
                'Identify Pain',
                'Champion',
                'Competition'
            ];
            
            const exampleRow = [
                'Acme Corp - CRM Implementation',
                '50000',
                '2026-03-15',
                '2025-12-01',
                'John Smith',
                'qualification',
                'best-case',
                'Current: Processing 500 orders/day = 12hrs (¬£105K/year labor). Target: Automate 80% = 2hrs. Impact: Save ¬£84K/year. Timeline: 6 months.',
                'Sarah Chen, CFO. Signs off on all investments >¬£25K. Meeting scheduled 15th Jan. Priorities: Cost reduction, digital transformation.',
                'Must-have: API integration with Salesforce (critical), SOC2 compliance (non-negotiable). Evaluation weighted: ROI 40%, Implementation 30%, Vendor stability 20%.',
                'Stage 1 - Technical Evaluation (Jan 15-30): IT team tests. Stage 2 - Business Case (Feb 1-14): Champion presents to CFO. Stage 3 - Legal (Mar 1-15): Contract review.',
                'Manual order processing causing 4-6 hour delays. Lost 23 orders worth ¬£127K last month. CEO mandate to fix before peak season (May). Continue losing 5-7% of orders if no action.',
                'David Thompson, VP Operations (8 years). Reports directly to COO. Built internal business case. Scheduled CFO meeting for us. Strong relationship - meets bi-weekly.',
                'Competitor A - Incumbent (3 years), no Salesforce integration (critical gap), 40% more expensive. Status quo: Continue manual process, risk losing orders.'
            ];
            
            const csv = [
                headers.join(','),
                exampleRow.map(field => `"${field.replace(/"/g, '""')}"`).join(',')
            ].join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `meddicc-template-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            
            showImportInstructions();
        }
        
        function showImportInstructions() {
            const instructions = `
**üìã CSV Template Downloaded!**

**How to Use:**

1. **Open the CSV** in Excel or Google Sheets
2. **Keep the example row** as a reference (or delete it)
3. **Add your deals** - one row per deal
4. **Follow the format:**
   - Deal Stage: discovery, qualification, proposal, negotiation, closed-won, closed-lost
   - Forecast Category: pipeline, best-case, commit, closed
   - Close Date: YYYY-MM-DD format (e.g., 2026-03-15)
   - Created Date: YYYY-MM-DD format (e.g., 2025-12-01) - when opportunity was first identified
5. **Save as CSV** (not Excel format)
6. **Click "Import CSV"** to upload

**Tips:**
‚Ä¢ Copy/paste similar deals to save time
‚Ä¢ Use multi-line text in MEDDICC fields (Excel will handle it)
‚Ä¢ Required fields: Deal Name, Sales Rep
‚Ä¢ Created Date tracks deal age - backdate for existing opportunities
‚Ä¢ Include as much MEDDICC detail as possible for better scoring

Ready to import when you are!
            `;
            
            showInsights(instructions);
        }
        
        function importCSV(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const csv = e.target.result;
                    const rows = parseCSV(csv);
                    
                    if (rows.length < 2) {
                        alert('CSV file appears to be empty or invalid');
                        return;
                    }
                    
                    const headers = rows[0];
                    const dataRows = rows.slice(1);
                    
                    // Validate headers
                    const expectedHeaders = [
                        'Deal Name', 'Deal Value (¬£)', 'Close Date (YYYY-MM-DD)', 'Created Date (YYYY-MM-DD)', 'Sales Rep', 
                        'Deal Stage', 'Forecast Category', 'Metrics', 'Economic Buyer', 
                        'Decision Criteria', 'Decision Process', 'Identify Pain', 'Champion', 'Competition'
                    ];
                    
                    const headerMatch = headers.every((h, i) => h.trim() === expectedHeaders[i]);
                    if (!headerMatch) {
                        alert('CSV headers do not match template. Please use the downloaded template.');
                        return;
                    }
                    
                    // Process rows
                    let imported = 0;
                    let skipped = 0;
                    const errors = [];
                    
                    dataRows.forEach((row, index) => {
                        try {
                            if (row.length < 14) {
                                skipped++;
                                errors.push(`Row ${index + 2}: Not enough columns`);
                                return;
                            }
                            
                            const [dealName, dealValue, closeDate, createdDate, salesRep, dealStage, forecastCategory,
                                   metrics, economicBuyer, decisionCriteria, decisionProcess, 
                                   identifyPain, champion, competition] = row;
                            
                            // Validate required fields
                            if (!dealName || !dealName.trim()) {
                                skipped++;
                                errors.push(`Row ${index + 2}: Missing Deal Name`);
                                return;
                            }
                            
                            if (!salesRep || !salesRep.trim()) {
                                skipped++;
                                errors.push(`Row ${index + 2}: Missing Sales Rep`);
                                return;
                            }
                            
                            // Create deal
                            const dealId = `deal_${Date.now()}_${index}`;
                            const score = calculateScoreFromData({
                                metrics, economicBuyer, decisionCriteria, decisionProcess,
                                identifyPain, champion, competition
                            });
                            
                            const newDeal = {
                                id: dealId,
                                dealName: dealName.trim(),
                                dealValue: dealValue.trim(),
                                closeDate: closeDate.trim(),
                                createdDate: createdDate && createdDate.trim() ? createdDate.trim() : new Date().toISOString().split('T')[0],
                                salesRep: salesRep.trim(),
                                dealStage: dealStage.trim().toLowerCase(),
                                forecastCategory: forecastCategory.trim().toLowerCase(),
                                metrics: metrics.trim(),
                                economicBuyer: economicBuyer.trim(),
                                decisionCriteria: decisionCriteria.trim(),
                                decisionProcess: decisionProcess.trim(),
                                identifyPain: identifyPain.trim(),
                                champion: champion.trim(),
                                competition: competition.trim(),
                                lastUpdated: new Date().toISOString(),
                                score: score,
                                stageHistory: []
                            };
                            
                            // Add to storage
                            const deals = getDeals();
                            deals.push(newDeal);
                            localStorage.setItem('meddicc_deals', JSON.stringify(deals));
                            
                            imported++;
                        } catch (err) {
                            skipped++;
                            errors.push(`Row ${index + 2}: ${err.message}`);
                        }
                    });
                    
                    // Show results
                    updateDealCount();
                    
                    let message = `**Import Complete!**\n\n`;
                    message += `‚úÖ Successfully imported: ${imported} deals\n`;
                    if (skipped > 0) {
                        message += `‚ö†Ô∏è Skipped: ${skipped} rows\n\n`;
                        if (errors.length > 0) {
                            message += `**Errors:**\n${errors.slice(0, 10).join('\n')}`;
                            if (errors.length > 10) {
                                message += `\n... and ${errors.length - 10} more errors`;
                            }
                        }
                    }
                    
                    showInsights(message);
                    
                    // Reset file input
                    event.target.value = '';
                    
                } catch (err) {
                    alert(`Error importing CSV: ${err.message}`);
                    console.error('Import error:', err);
                }
            };
            
            reader.readAsText(file);
        }
        
        function parseCSV(csv) {
            const rows = [];
            let currentRow = [];
            let currentField = '';
            let inQuotes = false;
            
            for (let i = 0; i < csv.length; i++) {
                const char = csv[i];
                const nextChar = csv[i + 1];
                
                if (char === '"') {
                    if (inQuotes && nextChar === '"') {
                        // Escaped quote
                        currentField += '"';
                        i++; // Skip next quote
                    } else {
                        // Toggle quote state
                        inQuotes = !inQuotes;
                    }
                } else if (char === ',' && !inQuotes) {
                    // End of field
                    currentRow.push(currentField);
                    currentField = '';
                } else if ((char === '\n' || char === '\r') && !inQuotes) {
                    // End of row
                    if (char === '\r' && nextChar === '\n') {
                        i++; // Skip \n in \r\n
                    }
                    if (currentField || currentRow.length > 0) {
                        currentRow.push(currentField);
                        rows.push(currentRow);
                        currentRow = [];
                        currentField = '';
                    }
                } else {
                    currentField += char;
                }
            }
            
            // Add last field and row if present
            if (currentField || currentRow.length > 0) {
                currentRow.push(currentField);
                rows.push(currentRow);
            }
            
            return rows;
        }
        
        function calculateScoreFromData(data) {
            let score = 0;
            
            // Metrics (20 points)
            if (data.metrics) {
                const hasNumbers = /\d/.test(data.metrics);
                const hasCurrency = /[$‚Ç¨¬£]/.test(data.metrics);
                const meetsLength = data.metrics.length >= 100;
                
                if (hasNumbers && hasCurrency && meetsLength) {
                    score += 20;
                } else if (hasNumbers && hasCurrency) {
                    score += 15;
                } else if (hasNumbers) {
                    score += 10;
                } else if (data.metrics.length > 0) {
                    score += 5;
                }
            }
            
            // Economic Buyer (15 points)
            if (data.economicBuyer) {
                const hasTitle = /(cfo|ceo|cto|cio|vp|director|head)/i.test(data.economicBuyer);
                const hasAccess = /(meeting|scheduled|access|introduced)/i.test(data.economicBuyer);
                const meetsLength = data.economicBuyer.length >= 80;
                
                if (hasTitle && hasAccess && meetsLength) {
                    score += 15;
                } else if (hasTitle && meetsLength) {
                    score += 12;
                } else if (hasTitle) {
                    score += 8;
                } else if (data.economicBuyer.length > 0) {
                    score += 5;
                }
            }
            
            // Decision Criteria (15 points)
            if (data.decisionCriteria) {
                const criteriaCount = data.decisionCriteria.split(/[,\n]/).filter(c => c.trim().length > 10).length;
                const meetsLength = data.decisionCriteria.length >= 120;
                
                if (criteriaCount >= 3 && meetsLength) {
                    score += 15;
                } else if (criteriaCount >= 2 && meetsLength) {
                    score += 12;
                } else if (criteriaCount >= 1) {
                    score += 8;
                } else if (data.decisionCriteria.length > 0) {
                    score += 5;
                }
            }
            
            // Decision Process (15 points)
            if (data.decisionProcess) {
                const hasTimeline = /\d+\s*(week|month|day)/i.test(data.decisionProcess);
                const hasStages = /(step|stage|phase)/i.test(data.decisionProcess);
                const meetsLength = data.decisionProcess.length >= 150;
                
                if (hasTimeline && hasStages && meetsLength) {
                    score += 15;
                } else if (hasTimeline && meetsLength) {
                    score += 12;
                } else if (hasTimeline || hasStages) {
                    score += 8;
                } else if (data.decisionProcess.length > 0) {
                    score += 5;
                }
            }
            
            // Identify Pain (15 points)
            if (data.identifyPain) {
                const hasImpact = /(cost|lose|risk|waste|fail)/i.test(data.identifyPain);
                const hasUrgency = /(urgent|now|deadline|must)/i.test(data.identifyPain);
                const meetsLength = data.identifyPain.length >= 120;
                
                if (hasImpact && hasUrgency && meetsLength) {
                    score += 15;
                } else if (hasImpact && meetsLength) {
                    score += 12;
                } else if (hasImpact) {
                    score += 8;
                } else if (data.identifyPain.length > 0) {
                    score += 5;
                }
            }
            
            // Champion (10 points)
            if (data.champion) {
                const hasInfluence = /(access|influence|credibility|reports to)/i.test(data.champion);
                const hasAdvocacy = /(advocate|champion|support|selling)/i.test(data.champion);
                const meetsLength = data.champion.length >= 100;
                
                if (hasInfluence && hasAdvocacy && meetsLength) {
                    score += 10;
                } else if (hasInfluence && meetsLength) {
                    score += 8;
                } else if (meetsLength) {
                    score += 6;
                } else if (data.champion.length > 0) {
                    score += 3;
                }
            }
            
            // Competition (10 points)
            if (data.competition) {
                const hasCompetitors = data.competition.length > 50;
                const hasStatusQuo = /(status quo|current|do nothing|build)/i.test(data.competition);
                const meetsLength = data.competition.length >= 120;
                
                if (hasCompetitors && hasStatusQuo && meetsLength) {
                    score += 10;
                } else if (hasCompetitors && meetsLength) {
                    score += 8;
                } else if (meetsLength) {
                    score += 6;
                } else if (data.competition.length > 0) {
                    score += 3;
                }
            }
            
            return Math.round(score);
        }
        
        function loadSampleDeals() {
            const existingDeals = getDeals();
            
            if (existingDeals.length > 0) {
                if (!confirm('This will add 10 sample deals to your existing deals. Continue?')) {
                    return;
                }
            }
            
            const sampleDeals = [
                {
                    id: 'sample-' + Date.now() + '-1',
                    dealName: 'TechFlow Solutions - Marketing Automation',
                    dealValue: 125000,
                    closeDate: '2026-03-31',
                    createdDate: '2025-11-20',
                    salesRep: 'Sarah Chen',
                    dealStage: 'proposal',
                    forecastCategory: 'commit',
                    metrics: 'Current: 87% lead conversion rate, manual processes taking 30 hours/week\n\nTarget: 10-15% improvement in lead conversion (‚Üí95-98%), save 30hrs/week through automation, enable ¬£1.44M additional revenue capacity\n\nQuantified: ROI 340% over 3 years, payback 8 months',
                    economicBuyer: 'Jane Roberts, CMO - Final budget authority (¬£200K approved), reports to CEO, measured on revenue growth and marketing efficiency. Personal win: Career advancement through demonstrable revenue impact.',
                    decisionCriteria: '1. Salesforce integration (must-have)\n2. Lead scoring accuracy >90%\n3. Implementation < 90 days\n4. ROI payback < 12 months\n5. Support for 350 users',
                    decisionProcess: '**Stage 1 - Technical Evaluation (Jan 15-30):** IT validates Salesforce integration\n**Stage 2 - Business Case (Feb 1-14):** CMO presents ROI to CFO, need exec approval\n**Stage 3 - Vendor Selection (Feb 15-28):** Final presentations, reference calls\n**Stage 4 - Contract (Mar 1-20):** Legal review, PO creation\n**Stage 5 - Signature (Mar 31):** CFO signs',
                    identifyPain: 'Manual lead processing causing 4-6 hour delays. Lost ¬£127K last month (23 cancelled orders). Legacy system can\'t scale with 40% growth. CEO mandate to fix before Q2. NPS dropped from 52 to 38.',
                    champion: 'David Chen, Marketing Ops Manager - Built internal business case, scheduled exec meetings, providing competitive intel. Strong relationship (9/10), growth mode, personal win is career advancement.',
                    competition: 'HubSpot (incumbent, lacks Salesforce integration - deal breaker), Marketo (too complex/expensive), Status quo (unacceptable per CEO mandate)',
                    score: 88,
                    stageHistory: [{stage: 'qualification', date: '2025-11-20'}, {stage: 'proposal', date: '2025-12-15'}]
                },
                {
                    id: 'sample-' + Date.now() + '-2',
                    dealName: 'GlobalRetail - Inventory Management',
                    dealValue: 85000,
                    closeDate: '2026-04-30',
                    createdDate: '2025-11-25',
                    salesRep: 'Michael Rodriguez',
                    dealStage: 'qualification',
                    forecastCategory: 'pipeline',
                    metrics: 'Current: 87% inventory accuracy, ¬£240K annual writeoffs\n\nTarget: >98% accuracy, <¬£60K writeoffs\n\nQuantified: ¬£180K annual savings, ROI 212% over 3 years',
                    economicBuyer: 'Simon Taylor, CFO - Final authority, under board pressure after failed audit. Risk averse (Trouble mode), wants 3-vendor comparison. Rating 5/10 - needs strengthening.',
                    decisionCriteria: '1. Proven accuracy >98%\n2. Risk mitigation (phased rollout)\n3. Integration with Oracle ERP\n4. Training included\n5. Reference customers in retail',
                    decisionProcess: 'Stage 1 - Pilot Results Review (Jan 15): Board reviews 2-warehouse pilot\nStage 2 - Vendor Comparison (Feb 1-28): RFP process, 3 vendors\nStage 3 - Selection (Mar 15): CFO decision\nStage 4 - Contract (Apr 1-30): Legal/Procurement',
                    identifyPain: '¬£240K annual writeoffs due to 87% accuracy. Failed audit Q3 2025. Board mandate to fix. 8 warehouses affected. Manual counts taking 200 hours/month.',
                    champion: 'NO COACH IDENTIFIED - Critical gap',
                    competition: 'Oracle NetSuite (existing Oracle ERP relationship), SAP (too expensive), Status quo (board pressure to change)',
                    score: 58,
                    stageHistory: [{stage: 'discovery', date: '2025-11-25'}, {stage: 'qualification', date: '2025-12-20'}]
                },
                {
                    id: 'sample-' + Date.now() + '-3',
                    dealName: 'FinTech Partners - Compliance Platform',
                    dealValue: 195000,
                    closeDate: '2026-02-28',
                    createdDate: '2025-10-15',
                    salesRep: 'Sarah Chen',
                    dealStage: 'negotiation',
                    forecastCategory: 'commit',
                    metrics: 'Current: 15 days compliance reporting cycle, 40% manual effort, 3 FTE dedicated\n\nTarget: <24 hours reporting, <5% manual, automate 90% of workflows\n\nQuantified: Save ¬£180K annually (2.5 FTE), avoid ¬£500K potential fines',
                    economicBuyer: 'Andrew Morrison, CFO - Budget owner (¬£250K approved), board mandate for compliance upgrade. Personal win: Avoid regulatory fines and reputational damage. Rating 9/10.',
                    decisionCriteria: '1. FCA compliance certified\n2. SOC2 Type II certified\n3. Integration with existing systems\n4. Implementation < 60 days (before FCA audit)\n5. Ongoing support included',
                    decisionProcess: '**Stage 1 - COMPLETE:** Technical validation, security review passed\n**Stage 2 - COMPLETE:** Business case approved by CFO\n**Stage 3 - CURRENT:** Contract negotiation (Jan 15-Feb 15)\n**Stage 4 - Final:** FCA compliance sign-off (Feb 20)\n**Stage 5 - Signature:** CFO signs (Feb 28 target)',
                    identifyPain: 'FCA audit March 2026. Current system non-compliant. ¬£500K fine risk. Manual processes error-prone (12 errors last quarter). Board visibility high. CEO personally tracking.',
                    champion: 'Lisa Wong, Head of Compliance - Executive sponsor, built business case, navigating procurement. Strong advocate (9/10), providing legal/procurement guidance.',
                    competition: 'ComplyAdvantage (too expensive at ¬£280K), ThomsonReuters (3-month implementation too slow), Build in-house (rejected by IT)',
                    score: 82,
                    stageHistory: [{stage: 'discovery', date: '2025-10-15'}, {stage: 'qualification', date: '2025-11-01'}, {stage: 'proposal', date: '2025-12-01'}, {stage: 'negotiation', date: '2026-01-02'}]
                },
                {
                    id: 'sample-' + Date.now() + '-4',
                    dealName: 'DataCorp - Business Intelligence',
                    dealValue: 95000,
                    closeDate: '2026-06-30',
                    createdDate: '2025-12-10',
                    salesRep: 'James Wilson',
                    dealStage: 'discovery',
                    forecastCategory: 'pipeline',
                    metrics: 'Vague - "better reporting and dashboards"',
                    economicBuyer: 'UNKNOWN - No access to decision maker yet. IT Manager has low influence.',
                    decisionCriteria: 'Not defined - still early discovery',
                    decisionProcess: 'Unknown - IT Manager "just exploring options"',
                    identifyPain: 'Unclear - IT Manager mentioned "manual reporting" but no quantified business impact or urgency',
                    champion: 'None identified',
                    competition: 'Tableau, PowerBI, Qlik mentioned - may be others unknown',
                    score: 22,
                    stageHistory: [{stage: 'discovery', date: '2025-12-10'}]
                },
                {
                    id: 'sample-' + Date.now() + '-5',
                    dealName: 'ManuCorp - Supply Chain Platform',
                    dealValue: 58000,
                    closeDate: '2026-03-20',
                    createdDate: '2025-11-28',
                    salesRep: 'Michael Rodriguez',
                    dealStage: 'proposal',
                    forecastCategory: 'commit',
                    metrics: 'Current: 12% defect rate, supplier delays causing ¬£280K Q4 losses\n\nTarget: <5% defects, 60% reduction in delays\n\nQuantified: Save ¬£450K annually, ROI 776% over 3 years',
                    economicBuyer: 'Paul Edwards, VP Operations - Budget authority, under CEO pressure after Q4 failures. Trouble mode (bonus at risk). Personal win: Save job/bonus. Rating 7/10.',
                    decisionCriteria: '1. Proven defect reduction\n2. Real-time supplier visibility\n3. 140 supplier capacity\n4. Implementation < 90 days\n5. Mobile access for quality team',
                    decisionProcess: '**Stage 1 - COMPLETE:** Pilot (2 suppliers, 8 weeks, successful)\n**Stage 2 - CURRENT:** Business case review with CFO (Jan 20)\n**Stage 3:** Board presentation (Feb 15 - Linda Chen presenting)\n**Stage 4:** Contract negotiation (Feb 20)\n**Stage 5:** Signature (Mar 20 target)',
                    identifyPain: '¬£280K losses Q4 2025 due to supplier issues. 12% defect rate unacceptable. CEO mandate to fix. Board report March 30th. VP Ops bonus at risk.',
                    champion: 'Linda Chen, Supply Chain Director - Built ROI model, ran pilot, secured approval. Excellent coach (9/10), providing competitive intel including Kinaxis pricing.',
                    competition: 'Kinaxis (too expensive at ¬£140K), SupplyStream (lacks features), Status quo (CEO mandate to change)',
                    score: 76,
                    stageHistory: [{stage: 'discovery', date: '2025-11-28'}, {stage: 'qualification', date: '2025-12-15'}, {stage: 'proposal', date: '2025-12-28'}]
                },
                {
                    id: 'sample-' + Date.now() + '-6',
                    dealName: 'HealthTech Innovations - Patient Portal',
                    dealValue: 142000,
                    closeDate: '2026-04-15',
                    createdDate: '2025-12-01',
                    salesRep: 'Sarah Chen',
                    dealStage: 'qualification',
                    forecastCategory: 'pipeline',
                    metrics: 'Current: 58% patient satisfaction, 45 calls/day to schedule, 20% no-show rate\n\nTarget: >85% satisfaction, <10 calls/day, <8% no-shows\n\nQuantified: Save ¬£95K annually (1.5 FTE), improve revenue ¬£240K (reduced no-shows)',
                    economicBuyer: 'Dr. Sarah Mitchell, Medical Director - Budget authority, board mandate to improve patient experience. Growth mode, strong advocate. Rating 8/10.',
                    decisionCriteria: '1. NHS integration\n2. HIPAA/GDPR compliant\n3. Mobile-first design\n4. <6 week implementation\n5. 24/7 support',
                    decisionProcess: 'Stage 1 - Technical evaluation (Jan-Feb): IT validates NHS integration\nStage 2 - Pilot (Feb-Mar): 2-week pilot with 500 patients\nStage 3 - Board approval (Mar 15)\nStage 4 - Contract (Apr 1-15)',
                    identifyPain: 'Patient satisfaction 58% (target 85%). 45 scheduling calls/day overwhelming staff. 20% no-show rate costing ¬£240K annually. CQC inspection April - need improvement.',
                    champion: 'Tom Richards, Practice Manager - Day-to-day contact, coordinating evaluation. Good relationship (7/10), providing access to decision makers.',
                    competition: 'Patient Trak (incumbent, poor mobile experience), DrFirst (too expensive), Build in-house (IT lacks capacity)',
                    score: 64,
                    stageHistory: [{stage: 'discovery', date: '2025-12-01'}, {stage: 'qualification', date: '2025-12-20'}]
                },
                {
                    id: 'sample-' + Date.now() + '-7',
                    dealName: 'RetailMax - POS System Upgrade',
                    dealValue: 178000,
                    closeDate: '2026-05-31',
                    createdDate: '2025-12-05',
                    salesRep: 'James Wilson',
                    dealStage: 'discovery',
                    forecastCategory: 'pipeline',
                    metrics: 'Current: 15-year-old POS, frequent outages (12 last quarter), no real-time inventory\n\nTarget: 99.9% uptime, real-time inventory across 45 stores\n\nQuantified: Reduce outage costs ¬£180K/year, enable omnichannel (¬£500K revenue opportunity)',
                    economicBuyer: 'Mark Thompson, COO - Budget owner, frustrated with current system. Even Keel mode but outages causing pressure. Rating 6/10 - building relationship.',
                    decisionCriteria: '1. 99.9% uptime SLA\n2. Integration with existing systems\n3. 45-store deployment capability\n4. Staff training included\n5. Omnichannel support',
                    decisionProcess: 'Not yet defined - COO wants to see detailed proposal first',
                    identifyPain: '15-year-old system failing (12 outages Q4). Each outage costs ¬£15K in lost sales. Can\'t do omnichannel (¬£500K opportunity). Staff frustrated. But no hard deadline yet.',
                    champion: 'Potential: Emma Davis, IT Director - seems supportive but not yet actively championing',
                    competition: 'Square (too basic for 45 stores), NCR (expensive, complex), Oracle (18-month implementation)',
                    score: 38,
                    stageHistory: [{stage: 'discovery', date: '2025-12-05'}]
                },
                {
                    id: 'sample-' + Date.now() + '-8',
                    dealName: 'CloudServe - Security Platform',
                    dealValue: 210000,
                    closeDate: '2026-03-15',
                    createdDate: '2025-10-20',
                    salesRep: 'Michael Rodriguez',
                    dealStage: 'proposal',
                    forecastCategory: 'best-case',
                    metrics: 'Current: Manual security monitoring, 48-hour incident response, no SOC\n\nTarget: Automated 24/7 SOC, <1 hour response, prevent breaches\n\nQuantified: Avoid ¬£2.5M breach risk, save ¬£120K annually (2 FTE), insurance premium reduction ¬£40K/year',
                    economicBuyer: 'Kevin O\'Brien, CTO - Budget authority, board mandate after near-breach Q3. Trouble mode (career risk if breach occurs). Personal win: Prove security leadership. Rating 8/10.',
                    decisionCriteria: '1. 24/7 SOC included\n2. <1 hour response SLA\n3. ISO 27001 certified\n4. Cyber insurance approved\n5. Threat intelligence integration',
                    decisionProcess: '**Stage 1 - COMPLETE:** Security audit, technical validation passed\n**Stage 2 - CURRENT:** Business case with CFO (Jan 15)\n**Stage 3:** Board approval (Feb 1 - cyber insurance requirement)\n**Stage 4:** Procurement (Feb 15-Mar 1)\n**Stage 5:** Signature (Mar 15)',
                    identifyPain: 'Near-breach Q3 2025 (ransomware blocked just in time). Board mandated security upgrade. Cyber insurance renewal at risk (Mar 30). CTO personally accountable. ¬£2.5M average breach cost in sector.',
                    champion: 'Rachel Kim, CISO - Executive sponsor, built business case with ¬£2.5M risk quantification. Strong coach (8/10), navigating board politics.',
                    competition: 'CrowdStrike (more expensive at ¬£285K), Palo Alto (18-month contract minimum), Current MSP (insufficient SOC capability)',
                    score: 72,
                    stageHistory: [{stage: 'discovery', date: '2025-10-20'}, {stage: 'qualification', date: '2025-11-15'}, {stage: 'proposal', date: '2025-12-10'}]
                },
                {
                    id: 'sample-' + Date.now() + '-9',
                    dealName: 'EduLearn - LMS Platform',
                    dealValue: 68000,
                    closeDate: '2026-07-31',
                    createdDate: '2025-12-15',
                    salesRep: 'James Wilson',
                    dealStage: 'discovery',
                    forecastCategory: 'pipeline',
                    metrics: 'Current: Manual training tracking, no completion visibility, 40% completion rate\n\nDesired: >80% completion, automated tracking, compliance reporting\n\nNot quantified yet',
                    economicBuyer: 'Uncertain - Speaking with L&D Manager but unclear if they have budget authority',
                    decisionCriteria: 'Not yet defined - still gathering requirements',
                    decisionProcess: 'Unknown - L&D Manager says "exploring options for next fiscal year"',
                    identifyPain: '40% training completion rate causing compliance concerns. Manual tracking taking 2 days/month. But no hard deadline or compelling event identified.',
                    champion: 'None - L&D Manager is contact but not actively championing',
                    competition: 'Cornerstone (mentioned), others unknown',
                    score: 28,
                    stageHistory: [{stage: 'discovery', date: '2025-12-15'}]
                },
                {
                    id: 'sample-' + Date.now() + '-10',
                    dealName: 'LogiTrans - Fleet Management',
                    dealValue: 156000,
                    closeDate: '2026-04-30',
                    createdDate: '2025-11-10',
                    salesRep: 'Sarah Chen',
                    dealStage: 'qualification',
                    forecastCategory: 'best-case',
                    metrics: 'Current: No GPS tracking, manual routing, 18% fuel waste, 72% on-time delivery\n\nTarget: Real-time tracking, AI routing, <8% fuel waste, >92% on-time\n\nQuantified: Save ¬£240K annually fuel, ¬£85K efficiency, improve revenue ¬£180K (better on-time)',
                    economicBuyer: 'David Martinez, Operations Director - Budget authority, board pressure to improve margins. Growth mode, sees this as strategic. Rating 7/10.',
                    decisionCriteria: '1. Real-time GPS all 85 vehicles\n2. AI-powered routing\n3. Driver mobile app\n4. Integration with dispatch system\n5. <90 day implementation',
                    decisionProcess: 'Stage 1 - Technical validation (Jan-Feb): IT validates integration\nStage 2 - Pilot (Feb-Mar): 10-vehicle pilot\nStage 3 - Business case (Mar 15): CFO approval\nStage 4 - Contract (Apr 1-30)',
                    identifyPain: '18% fuel waste (¬£240K annually). 72% on-time delivery (target 92%) causing customer complaints. Board mandate to improve margins. Competition winning on delivery reliability.',
                    champion: 'Maria Santos, Fleet Manager - Day-to-day driver, coordinating pilot. Good relationship (7/10), understands drivers\' needs.',
                    competition: 'Verizon Connect (more expensive), Samsara (stronger in US than UK), Status quo (unacceptable per board)',
                    score: 62,
                    stageHistory: [{stage: 'discovery', date: '2025-11-10'}, {stage: 'qualification', date: '2025-12-01'}]
                }
            ];
            
            const allDeals = [...existingDeals, ...sampleDeals];
            localStorage.setItem('meddicc_deals', JSON.stringify(allDeals));
            
            console.log('Sample deals loaded:', allDeals.length, 'total deals');
            console.log('Reps:', [...new Set(allDeals.map(d => d.salesRep))].filter(r => r));
            
            updateDealCount();
            
            // Always refresh Pipeline Review dropdown so it's ready
            loadReviewMode();
            
            if (currentMode === 'manager') {
                loadManagerDashboard();
            }
            
            alert('‚úÖ 10 Sample Deals Loaded!\n\nReps: Sarah Chen (4 deals), Michael Rodriguez (3 deals), James Wilson (3 deals)\n\nSwitch to Pipeline Review mode to see them organized by rep!');
        }
        
        function exportData() {
            const deals = getDeals();
            
            if (deals.length === 0) {
                alert('No deals to export');
                return;
            }
            
            const headers = [
                'Deal Name',
                'Deal Value (¬£)',
                'Close Date (YYYY-MM-DD)',
                'Created Date (YYYY-MM-DD)',
                'Sales Rep',
                'Deal Stage',
                'Forecast Category',
                'Metrics',
                'Economic Buyer',
                'Decision Criteria',
                'Decision Process',
                'Identify Pain',
                'Champion',
                'Competition'
            ];
            
            const csv = [
                headers.join(','),
                ...deals.map(d => [
                    d.dealName || '',
                    d.dealValue || '',
                    d.closeDate || '',
                    d.createdDate || '',
                    d.salesRep || '',
                    d.dealStage || '',
                    d.forecastCategory || '',
                    d.metrics || '',
                    d.economicBuyer || '',
                    d.decisionCriteria || '',
                    d.decisionProcess || '',
                    d.identifyPain || '',
                    d.champion || '',
                    d.competition || ''
                ].map(field => `"${String(field).replace(/"/g, '""')}"`).join(','))
            ].join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `meddicc-export-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Rule-Based AI Coaching Engine
        function getAICoaching() {
            const score = calculateDealScore();
            const analysis = analyzeQualification();
            
            let coaching = `**DEAL QUALIFICATION ANALYSIS**\n\n`;
            coaching += `**Overall Score: ${score}% - ${analysis.status}**\n\n`;
            
            // What's Strong
            if (analysis.strengths.length > 0) {
                coaching += `**‚úì What's Strong:**\n`;
                analysis.strengths.forEach(s => coaching += `‚Ä¢ ${s}\n`);
                coaching += `\n`;
            }
            
            // Critical Gaps
            if (analysis.gaps.length > 0) {
                coaching += `**‚ö†Ô∏è Critical Gaps:**\n`;
                analysis.gaps.forEach(g => coaching += `‚Ä¢ ${g}\n`);
                coaching += `\n`;
            }
            
            // Questions to Ask Next
            coaching += `**üéØ Questions to Ask Next:**\n`;
            const questions = generateQuestions();
            questions.forEach(q => coaching += `${q}\n`);
            coaching += `\n`;
            
            // Red Flags
            if (analysis.redFlags.length > 0) {
                coaching += `**üö© Red Flags:**\n`;
                analysis.redFlags.forEach(f => coaching += `‚Ä¢ ${f}\n`);
                coaching += `\n`;
            }
            
            // Next Actions
            coaching += `**üìã Next Actions:**\n`;
            const actions = generateNextActions();
            actions.forEach(a => coaching += `‚Ä¢ ${a}\n`);
            
            showInsights(coaching);
        }

        function analyzeQualification() {
            const score = calculateDealScore();
            let status = 'High Risk - Needs Immediate Attention';
            let strengths = [];
            let gaps = [];
            let redFlags = [];
            
            if (score >= 75) {
                status = 'Well Qualified - Ready to Progress';
            } else if (score >= 50) {
                status = 'Moderate Risk - Strengthen Key Areas';
            }
            
            // Analyze Metrics
            if (dealData.metrics) {
                if (/\d+/.test(dealData.metrics) && /[$‚Ç¨¬£]/.test(dealData.metrics)) {
                    strengths.push('Metrics are quantified with specific numbers and currency values');
                } else if (/\d+/.test(dealData.metrics)) {
                    gaps.push('Metrics lack currency/financial impact - convert to ¬£ value');
                } else {
                    gaps.push('Metrics are not quantified - need specific numbers');
                }
            } else {
                gaps.push('No metrics documented - this is critical for justifying ROI');
                redFlags.push('Cannot justify purchase without quantified business impact');
            }
            
            // Analyze Economic Buyer
            if (dealData.economicBuyer) {
                if (/(cfo|ceo|cto|cio)/i.test(dealData.economicBuyer)) {
                    strengths.push('Economic Buyer identified at C-level - strong buying authority');
                } else if (/(vp|director|head)/i.test(dealData.economicBuyer)) {
                    strengths.push('Economic Buyer identified at VP/Director level');
                    if (parseFloat(dealData.dealValue) > 50000) {
                        gaps.push('Deal value >¬£50K but EB is not C-level - verify spending authority');
                    }
                } else {
                    gaps.push('Economic Buyer title unclear - confirm their spending authority');
                }
                
                if (!/(access|meeting|scheduled|confirmed)/i.test(dealData.economicBuyer)) {
                    redFlags.push('No evidence of direct access to Economic Buyer');
                }
            } else {
                gaps.push('Economic Buyer not identified - who signs the contract?');
                redFlags.push('Cannot close without knowing who controls budget');
            }
            
            // Analyze Decision Criteria
            if (dealData.decisionCriteria) {
                const criteriaCount = dealData.decisionCriteria.split(/[,;]/).filter(c => c.trim().length > 5).length;
                if (criteriaCount >= 3) {
                    strengths.push(`${criteriaCount} decision criteria documented - comprehensive evaluation framework`);
                } else if (criteriaCount >= 1) {
                    gaps.push('Only 1-2 decision criteria - dig deeper on their evaluation process');
                }
            } else {
                gaps.push('Decision criteria unknown - how will they choose a vendor?');
                redFlags.push('Risk of last-minute requirements or "no decision"');
            }
            
            // Analyze Decision Process
            if (dealData.decisionProcess) {
                if (/\d+\s*(week|month)/i.test(dealData.decisionProcess)) {
                    strengths.push('Decision timeline documented with specific timeframes');
                } else {
                    gaps.push('Decision process lacks specific timeline - get commitment dates');
                }
                
                if (/(step|stage|phase)/i.test(dealData.decisionProcess)) {
                    strengths.push('Decision process stages identified');
                } else {
                    gaps.push('Decision stages unclear - map out their buying process');
                }
                
                if (!/(legal|procurement|security|compliance)/i.test(dealData.decisionProcess)) {
                    gaps.push('No mention of legal/procurement - these can delay deals');
                }
            } else {
                gaps.push('Decision process not documented - you\'re flying blind');
                redFlags.push('High risk of unexpected delays or derailment');
            }
            
            // Analyze Pain
            if (dealData.identifyPain) {
                if (/(cost|lose|losing|risk|waste|fail|failing)/i.test(dealData.identifyPain)) {
                    strengths.push('Pain includes impact/consequence language - strong urgency');
                } else {
                    gaps.push('Pain lacks urgency or business impact - what happens if they do nothing?');
                }
                
                if (!/(current|today|now)/i.test(dealData.identifyPain)) {
                    gaps.push('Pain may not be current - confirm this is an active problem');
                }
            } else {
                gaps.push('Business pain not articulated - why buy now?');
                redFlags.push('Without pain, there\'s no urgency to change');
            }
            
            // Analyze Champion
            if (dealData.champion) {
                if (/(advocate|promote|sell|champion|support)/i.test(dealData.champion)) {
                    strengths.push('Champion is actively advocating internally');
                } else {
                    gaps.push('Champion role unclear - are they actually selling for you?');
                }
                
                if (/(access|relationship|close|credibility)/i.test(dealData.champion)) {
                    strengths.push('Champion has documented access/credibility with stakeholders');
                } else {
                    gaps.push('Champion influence unclear - can they reach the Economic Buyer?');
                    redFlags.push('Weak champion may not be able to navigate internal politics');
                }
            } else {
                gaps.push('No champion identified - who is selling internally for you?');
                redFlags.push('Deals without champions have <20% win rate');
            }
            
            // Analyze Competition
            if (dealData.competition) {
                if (dealData.competition.length > 50) {
                    strengths.push('Competition thoroughly understood with specific details');
                } else {
                    gaps.push('Competition understanding is superficial - need deeper intel');
                }
                
                if (/(status quo|do nothing|current|existing)/i.test(dealData.competition)) {
                    strengths.push('Status quo acknowledged as competition - shows realistic thinking');
                } else {
                    gaps.push('Don\'t forget status quo - it\'s the biggest competitor');
                }
            } else {
                gaps.push('Competition not assessed - you don\'t know what you\'re up against');
                redFlags.push('Blindness to competition = lost deals');
            }
            
            // Deal-level red flags
            if (dealData.dealStage === 'negotiation' && score < 70) {
                redFlags.push('Deal in Negotiation but qualification is weak - high risk of falling apart');
            }
            
            if (dealData.forecastCategory === 'commit' && score < 75) {
                redFlags.push('Forecasted as Commit but doesn\'t meet 75% threshold');
            }
            
            const closeDate = new Date(dealData.closeDate);
            const daysToClose = Math.floor((closeDate - new Date()) / (1000 * 60 * 60 * 24));
            if (daysToClose < 30 && score < 60) {
                redFlags.push(`Only ${daysToClose} days to close but qualification is weak - unlikely to close on time`);
            }
            
            return { status, strengths, gaps, redFlags };
        }

        function generateQuestions() {
            const questions = [];
            
            // Metrics questions
            if (!dealData.metrics || !/\d+/.test(dealData.metrics)) {
                questions.push('1. "What specific business metrics are you trying to improve? Can you quantify that?"');
                questions.push('2. "If this problem persists for another quarter, what does that cost you?"');
            } else if (!/[$‚Ç¨¬£]/.test(dealData.metrics)) {
                questions.push('1. "You mentioned [metric] - what\'s the financial impact of that?"');
            }
            
            // Economic Buyer questions
            if (!dealData.economicBuyer) {
                questions.push('3. "Who ultimately has to approve this purchase? What\'s their spending authority?"');
            } else if (!/(access|meeting)/i.test(dealData.economicBuyer)) {
                questions.push('3. "When can we get [Economic Buyer] involved in the conversation?"');
                questions.push('4. "What are [Economic Buyer]\'s top 3 priorities this year?"');
            }
            
            // Decision Criteria questions
            if (!dealData.decisionCriteria) {
                questions.push('5. "What criteria will you use to evaluate vendors? What must we prove?"');
                questions.push('6. "Are there any deal-breakers - things that would eliminate a vendor from consideration?"');
            }
            
            // Decision Process questions
            if (!dealData.decisionProcess) {
                questions.push('7. "Walk me through your buying process - what are the steps from here to contract?"');
                questions.push('8. "Who else needs to be involved? Legal? Procurement? IT Security?"');
            } else if (!/\d+\s*(week|month)/i.test(dealData.decisionProcess)) {
                questions.push('7. "What\'s the realistic timeline for each step in your process?"');
            }
            
            // Pain questions
            if (!dealData.identifyPain) {
                questions.push('9. "What happens if you don\'t solve this problem?"');
                questions.push('10. "Why is this a priority right now vs. 6 months from now?"');
            } else if (!/(cost|lose|risk|fail)/i.test(dealData.identifyPain)) {
                questions.push('9. "What\'s at risk if this situation continues?"');
            }
            
            // Champion questions
            if (!dealData.champion) {
                questions.push('11. "Who internally will champion this solution? Who benefits most from success?"');
            } else if (!/(access|credibility)/i.test(dealData.champion)) {
                questions.push('11. "How will [Champion] communicate this to [Economic Buyer]? What\'s their relationship?"');
            }
            
            // Competition questions
            if (!dealData.competition) {
                questions.push('12. "What alternatives are you considering? Even if it\'s doing nothing?"');
            } else if (!/(status quo|current)/i.test(dealData.competition)) {
                questions.push('12. "What would have to happen for you to stick with your current solution?"');
            }
            
            return questions.slice(0, 5); // Return top 5 most relevant
        }

        function generateNextActions() {
            const actions = [];
            const score = calculateDealScore();
            
            if (score < 40) {
                actions.push('URGENT: Schedule discovery call to fill critical qualification gaps');
                actions.push('Do NOT progress this deal until basic MEDDICC is complete');
            }
            
            if (!dealData.metrics || !/\d+/.test(dealData.metrics)) {
                actions.push('Get quantified metrics - send ROI calculator or TCO analysis');
            }
            
            if (!dealData.economicBuyer) {
                actions.push('Identify Economic Buyer through org chart research or Champion');
            } else if (!/(access|meeting)/i.test(dealData.economicBuyer)) {
                actions.push('Request Executive Briefing with Economic Buyer before proposal');
            }
            
            if (!dealData.champion || dealData.champion.length < 30) {
                actions.push('Develop Champion - provide them with internal selling materials');
            }
            
            if (!dealData.decisionProcess) {
                actions.push('Map decision process with Champion - identify all stakeholders');
            }
            
            if (!dealData.competition) {
                actions.push('Research competition - check G2, LinkedIn, recent wins/losses');
            }
            
            if (dealData.dealStage === 'proposal' && score < 60) {
                actions.push('HOLD: Do not send proposal until qualification reaches 60%+');
            }
            
            if (dealData.dealStage === 'negotiation' && score < 70) {
                actions.push('RISK: Re-qualify before finalizing terms - weak foundation');
            }
            
            return actions.slice(0, 4); // Return top 4 most critical
        }

        function generateChampionEmail() {
            if (!dealData.champion) {
                alert('Please fill in Champion information first');
                return;
            }
            
            const championName = dealData.champion.split(/[,\n]/)[0].trim();
            const companyName = dealData.dealName.split('-')[0].trim();
            
            let email = `**CHAMPION ENABLEMENT EMAIL**\n\n`;
            email += `Subject: Helping You Make the Case for [Solution]\n\n`;
            email += `Hi ${championName},\n\n`;
            
            if (dealData.identifyPain) {
                email += `Thanks for the great conversation about the challenges ${companyName} is facing around ${dealData.identifyPain.substring(0, 100)}${dealData.identifyPain.length > 100 ? '...' : ''}.\n\n`;
            }
            
            if (dealData.metrics && /\d+/.test(dealData.metrics)) {
                email += `Based on our discussion, I've put together a one-pager showing how we can help you achieve ${dealData.metrics}. `;
            } else {
                email += `I've put together a one-pager showing how we can address your key priorities. `;
            }
            
            email += `This should help when you discuss this with ${dealData.economicBuyer ? dealData.economicBuyer.split(/[,\n]/)[0].trim() : 'your leadership team'}.\n\n`;
            
            email += `**Key points to emphasize:**\n`;
            if (dealData.metrics) {
                email += `‚Ä¢ Business impact: ${dealData.metrics.substring(0, 80)}\n`;
            }
            if (dealData.identifyPain) {
                email += `‚Ä¢ Current pain point: ${dealData.identifyPain.substring(0, 80)}\n`;
            }
            if (dealData.decisionCriteria) {
                email += `‚Ä¢ Meets your criteria: ${dealData.decisionCriteria.substring(0, 80)}\n`;
            }
            
            email += `\n`;
            
            if (dealData.economicBuyer) {
                email += `Would it be helpful to set up a brief call with ${dealData.economicBuyer.split(/[,\n]/)[0].trim()} to walk through the business case?\n\n`;
            } else {
                email += `What questions do you anticipate from your leadership team? Happy to help you prepare.\n\n`;
            }
            
            email += `Best regards,\n[Your Name]\n\n`;
            email += `---\n*Customize this email with specific details from your conversations*`;
            
            showInsights(email);
        }

        function generateEBEmail() {
            if (!dealData.economicBuyer) {
                alert('Please fill in Economic Buyer information first');
                return;
            }
            
            const ebName = dealData.economicBuyer.split(/[,\n]/)[0].trim();
            const companyName = dealData.dealName.split('-')[0].trim();
            
            let email = `**ECONOMIC BUYER EMAIL**\n\n`;
            email += `Subject: ${companyName} - ${dealData.metrics ? 'Business Impact' : 'Executive Summary'}\n\n`;
            email += `Hi ${ebName},\n\n`;
            
            if (dealData.champion) {
                const championName = dealData.champion.split(/[,\n]/)[0].trim();
                email += `I've been working with ${championName} on ${companyName}'s `;
            } else {
                email += `I wanted to reach out regarding ${companyName}'s `;
            }
            
            if (dealData.identifyPain) {
                email += `${dealData.identifyPain.substring(0, 100).toLowerCase()}${dealData.identifyPain.length > 100 ? '...' : ''}.\n\n`;
            } else {
                email += `business priorities.\n\n`;
            }
            
            email += `**Business Impact:**\n`;
            if (dealData.metrics) {
                email += `${dealData.metrics}\n\n`;
            } else {
                email += `[Insert quantified ROI/business impact here]\n\n`;
            }
            
            if (dealData.decisionCriteria) {
                email += `**Alignment with Your Criteria:**\n`;
                dealData.decisionCriteria.split(/[,;]/).slice(0, 3).forEach(criteria => {
                    email += `‚Ä¢ ${criteria.trim()}\n`;
                });
                email += `\n`;
            }
            
            if (dealData.decisionProcess && /\d+\s*(week|month)/i.test(dealData.decisionProcess)) {
                const timeline = dealData.decisionProcess.match(/\d+\s*(week|month)/i)[0];
                email += `**Next Steps:**\n`;
                email += `I understand your team is working toward a decision within ${timeline}. `;
            } else {
                email += `**Next Steps:**\n`;
            }
            
            if (dealData.closeDate) {
                email += `I'd welcome the opportunity to discuss this before your ${new Date(dealData.closeDate).toLocaleDateString()} target date.\n\n`;
            } else {
                email += `I'd welcome the opportunity to discuss how this aligns with your strategic priorities.\n\n`;
            }
            
            email += `Would you have 15 minutes this week for a brief conversation?\n\n`;
            email += `Best regards,\n[Your Name]\n\n`;
            email += `---\n*Keep it concise - executives skim emails. Lead with business value.*`;
            
            showInsights(email);
        }

        function showInsights(text) {
            document.getElementById('insights-container').innerHTML = `
                <div style="padding: 1.5rem; background: rgba(10,22,40,0.95); border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); white-space: pre-wrap; line-height: 1.6; color: rgba(255,255,255,0.9); box-shadow: 0 12px 28px rgba(0,0,0,0.45);">
                    ${text}
                </div>
            `;
        }

        function showRiskScore() {
            const score = calculateDealScore();
            const status = score >= 75 ? 'Well Qualified' : score >= 50 ? 'Moderate Risk' : 'High Risk';
            const requirements = getMissingRequirements(75);
            
            const insights = `**DEAL RISK ANALYSIS**

Score: ${score}% - ${status}

Requirements Status:
${requirements.map(req => `${req.met ? '‚úì' : '‚úó'} ${req.text}`).join('\n')}

${score < 75 ? '\nRecommendation: Address missing requirements before advancing deal stage.' : '\nDeal meets qualification standards for progression.'}`;
            
            document.getElementById('insights-container').innerHTML = `<div style="padding: 1.5rem; background: #f8fafc; border-radius: 8px; border: 2px solid #e2e8f0; white-space: pre-wrap;">${insights}</div>`;
        }
    </script>


</body></html>
