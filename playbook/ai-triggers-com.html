<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Account Research & Discovery - BearOps</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: radial-gradient(circle at top left, #1f2937 0%, #020617 55%, #000 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            margin-bottom: 26px;
            padding: 24px 20px 26px;
            border-radius: 22px;
            background:
                radial-gradient(circle at top left, rgba(96, 165, 250, 0.35), transparent 55%),
                radial-gradient(circle at top right, rgba(34, 197, 94, 0.28), transparent 60%),
                linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
            border: 1px solid rgba(148, 163, 184, 0.6);
            box-shadow: 0 24px 60px rgba(15, 23, 42, 0.9);
            position: relative;
            overflow: hidden;
        }

        .header::after {
            content: "";
            position: absolute;
            inset: 0;
            opacity: 0.12;
            background-image: radial-gradient(circle at 1px 1px, rgba(148, 163, 184, 0.7) 0, transparent 0.9px);
            background-size: 18px 18px;
            pointer-events: none;
        }

        .header > * {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 1.9rem;
            color: white;
            margin-bottom: 10px;
            line-height: 1.25;
        }

        .header h1 span {
            background: linear-gradient(135deg, #a855f7, #6366f1, #22c55e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 0.95rem;
            color: #94a3b8;
        }

        /* Tab Navigation */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.4);
            overflow-x: auto;
            padding-bottom: 0;
        }

        .tab {
            padding: 15px 25px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            color: #94a3b8;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            position: relative;
        }

        .tab:hover {
            background: rgba(30, 64, 175, 0.3);
            color: #e2e8f0;
        }

        .tab.active {
            background: linear-gradient(135deg, #6366f1, #22c55e);
            color: white;
            border-color: #6366f1;
        }

        .tab.completed::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 5px;
            color: #22c55e;
            font-size: 0.8em;
        }

        .tab.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: rgba(15, 23, 42, 0.96);
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            padding: 16px 16px 18px;
            box-shadow: 0 24px 60px rgba(15, 23, 42, 0.9);
            position: relative;
            overflow: hidden;
            margin-bottom: 25px;
        }

        .card::before {
            content: "";
            position: absolute;
            inset: 0;
            opacity: 0.08;
            background: radial-gradient(circle at top left, rgba(96, 165, 250, 0.7), transparent 60%);
            pointer-events: none;
        }

        .card > * {
            position: relative;
            z-index: 1;
        }

        .card h2 {
            color: #bfdbfe;
            font-size: 1.05rem;
            margin-bottom: 15px;
        }

        .card h3 {
            color: #a5b4fc;
            font-size: 0.98rem;
            margin: 20px 0 10px 0;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #cbd5e0;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(15, 23, 42, 0.8);
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Buttons */
        .btn {
            border-radius: 999px;
            padding: 11px 20px;
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1, #22c55e);
            color: #f9fafb;
            box-shadow: 0 16px 36px rgba(37, 99, 235, 0.6);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.75);
        }

        .btn-secondary {
            background: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            border: 1px solid rgba(148, 163, 184, 0.7);
        }

        .btn-secondary:hover {
            background: rgba(30, 64, 175, 0.5);
            border-color: #6366f1;
        }

        .btn-success {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: #f9fafb;
            box-shadow: 0 16px 36px rgba(34, 197, 94, 0.6);
        }

        .btn-success:hover {
            transform: translateY(-1px);
            box-shadow: 0 20px 40px rgba(34, 197, 94, 0.75);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        /* Prompt Box */
        .prompt-box {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .prompt-box h4 {
            color: #a78bfa;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .prompt-box p {
            color: #cbd5e0;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .prompt-box pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            white-space: pre-wrap;
            color: #e0e7ff;
            font-size: 0.9em;
            line-height: 1.6;
            border: 1px solid rgba(99, 102, 241, 0.2);
            max-height: 400px;
            overflow-y: auto;
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: #5568d3;
        }

        /* Progress Indicator */
        .progress-bar {
            background: rgba(148, 163, 184, 0.2);
            height: 6px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.5s;
        }

        /* Status Messages */
        .status-message {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .status-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #93c5fd;
        }

        .status-success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #86efac;
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #fcd34d;
        }

        /* Generated Content */
        .generated-content {
            background: rgba(34, 197, 94, 0.05);
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .generated-content h4 {
            color: #86efac;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .generated-content .challenge {
            background: rgba(15, 23, 42, 0.6);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .generated-content .challenge h5 {
            color: #a78bfa;
            margin-bottom: 10px;
        }

        .generated-content ul {
            margin-left: 20px;
            color: #cbd5e0;
            line-height: 1.8;
        }

        .edit-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #94a3b8;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #cbd5e0;
        }

        .empty-state p {
            font-size: 1.1em;
            margin-bottom: 25px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .button-group {
                flex-direction: column;
            }

            .tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    
        /* ICP Builder styles */
.icp-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .icp-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.15), transparent);
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #93c5fd;
      margin-bottom: 12px;
    }

    .icp-title {
      font-size: 1.9rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin-bottom: 6px;
      background: linear-gradient(135deg, #60a5fa, #f97316);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .icp-subtitle {
      font-size: 0.95rem;
      color: #9ca3af;
      max-width: 620px;
      margin: 0 auto;
    }

    .icp-shell {
      margin-top: 20px;
      border-radius: 24px;
      padding: 24px;
      background:
        radial-gradient(circle at top left, rgba(251, 146, 60, 0.2), transparent 55%),
        linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 24px 80px rgba(15, 23, 42, 0.8);
    }

    .icp-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .icp-controls small {
      font-size: 0.74rem;
      color: #9ca3af;
    }

    .btn-chip {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.78rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-chip.primary {
      border-color: rgba(96, 165, 250, 0.9);
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.3), rgba(15, 23, 42, 0.95));
      color: #bfdbfe;
    }

    .icp-summary {
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.12), rgba(251, 146, 60, 0.08));
      border-radius: 16px;
      padding: 16px 18px;
      border: 1px solid rgba(251, 146, 60, 0.5);
      margin-bottom: 18px;
    }

    .icp-summary h3 {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 6px;
      color: #fed7aa;
    }

    .icp-summary p {
      font-size: 0.92rem;
      line-height: 1.5;
      color: #e5e7eb;
    }

    .icp-meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    .icp-meta-item {
      padding: 8px 10px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 0.82rem;
    }

    .icp-meta-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-size: 0.7rem;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .icp-meta-value {
      color: #e5e7eb;
      min-height: 1.2em;
    }

    /* Accordion */

    .accordion {
      margin-top: 10px;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(51, 65, 85, 0.9);
    }

    .accordion-item + .accordion-item {
      border-top: 1px solid rgba(30, 64, 175, 0.6);
    }

    .accordion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      cursor: pointer;
      background: radial-gradient(circle at top left, rgba(30, 64, 175, 0.5), rgba(15, 23, 42, 0.95));
    }

    .accordion-header:hover {
      background: radial-gradient(circle at top left, rgba(249, 115, 22, 0.7), rgba(15, 23, 42, 0.98));
    }

    .accordion-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .accordion-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(254, 215, 170, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      color: #fed7aa;
      flex-shrink: 0;
      background: rgba(15, 23, 42, 0.9);
      transition: transform 0.2s ease;
    }

    .accordion-content {
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.98));
      padding: 14px 16px 18px;
      display: none;
    }

    .accordion-item.open .accordion-content {
      display: block;
    }

    .accordion-item.open .accordion-icon {
      transform: rotate(90deg);
    }

    .accordion-columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 14px;
      font-size: 0.88rem;
      color: #d1d5db;
    }

    .accordion-columns h4 {
      font-size: 0.86rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .icp-list {
      list-style: none;
      padding-left: 0;
      min-height: 1.4em;
    }

    .icp-list li {
      padding-left: 16px;
      position: relative;
      margin-bottom: 4px;
      line-height: 1.4;
    }

    .icp-list li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 4px;
      top: 0;
      color: #fb923c;
    }

    .icp-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      min-height: 1.4em;
    }

    .icp-badge {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
    }

    .muted {
      color: #9ca3af;
      font-size: 0.8rem;
      margin-top: 6px;
    }

    /* Editable hints */
    [contenteditable="true"] {
      cursor: text;
    }

    [contenteditable="true"]:focus {
      outline: 1px dashed rgba(96, 165, 250, 0.9);
      background: rgba(15, 23, 42, 0.8);
    }

    /* AI Prompt helpers */
    .icp-prompt-card {
      margin-top: 20px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 16px;
      border: 1px solid rgba(168, 85, 247, 0.4);
      padding: 16px 16px 18px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
    }

    .icp-prompt-card h3 {
      color: #a78bfa;
      font-size: 0.98rem;
      margin-bottom: 10px;
    }

    .icp-prompt-card p {
      color: #cbd5e0;
      font-size: 0.86rem;
      margin-bottom: 10px;
    }

    .icp-prompt-box {
      position: relative;
      margin-top: 10px;
    }

    .icp-prompt-box pre {
      background: rgba(0, 0, 0, 0.4);
      padding: 12px;
      border-radius: 10px;
      overflow-x: auto;
      white-space: pre-wrap;
      color: #e0e7ff;
      font-size: 0.85rem;
      line-height: 1.6;
      border: 1px solid rgba(99, 102, 241, 0.35);
      max-height: 320px;
      overflow-y: auto;
    }

    .icp-copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #667eea;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 600;
      transition: all 0.2s;
    }

    .icp-copy-btn:hover {
      background: #5568d3;
    }

    @media (max-width: 640px) {
      .icp-shell { padding: 18px; }
      .icp-controls { flex-direction: column; align-items: flex-start; }
    }
  
</style>
</head>
<body>
   <!-- Overlaid logo (doesn't change layout) -->
        <img src="../assets/images/BearOps_Logo_Default.png">
<div style="max-width: 1400px; margin: 0 auto; padding: 32px 18px 60px;">
    <!-- HEADER NAV -->
    <header style="display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 28px; flex-wrap: wrap;">
        <div style="display: flex; align-items: center; gap: 14px;">
            <div style="font-size: 1.35rem; letter-spacing: 0.04em; text-transform: uppercase; font-weight: bold;">
                AI Research Module
            </div>
        </div>
        <nav style="display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="Outbound-Engine-Updated.html" style="font-size: 0.8rem; text-decoration: none; color: #94a3b8; border-radius: 999px; padding: 6px 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.85); transition: all 0.2s ease;">
                ‚Üê Back to Engine
            </a>
        </nav>
    </header>

    <div class="container">
        <div class="header">
            <h1>AI-Powered <span>Account Research</span> & Discovery</h1>
            <p>Research accounts in 5 minutes, generate comprehensive discovery, and create personalized outreach</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('icp-builder')" data-tab="icp-builder">
                üéØ ICP Builder
            </button>
            <button class="tab" onclick="switchTab('account-intel')" data-tab="account-intel">
                üîç Account Intel
            </button>
            <button class="tab" onclick="switchTab('discovery')" data-tab="discovery">
                üìä Discovery Framework
            </button>
            <button class="tab" onclick="switchTab('messaging')" data-tab="messaging">
                ‚úâÔ∏è Messaging & Scripts
            </button>
            <button class="tab" onclick="switchTab('results')" data-tab="results">
                üìà Results Tracker
            </button>
        </div>

        
        <!-- TAB 0: ICP Builder -->
        <div class="tab-content active" id="icp-builder">
            <div class="card">
<header class="icp-header">
      <div class="icp-pill">
        <span>üêª BearOps</span>
        <span>ICP Builder</span>
      </div>
      <h1 class="icp-title">Ideal Customer Profile ‚Äì Builder</h1>
      <p class="icp-subtitle">
        Click into any block to edit. Save to browser when you‚Äôre happy. Other BearOps tools can read this ICP
        (firmographics, technographics, triggers, disqualifiers, archetypes) via <code>bearops_icp</code>.
      </p>
    </header>

    <section class="icp-shell">
      <div class="icp-controls">
        <small>
          This is your <strong>master ICP</strong> for this browser. Use it to drive your research, discovery,
          messaging and territory tools.
        </small>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
          <button type="button" class="btn-chip primary" id="btnSaveICP">üíæ Save ICP</button>
          <button type="button" class="btn-chip" id="btnResetICP">‚ôª Reset to Template</button>
        </div>
      </div>

      <!-- Snapshot -->
      <div class="icp-summary">
        <h3>Snapshot</h3>
        <p id="icp-snapshot" contenteditable="true">
          <strong>[Describe your primary ICP in one sentence]</strong> ‚Äì e.g. ‚ÄúSeries A‚ÄìC B2B SaaS companies
          in UK&amp;I with 50‚Äì500 FTE, selling into mid-market/enterprise, where a new VP Sales or CRO is
          responsible for doubling ARR in the next 12‚Äì18 months.‚Äù
        </p>
      </div>

      <!-- Quick meta -->
      <div class="icp-meta-grid">
        <div class="icp-meta-item">
          <div class="icp-meta-label">Core Buyer</div>
          <div class="icp-meta-value" id="icp-meta-coreBuyer" contenteditable="true">
            [e.g. VP Sales, CRO, COO, CFO, CISO]
          </div>
        </div>
        <div class="icp-meta-item">
          <div class="icp-meta-label">Org Type</div>
          <div class="icp-meta-value" id="icp-meta-orgType" contenteditable="true">
            [e.g. B2B SaaS, Fintech, MedTech, Enterprise IT, Public Sector]
          </div>
        </div>
        <div class="icp-meta-item">
          <div class="icp-meta-label">Size / Scale</div>
          <div class="icp-meta-value" id="icp-meta-size" contenteditable="true">
            [e.g. 50‚Äì500 FTE; ‚Ç¨5‚Äì‚Ç¨50m ARR; multi-region]
          </div>
        </div>
        <div class="icp-meta-item">
          <div class="icp-meta-label">Engagement Model</div>
          <div class="icp-meta-value" id="icp-meta-engagement" contenteditable="true">
            [e.g. high-touch sales; PLG assist; partner-led; hybrid]
          </div>
        </div>
      </div>

      <!-- Accordion -->
      <div class="accordion" id="icpAccordion">

        <!-- Firmographics -->
        <div class="accordion-item open">
          <div class="accordion-header">
            <div class="accordion-title">
              <span>Firmographics</span>
            </div>
            <div class="accordion-icon">&gt;</div>
          </div>
          <div class="accordion-content">
            <div class="accordion-columns">
              <div>
                <h4>Organisation basics</h4>
                <ul class="icp-list" id="icp-firmo" contenteditable="true">
                  <li>[Target industries / verticals (e.g. SaaS, FinServ, Manufacturing, Public Sector)]</li>
                  <li>[Employee bands (e.g. 50‚Äì200 / 200‚Äì1,000 / 1,000+)]</li>
                  <li>[Revenue or ARR thresholds (e.g. ‚Ç¨5m‚Äì‚Ç¨100m)]</li>
                  <li>[Regions you can sell into (e.g. UK&amp;I, DACH, Nordics, US East)]</li>
                  <li>[Ownership: VC-backed, PE-backed, listed, private, public body]</li>
                </ul>
              </div>
              <div>
                <h4>Market &amp; governance profile</h4>
                <ul class="icp-list" id="icp-firmo-extra" contenteditable="true">
                  <li>[Regulatory context, if any (e.g. FCA, GDPR, HIPAA, ISO)]</li>
                  <li>[Buying maturity (e.g. has formal buying committees / RFP process)]</li>
                  <li>[Complexity (e.g. multi-entity, multi-region, multi-product)]</li>
                  <li>[Competitive intensity / stakes if they get this wrong]</li>
                </ul>
                <div class="icp-badge-row" id="icp-tiers" contenteditable="true">
                  <span class="icp-badge">[Tier 1]</span>
                  <span class="icp-badge">[Tier 2]</span>
                  <span class="icp-badge">[Tier 3]</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Technographics -->
        <div class="accordion-item">
          <div class="accordion-header">
            <div class="accordion-title">
              <span>Technographics</span>
            </div>
            <div class="accordion-icon">&gt;</div>
          </div>
          <div class="accordion-content">
            <div class="accordion-columns">
              <div>
                <h4>Current stack</h4>
                <ul class="icp-list" id="icp-techno" contenteditable="true">
                  <li>[Core platforms they already use (e.g. Salesforce, HubSpot, NetSuite, Azure, AWS)]</li>
                  <li>[Adjacent tools you integrate with or replace]</li>
                  <li>[How they currently solve the problem (in-house / spreadsheets / competitor)]</li>
                  <li>[Security / compliance constraints (data residency, BYO cloud, etc.)]</li>
                </ul>
              </div>
              <div>
                <h4>Target profile</h4>
                <ul class="icp-list" id="icp-techno-extra" contenteditable="true">
                  <li>[Ideal tech stance (e.g. cloud-first, API-friendly, open to new vendors)]</li>
                  <li>[Preferred integrations / ecosystem (e.g. Salesforce AppExchange, Azure, GCP)]</li>
                  <li>[Data readiness (e.g. basic, intermediate, advanced analytics)]</li>
                  <li>[Change appetite: ‚Äúmust modernise now‚Äù vs ‚Äúslow &amp; cautious‚Äù]</li>
                </ul>
                <p class="muted" id="icp-techno-notes" contenteditable="true">
                  Tech stance: note anything that consistently makes deals easier or harder (e.g. on-prem only,
                  strict InfoSec, heavy procurement).
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Triggers -->
        <div class="accordion-item">
          <div class="accordion-header">
            <div class="accordion-title">
              <span>Positive Triggers</span>
            </div>
            <div class="accordion-icon">&gt;</div>
          </div>
          <div class="accordion-content">
            <div class="accordion-columns">
              <div>
                <h4>Business &amp; market triggers</h4>
                <ul class="icp-list" id="icp-triggers" contenteditable="true">
                  <li>[New funding round, IPO, major acquisition or spin-out]</li>
                  <li>[Aggressive growth targets or new market expansion plans]</li>
                  <li>[New product launch, pricing change or GTM motion]</li>
                  <li>[Regulatory change or external shock creating urgency]</li>
                </ul>
              </div>
              <div>
                <h4>Operational &amp; people triggers</h4>
                <ul class="icp-list" id="icp-triggers-extra" contenteditable="true">
                  <li>[New exec hire (e.g. CRO, CMO, CISO, COO) with a clear mandate]</li>
                  <li>[Complaints about current tools / processes being slow, manual or risky]</li>
                  <li>[Tool consolidation projects or vendor rationalisation]</li>
                  <li>[High churn, low win-rates, or internal pressure for better visibility]</li>
                </ul>
                <div class="icp-badge-row" id="icp-trigger-tags" contenteditable="true">
                  <span class="icp-badge">[‚ÄúGo now‚Äù triggers]</span>
                  <span class="icp-badge">[‚ÄúMonitor‚Äù triggers]</span>
                  <span class="icp-badge">[Expansion triggers]</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Disqualifiers -->
        <div class="accordion-item">
          <div class="accordion-header">
            <div class="accordion-title">
              <span>Disqualifiers / Anti-ICP</span>
            </div>
            <div class="accordion-icon">&gt;</div>
          </div>
          <div class="accordion-content">
            <div class="accordion-columns">
              <div>
                <h4>Organisation level</h4>
                <ul class="icp-list" id="icp-disqual" contenteditable="true">
                  <li>[Too small (e.g. &lt;X FTE / &lt;‚Ç¨Y ARR / no dedicated owner for the problem)]</li>
                  <li>[Wrong model (e.g. B2C only, freelancer, micro-business)]</li>
                  <li>[No clear pain or urgency; ‚Äúnice-to-have‚Äù only]</li>
                </ul>
              </div>
              <div>
                <h4>Commercial &amp; tech constraints</h4>
                <ul class="icp-list" id="icp-disqual-extra" contenteditable="true">
                  <li>[No budget within your deal size range]</li>
                  <li>[‚ÄúCloud-never‚Äù or security stance that conflicts with your product]</li>
                  <li>[Locked into long-term vendor contract with no near-term break clause]</li>
                  <li>[DIY mindset: strong preference to build in-house and proven history of doing so]</li>
                </ul>
                <p class="muted" id="icp-disqual-notes" contenteditable="true">
                  Use these as ‚Äúslow / stop‚Äù flags when scoring accounts and deciding whether to continue outbound.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Example Logo Types -->
        <div class="accordion-item">
          <div class="accordion-header">
            <div class="accordion-title">
              <span>Example Logo Archetypes</span>
            </div>
            <div class="accordion-icon">&gt;</div>
          </div>
          <div class="accordion-content">
            <div class="accordion-columns">
              <div>
                <h4>Commercial archetypes</h4>
                <ul class="icp-list" id="icp-logos" contenteditable="true">
                  <li>[Archetype 1 ‚Äì e.g. ‚ÄúMid-market SaaS: 150‚Äì500 FTE, ‚Ç¨10‚Äì‚Ç¨40m ARR, selling to enterprise‚Äù]</li>
                  <li>[Archetype 2 ‚Äì e.g. ‚ÄúEnterprise: 1,000+ FTE, multi-region, complex buying committees‚Äù]</li>
                  <li>[Archetype 3 ‚Äì e.g. ‚ÄúDigital-native scaleups with strong data stack and experimentation culture‚Äù]</li>
                </ul>
              </div>
              <div>
                <h4>Public / mission-driven archetypes (optional)</h4>
                <ul class="icp-list" id="icp-logos-extra" contenteditable="true">
                  <li>[e.g. ‚ÄúNational regulators with complex stakeholder landscape‚Äù]</li>
                  <li>[e.g. ‚ÄúLarge universities / research institutions‚Äù]</li>
                  <li>[e.g. ‚ÄúHospitals / healthcare groups with X+ sites‚Äù]</li>
                </ul>
                <p class="muted" id="icp-logos-notes" contenteditable="true">
                  Treat these archetypes as ‚Äúcells‚Äù in your TAM / SAM / SOM model ‚Äì each with its own volume,
                  ASP and win-rate assumptions.
                </p>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- AI ASSIST: ICP Prompts -->
<div class="icp-prompt-card">
  <h3>ü§ñ AI Assist ‚Äì Build Out Your ICP Section by Section</h3>
  <p class="muted">
    Copy a prompt, paste into ChatGPT/Claude, then paste the AI‚Äôs output back into the matching ICP accordion.
    Each prompt maps directly to one card: Firmographics, Technographics, Positive Triggers, Disqualifiers, and Logo Archetypes.
  </p>

  <!-- 1. Firmographics -->
  <div class="icp-prompt-box">
    <button type="button" class="icp-copy-btn"
            onclick="copyICPPrompt('icpPromptFirmographics', this)">üìã Copy</button>
    <h4>1. Firmographics (Organisation Basics + Market &amp; Governance Profile)</h4>
    <pre id="icpPromptFirmographics">
You are a senior GTM strategist helping me define the Firmographics section of my ICP.

CONTEXT (snapshot + who we serve):
BearOps‚Äô primary ICP is funded Irish and UK B2B SaaS/tech startups (typically Seed‚ÄìSeries B, 20‚Äì150 employees) whose founders need sharper GTM focus, cleaner revenue operations, and investor-ready execution without hiring a full-time RevOps leader.

Please populate two columns that fit directly into my ICP template:

COLUMN 1 ‚Äì ‚ÄúORGANISATION BASICS‚Äù
- B2B / B2C / business model
- Industries / verticals that are a strong fit
- Typical employee and ARR bands (including ‚Äúexpandable to‚Äù ranges)
- Regions (primary) and ‚Äúexpandable‚Äù regions
- Ownership profile (e.g. EI/VC-backed, founder-led, etc.)
- Any other structural traits that matter for BearOps

COLUMN 2 ‚Äì ‚ÄúMARKET &amp; GOVERNANCE PROFILE‚Äù
- Regulatory context, if any (e.g. FCA, GDPR, ISO) relevant to my ICP
- Buying maturity (e.g. formal buying committees / RFP process)
- Complexity (multi-entity, multi-region, multi-product, etc.)
- Competitive intensity / stakes if they get GTM wrong
- Any governance / investor dynamics that influence GTM decisions

Output:
1. A bullet list under **ORGANISATION BASICS**.
2. A bullet list under **MARKET &amp; GOVERNANCE PROFILE**.
3. Optional 2‚Äì3 short ‚ÄúTier 1 / Tier 2 / Tier 3‚Äù badges that I can show under this card.
    </pre>
  </div>

  <!-- 2. Technographics -->
  <div class="icp-prompt-box">
    <button type="button" class="icp-copy-btn"
            onclick="copyICPPrompt('icpPromptTechnographics', this)">üìã Copy</button>
    <h4>2. Technographics (Current Stack + Target Profile)</h4>
    <pre id="icpPromptTechnographics">
Act as a technographics analyst for BearOps.

CONTEXT:
We help funded Irish and UK B2B SaaS/tech startups (Seed‚ÄìSeries B, 20‚Äì150 employees) clean up GTM, RevOps and investor-facing execution.

I need to fill the ‚ÄúTechnographics‚Äù card in my ICP template with TWO columns:

COLUMN 1 ‚Äì ‚ÄúCURRENT STACK‚Äù
- Typical CRMs, marketing tools, CS tools, analytics and internal tooling my ICP already uses
- How they currently ‚Äúsolve‚Äù RevOps and GTM visibility (e.g. spreadsheets, ad hoc dashboards)
- Common integration gaps or data fragmentation patterns
- Security / compliance constraints that show up in my ICP

COLUMN 2 ‚Äì ‚ÄúTARGET PROFILE‚Äù
- Signals that an account has the right tech stance (cloud-first, API-friendly, centralised data, etc.)
- Signs of readiness for GTM/RevOps work (e.g. hiring ops roles, investing in CRM, recent migrations)
- 5‚Äì10 specific tech or hiring signals I can pick up from LinkedIn, job posts, or websites
- One short paragraph I can paste in as a description of the ideal technographic profile

Output as:
- Bullet list under **CURRENT STACK**
- Bullet list under **TARGET PROFILE**
- A short ‚ÄúTech stance summary‚Äù sentence I can paste into the card notes.
    </pre>
  </div>

  <!-- 3. Positive Triggers -->
  <div class="icp-prompt-box">
    <button type="button" class="icp-copy-btn"
            onclick="copyICPPrompt('icpPromptTriggers', this)">üìã Copy</button>
    <h4>3. Positive Triggers (Commercial/Strategic + Operational/Risk)</h4>
    <pre id="icpPromptTriggers">
You are helping me operationalise my ICP into concrete outbound triggers.

CONTEXT:
BearOps helps funded Irish and UK B2B SaaS/tech startups (Seed‚ÄìSeries B, 20‚Äì150 employees) get sharper GTM focus and RevOps discipline.

I need to fill the ‚ÄúPositive Triggers‚Äù card of my ICP, which has two columns:

COLUMN 1 ‚Äì ‚ÄúCOMMERCIAL / STRATEGIC TRIGGERS‚Äù
- Funding, leadership, strategy, GTM or product events that strongly increase the chance they need BearOps
- Examples: new VP Sales, new CRO, new COO/CFO, new GTM motion, new board/investor pressure, expansion plans

COLUMN 2 ‚Äì ‚ÄúOPERATIONAL / RISK TRIGGERS‚Äù
- Operational issues, risk/compliance signals, or internal chaos that show they need RevOps help
- Examples: missed forecasts, CRM migration pain, pipeline chaos, investor commentary, high churn etc.

Please:
1. Provide 6‚Äì10 triggers split between these two columns.
2. Mark the top 3‚Äì5 as ‚ÄúGO NOW‚Äù triggers that should elevate an account to Tier 1.
3. For each trigger, add a short ‚Äúwhat to look for‚Äù hint (e.g. where I‚Äôd see it publicly).

Output as two bullet lists, clearly labelled with the column names, plus a short ‚ÄúGO NOW triggers:‚Äù list.
    </pre>
  </div>

  <!-- 4. Disqualifiers / Anti-ICP -->
  <div class="icp-prompt-box">
    <button type="button" class="icp-copy-btn"
            onclick="copyICPPrompt('icpPromptDisqualifiers', this)">üìã Copy</button>
    <h4>4. Disqualifiers / Anti-ICP</h4>
    <pre id="icpPromptDisqualifiers">
Help me define a clear Anti-ICP / disqualifier set for BearOps.

CONTEXT:
We serve funded B2B SaaS / tech startups (Seed‚ÄìSeries B, 20‚Äì150 employees, Irish &amp; UK) that want sharper GTM and RevOps.

My ICP template has a ‚ÄúDisqualifiers / Anti-ICP‚Äù card with TWO columns:

COLUMN 1 ‚Äì ‚ÄúORGANISATION LEVEL‚Äù
- Company size / maturity that is too small or too big to be a good BearOps client
- Business models that rarely get value (e.g. pure B2C, services-only, one-off project work)
- Geographic or structural patterns that consistently underperform

COLUMN 2 ‚Äì ‚ÄúCOMMERCIAL &amp; TECH CONSTRAINTS‚Äù
- Budget, pricing or deal-size constraints that make us a poor fit
- Tech or security stances that conflict with how we work
- Behavioural patterns (DIY forever, no appetite for process, anti-consultant culture)

Please:
1. List 5‚Äì8 disqualifiers in each column.
2. Tag each as ‚ÄúHARD STOP‚Äù or ‚ÄúSOFT CAUTION‚Äù.
3. Suggest 3‚Äì5 ‚Äúauto Tier 3 / nurture-only‚Äù rules I can embed in a scoring model.

Output:
- Bullet list under **ORGANISATION LEVEL** (with HARD STOP / SOFT CAUTION tags)
- Bullet list under **COMMERCIAL &amp; TECH CONSTRAINTS**
- A short ‚ÄúScoring rules‚Äù section I can paste into my territory/ICP scoring logic.
    </pre>
  </div>

  <!-- 5. Example Logo Archetypes -->
  <div class="icp-prompt-box">
    <button type="button" class="icp-copy-btn"
            onclick="copyICPPrompt('icpPromptArchetypes', this)">üìã Copy</button>
    <h4>5. Example Logo Archetypes (Tier 1 vs Tier 2/3)</h4>
    <pre id="icpPromptArchetypes">
Act as a GTM advisor helping me articulate example logo archetypes for my ICP.

CONTEXT:
BearOps helps funded Irish and UK B2B SaaS / tech companies (Seed‚ÄìSeries B, 20‚Äì150 employees) fix GTM focus and RevOps.

I need content for the ‚ÄúExample Logo Archetypes‚Äù card in my ICP with TWO columns:

COLUMN 1 ‚Äì ‚ÄúTIER 1 ARCHETYPES‚Äù
- 3‚Äì5 anonymised examples of ideal BearOps clients
- For each, specify: size, funding stage, product type, GTM pain, and why they are Tier 1

COLUMN 2 ‚Äì ‚ÄúTIER 2 / 3 ARCHETYPES‚Äù
- 3‚Äì5 anonymised examples of good but less critical fits
- Include ‚Äúemerging‚Äù or ‚Äúnurture‚Äù examples, where timing/funding/maturity isn‚Äôt yet ideal

Please format output as:
- Bullet list under **TIER 1 ARCHETYPES**
- Bullet list under **TIER 2 / 3 ARCHETYPES**
- One short paragraph explaining how I should USE these archetypes in TAM/SAM/SOM and territory planning.
    </pre>
  </div>
</div>


        <!-- TAB 1: Account Intel -->
        <div class="tab-content" id="account-intel">
            <div class="card">
                <h2>üîç Account Intel</h2>
                <p style="color: #94a3b8; margin-bottom: 25px;">Start by gathering intelligence on your target account. This takes 5 minutes and powers everything else.</p>

                <div class="status-info status-message" id="intelStatus">
                    ‚ÑπÔ∏è Complete this step to unlock Discovery Framework generation
                </div>

                <h3>Step 1: Your Company Info</h3>
                <p style="color: #94a3b8; margin-bottom: 20px;">Tell us about YOUR company so we can align discovery with the problems you solve.</p>

                <div class="form-group">
                    <label>Your Company Name *</label>
                    <input type="text" id="yourCompany" placeholder="e.g., BearOps, TechSolutions" value="BearOps">
                </div>

                <div class="form-group">
                    <label>What Problems Do You Solve? *</label>
                    <textarea id="problemsSolved" placeholder="Describe the key problems your solution addresses...

Example for BearOps:
- Revenue operations chaos in scaling startups
- Lack of structured sales frameworks (MEDDICC, SPIN, Challenger)
- Manual forecasting and territory planning
- Inconsistent pipeline management
- Poor sales-to-CS handoffs
- No scalable coaching or enablement

Be specific - this determines which challenges get surfaced in discovery."
style="min-height: 120px;">We help Series A/B funded startups build scalable revenue frameworks and operations before scaling teams. Key problems we solve:
- Manual revenue forecasting and planning
- Lack of structured sales methodologies (MEDDICC, SPIN, Challenger)
- Inconsistent pipeline management and deal qualification
- Poor territory and quota planning
- Inefficient sales-to-CS handoffs
- No systematic coaching or enablement framework</textarea>
                </div>

                <div class="form-group">
                    <label>Your Target Personas (Comma-separated)</label>
                    <input type="text" id="yourTargetPersonas" placeholder="e.g., CRO, VP Sales, Head of Revenue Ops" value="CRO, VP Sales, Head of Revenue Operations">
                </div>

                <h3 style="margin-top: 35px;">Step 2: Target Account Information</h3>
                <p style="color: #94a3b8; margin-bottom: 20px;">Now tell us about the account you're researching.</p>
                
                <div class="form-group">
                    <label>Target Company Name *</label>
                    <input type="text" id="companyName" placeholder="e.g., Acme Corp, TechStart Inc.">
                </div>

                <div class="form-group">
                    <label>Target Persona *</label>
                    <input type="text" id="targetPersona" placeholder="e.g., CRO, VP Sales, Head of Audit">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Industry</label>
                        <select id="industry">
                            <option value="">Select industry...</option>
                            <option value="Financial Services">Financial Services</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Technology">Technology / SaaS</option>
                            <option value="Manufacturing">Manufacturing</option>
                            <option value="Retail">Retail / E-commerce</option>
                            <option value="Professional Services">Professional Services</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Company Size</label>
                        <select id="companySize">
                            <option value="">Select size...</option>
                            <option value="1-50">1-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-500">201-500 employees</option>
                            <option value="501-1000">501-1,000 employees</option>
                            <option value="1001-5000">1,001-5,000 employees</option>
                            <option value="5000+">5,000+ employees</option>
                        </select>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generateResearchPrompts()">
                        ü§ñ Generate Research Prompts
                    </button>
                </div>

                <div id="researchPrompts" style="display: none;">
                    <h3 style="margin-top: 40px;">Step 2: Run AI Research</h3>
                    <p style="color: #94a3b8; margin-bottom: 20px;">Copy each prompt below, paste into ChatGPT or Claude, then paste the results into Step 3.</p>

                    <div class="prompt-box">
                        <button class="copy-btn" onclick="copyPrompt('prompt1')">üìã Copy</button>
                        <h4>Prompt 1: Company Intelligence</h4>
                        <p>Copy this into ChatGPT/Claude:</p>
                        <pre id="prompt1"></pre>
                    </div>

                    <div class="prompt-box">
                        <button class="copy-btn" onclick="copyPrompt('prompt2')">üìã Copy</button>
                        <h4>Prompt 2: Persona Intelligence</h4>
                        <p>Copy this into ChatGPT/Claude:</p>
                        <pre id="prompt2"></pre>
                    </div>

                    <div class="prompt-box">
                        <button class="copy-btn" onclick="copyPrompt('prompt3')">üìã Copy</button>
                        <h4>Prompt 3: Personalization & Triggers</h4>
                        <p>Copy this into ChatGPT/Claude:</p>
                        <pre id="prompt3"></pre>
                    </div>

                    <h3 style="margin-top: 40px;">Step 3: Paste Research Results</h3>
                    <p style="color: #94a3b8; margin-bottom: 20px;">Paste all the AI responses here. This becomes the foundation for your discovery framework.</p>

                    <div class="form-group">
                        <textarea id="researchResults" placeholder="Paste all AI research results here...

Example:
COMPANY INTELLIGENCE:
- Recent Series B funding ($50M)
- Expanding to 3 new markets
- New CFO hired 2 months ago
...

PERSONA INTELLIGENCE:
- 15 years in audit
- Previously at Big 4
- Active on LinkedIn about GRC topics
..."></textarea>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-success" onclick="saveResearch()">
                            üíæ Save Research
                        </button>
                        <button class="btn btn-primary" onclick="generateDiscovery()" id="generateDiscoveryBtn" disabled>
                            ‚û°Ô∏è Generate Discovery Framework
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: Discovery Framework -->
        <div class="tab-content" id="discovery">
            <div class="card">
                <h2>üìä Discovery Framework</h2>
                <p style="color: #94a3b8; margin-bottom: 25px;">AI-generated discovery framework based on your research. Edit and customize as needed.</p>

                <div id="discoveryEmpty" class="empty-state">
                    <h3>‚ö†Ô∏è Complete Account Intel First</h3>
                    <p>Generate your discovery framework by completing the Account Intel research.</p>
                    <button class="btn btn-primary" onclick="switchTab('account-intel')">
                        ‚Üê Back to Account Intel
                    </button>
                </div>

                <div id="discoveryGenerated" style="display: none;">
                    <div class="status-success status-message">
                        ‚úÖ Discovery framework generated! Review and customize below.
                    </div>

                    <div class="generated-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h4 id="discoveryTitle"></h4>
                            <div class="edit-controls">
                                <button class="btn btn-secondary" onclick="regenerateDiscovery()">
                                    üîÑ Regenerate
                                </button>
                                <button class="btn btn-secondary" onclick="editDiscovery()">
                                    ‚úèÔ∏è Edit
                                </button>
                            </div>
                        </div>

                        <div id="discoveryContent"></div>
                    </div>

                    <div class="card" style="background: rgba(30, 41, 59, 0.6); margin-top: 30px;">
                        <h3>‚úèÔ∏è Your Custom Notes</h3>
                        <p style="color: #94a3b8; margin-bottom: 15px;">Add your specific observations, questions to ask, or customizations based on your research.</p>
                        <div class="form-group">
                            <textarea id="customNotes" placeholder="Add your custom notes here...

Example:
- Ask about their Q4 audit timeline
- Mention our work with [similar company]
- They just hired 3 new auditors - capacity issue?
..."></textarea>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-success" onclick="saveDiscovery()">
                            üíæ Save Discovery
                        </button>
                        <button class="btn btn-primary" onclick="generateMessaging()">
                            ‚û°Ô∏è Generate Messaging & Scripts
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: Messaging & Scripts -->
        <div class="tab-content" id="messaging">
            <div class="card">
                <h2>‚úâÔ∏è Messaging & Scripts</h2>
                <p style="color: #94a3b8; margin-bottom: 25px;">AI-generated outreach sequence based on your discovery framework.</p>

                <div id="messagingEmpty" class="empty-state">
                    <h3>‚ö†Ô∏è Complete Discovery First</h3>
                    <p>Generate your messaging by completing the Discovery Framework.</p>
                    <button class="btn btn-primary" onclick="switchTab('discovery')">
                        ‚Üê Back to Discovery
                    </button>
                </div>

                <div id="messagingGenerated" style="display: none;">
                    <div class="status-success status-message">
                        ‚úÖ Messaging sequence generated! Copy to your outreach tool.
                    </div>

                    <div style="background: rgba(102, 126, 234, 0.1); border: 2px solid rgba(102, 126, 234, 0.3); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                        <h4 style="color: #818cf8; margin-bottom: 10px;">üìä Data Sources Used:</h4>
                        <div style="color: #cbd5e0; font-size: 0.9em; line-height: 1.8;">
                            <div>‚úì Company: <strong id="msg-company"></strong></div>
                            <div>‚úì Persona: <strong id="msg-persona"></strong></div>
                            <div>‚úì Trigger: <strong id="msg-trigger"></strong></div>
                            <div>‚úì Top Challenges: <strong id="msg-challenges"></strong></div>
                            <div>‚úì Your Company: <strong id="msg-yourcompany"></strong></div>
                        </div>
                    </div>

                    <div id="messagingContent"></div>

                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="regenerateMessaging()">
                            üîÑ Regenerate All
                        </button>
                        <button class="btn btn-success" onclick="saveMessaging()">
                            üíæ Save Messaging
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 4: Results Tracker -->
        <div class="tab-content" id="results">
            <div class="card">
                <h2>üìà Results Tracker</h2>
                <p style="color: #94a3b8; margin-bottom: 25px;">Track your outreach results and optimize your approach.</p>

                <div class="empty-state">
                    <h3>üöÄ Execute Your Outreach</h3>
                    <p>Once you've sent your messages, come back here to track results.</p>
                    <p style="margin-top: 20px; font-size: 0.95em;">Track: Emails sent, Opens, Replies, Calls made, Meetings booked</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let accountData = {
            company: '',
            persona: '',
            industry: '',
            size: '',
            research: '',
            discovery: null,
            messaging: null
        };

        // Tab switching
        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            
            // Update progress
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const completedSteps = [
                accountData.research ? 1 : 0,
                accountData.discovery ? 1 : 0,
                accountData.messaging ? 1 : 0
            ].reduce((a, b) => a + b, 0);
            
            const progress = (completedSteps / 3) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Mark tabs as completed
            if (accountData.research) {
                document.querySelector('[data-tab="account-intel"]').classList.add('completed');
            }
            if (accountData.discovery) {
                document.querySelector('[data-tab="discovery"]').classList.add('completed');
            }
            if (accountData.messaging) {
                document.querySelector('[data-tab="messaging"]').classList.add('completed');
            }
        }

        // Generate research prompts
        function generateResearchPrompts() {
            const yourCompany = document.getElementById('yourCompany').value.trim();
            const problemsSolved = document.getElementById('problemsSolved').value.trim();
            const yourTargetPersonas = document.getElementById('yourTargetPersonas').value.trim();
            const company = document.getElementById('companyName').value.trim();
            const persona = document.getElementById('targetPersona').value.trim();
            const industry = document.getElementById('industry').value;
            const size = document.getElementById('companySize').value;
            
            if (!yourCompany || !problemsSolved) {
                alert('‚ö†Ô∏è Please fill in Your Company Info first');
                return;
            }
            
            if (!company || !persona) {
                alert('‚ö†Ô∏è Please enter Target Company Name and Target Persona');
                return;
            }
            
            accountData.yourCompany = yourCompany;
            accountData.problemsSolved = problemsSolved;
            accountData.yourTargetPersonas = yourTargetPersonas;
            accountData.company = company;
            accountData.persona = persona;
            accountData.industry = industry;
            accountData.size = size;
            
            // Generate prompts
            const prompt1 = `Research ${company} and provide intelligence relevant to selling ${yourCompany}'s solutions.

CONTEXT: ${yourCompany} solves these problems:
${problemsSolved}

YOUR TASK: Research ${company} and identify signals that indicate they might be experiencing these problems.

1. COMPANY OVERVIEW:
   - What does ${company} do?
   - Recent news (last 90 days)
   - Key products/services
   - Market position
   - Stage: Startup, scale-up, enterprise?

2. GROWTH & SCALING SIGNALS:
   - Recent funding rounds (especially Series A/B)
   - Headcount growth (rapid hiring = scaling pains)
   - Geographic expansion (new markets = ops complexity)
   - New product launches (need for structured processes)
   - Leadership changes (new CRO/VP Sales = opportunity for change)

3. TRIGGER EVENTS (Prioritize these):
   - New revenue leadership (CRO, VP Sales, RevOps hire)
   - Funding announcement (growth capital = need for frameworks)
   - Missing revenue targets (indicates broken processes)
   - Sales team expansion (scaling without structure)
   - M&A activity (integration = ops overhaul)
   - New market entry (need for territory/planning frameworks)

4. PAIN SIGNALS:
   Look for evidence they're experiencing the problems ${yourCompany} solves:
   - Mentions of "manual forecasting" or "spreadsheet forecasting"
   - Job postings for RevOps, Sales Ops roles (pain = hiring)
   - Public comments about pipeline visibility, forecast accuracy
   - Sales leadership discussing "process" or "methodology"
   - Customer success handoff issues mentioned

5. INDUSTRY CONTEXT:
   - Key ${industry || 'industry'} trends affecting revenue operations
   - How competitors are scaling their go-to-market
   - Regulatory or market pressures requiring better forecasting

6. IDEAL CUSTOMER PROFILE MATCH:
   - Does ${company} match our target profile?
   - Size: ${size || 'Unknown'} (we target ${yourTargetPersonas})
   - Stage: Do they have funding and growth trajectory?
   - Pain: Do they show signs of revenue ops problems?

DELIVERABLE: Provide specific, recent intelligence that helps us understand:
- Are they likely experiencing the problems we solve?
- What's their trigger/urgency?
- Who's the right persona to approach?
- What's our strongest entry angle?`;

            const prompt2 = `Research the ${persona} role at ${company} with a focus on whether they'd care about ${yourCompany}'s solutions.

CONTEXT: ${yourCompany} solves:
${problemsSolved}

YOUR TASK: Understand this specific ${persona} and whether they're experiencing these problems.

1. PERSONA PROFILE:
   - Typical responsibilities for ${persona} at ${size || 'this size'} ${industry || ''} company
   - Key KPIs and success metrics they're measured on
   - Reporting structure (who they report to, who reports to them)
   - Budget authority for revenue operations tools/consulting

2. SPECIFIC PERSON AT ${company}:
   - Name of current ${persona} (LinkedIn search)
   - How long in current role (new = opportunity)
   - Career background (previous companies, roles)
   - Education and certifications

3. RECENT ACTIVITY & SIGNALS:
   - LinkedIn posts (last 60-90 days) - what are they talking about?
   - Are they posting about challenges ${yourCompany} solves?
   - Speaking engagements or webinars on revenue ops topics
   - Articles they've shared or commented on
   - Professional groups they're active in

4. PAIN POINT INDICATORS:
   Top challenges for ${persona} at ${size || 'this size'} ${industry || ''} company:
   - Manual, time-consuming processes
   - Lack of visibility into pipeline/forecast
   - Inconsistent sales methodology
   - Scaling challenges (team growing faster than processes)
   - Poor data quality or reporting
   - Sales/CS alignment issues

   CRITICAL: Which of these pain points match what ${yourCompany} solves?

5. DECISION-MAKING CONTEXT:
   - Budget cycle timing (when do they have budget?)
   - Who else is involved in buying decisions? (CRO, CEO, CFO?)
   - Previous vendor relationships (what tools are they using?)
   - Change tolerance (new to role = more open to change)

6. PERSONALIZATION ANGLES:
   - Mutual LinkedIn connections
   - Shared background (companies, schools, certifications)
   - Common interests or professional groups
   - Recent career wins or announcements

7. RECOMMENDED APPROACH:
   Based on all the above:
   - Which problem should we lead with?
   - What's their likely urgency level (1-10)?
   - What's the best entry point (email, call, LinkedIn)?
   - What trigger/angle has highest resonance?

DELIVERABLE: A profile that helps us understand:
- Is this the right person to target?
- Do they have the problems we solve?
- What's our best approach?
- What personalization can we use?`;

            const prompt3 = `Create a trigger-based outreach strategy for ${persona} at ${company}.

CONTEXT: ${yourCompany} solves:
${problemsSolved}

YOUR TASK: Identify the strongest triggers and personalization angles that connect to problems we solve.

1. BUYING TRIGGERS (Prioritize these):

   A. COMPANY-LEVEL TRIGGERS:
   - New funding (Series A/B = scaling pressure)
   - Revenue leadership change (new CRO/VP Sales)
   - Missed targets or public revenue challenges
   - Sales team expansion (doubling headcount)
   - New market entry (need for territory planning)
   - M&A activity (process/system consolidation)
   - New board members (increased scrutiny)

   B. PERSONA-LEVEL TRIGGERS:
   - New to role (0-6 months = highest urgency)
   - Team expansion (hiring = acknowledgment of problem)
   - Process change initiative (mentions of "improving forecasting")
   - System evaluation (considering new tools)
   - Recent promotion (proving themselves)

   C. MARKET/INDUSTRY TRIGGERS:
   - Competitive pressure in ${industry || 'their industry'}
   - Regulatory changes requiring better visibility
   - Economic pressure (need to do more with less)

2. PAIN TRIGGERS (Match to our solutions):
   Which specific pains from our problem list is ${company} likely experiencing RIGHT NOW?

   For each pain we solve:
   ${problemsSolved.split('\n').map(p => `   - ${p.trim()}`).join('\n')}

   Identify evidence/signals that indicate they have these pains:
   - Job postings
   - LinkedIn discussions
   - Growth rate
   - Team size
   - Recent news

3. URGENCY INDICATORS:
   What creates URGENCY for them to fix these problems NOW?
   - Board pressure (post-funding)
   - Upcoming planning cycles (Q4, annual planning)
   - Competitive threats
   - Scaling deadlines
   - Regulatory deadlines

4. PERSONALIZATION STACK:
   Layer these for maximum impact:
   - Trigger: [strongest trigger from above]
   - Pain: [which problem we solve]
   - Proof: [similar company example]
   - Personalization: [mutual connection, shared background]

5. RECOMMENDED OPENER:
   Based on ALL the above, craft a 2-3 sentence opener that:
   - References the strongest trigger
   - Connects to a pain we solve
   - Is personalized to this specific ${persona}

   Example structure:
   "Noticed [Company] recently [trigger]. Most [Personas] at this stage hit [pain point] - [brief impact]. We've helped [similar companies] [outcome]."

6. OUTREACH SEQUENCE RECOMMENDATION:
   - Day 1: Email (what trigger/angle?)
   - Day 2: LinkedIn connection (what note?)
   - Day 4: Call attempt (what voicemail?)
   - Day 5: Email #2 (what follow-up angle?)

DELIVERABLE:
- #1 Trigger to lead with (and why)
- #1 Pain point to emphasize (and why)
- Recommended opener (2-3 sentences)
- Personalization angle to use
- Urgency level (1-10)
- Best channel (email, call, LinkedIn)

This should be our battle plan for this account.`;

            document.getElementById('prompt1').textContent = prompt1;
            document.getElementById('prompt2').textContent = prompt2;
            document.getElementById('prompt3').textContent = prompt3;
            
            document.getElementById('researchPrompts').style.display = 'block';
            document.getElementById('intelStatus').className = 'status-warning status-message';
            document.getElementById('intelStatus').textContent = '‚ö†Ô∏è Copy prompts ‚Üí Run in ChatGPT/Claude ‚Üí Paste results below';
        }

        // Copy prompt
        function copyPrompt(promptId) {
            const prompt = document.getElementById(promptId).textContent;
            navigator.clipboard.writeText(prompt).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // Save research
        function saveResearch() {
            const research = document.getElementById('researchResults').value.trim();
            
            if (!research) {
                alert('‚ö†Ô∏è Please paste your research results first');
                return;
            }
            
            accountData.research = research;
            
            document.getElementById('intelStatus').className = 'status-success status-message';
            document.getElementById('intelStatus').textContent = '‚úÖ Research saved! Click "Generate Discovery Framework" to continue';
            
            document.getElementById('generateDiscoveryBtn').disabled = false;
            
            updateProgress();
        }

        // Generate discovery framework
        function generateDiscovery() {
            if (!accountData.research) {
                alert('‚ö†Ô∏è Please save your research first');
                return;
            }

            // Simulate AI generation that's aligned with your solutions
            const discovery = generateCompleteDiscoveryFramework();
            accountData.discovery = discovery;
            
            // Show discovery content
            document.getElementById('discoveryEmpty').style.display = 'none';
            document.getElementById('discoveryGenerated').style.display = 'block';
            document.getElementById('discoveryTitle').textContent = `Complete Discovery Framework for ${accountData.persona} at ${accountData.company}`;
            
            // Add context about solution alignment
            const alignmentNote = `
                <div style="background: rgba(102, 126, 234, 0.1); border: 2px solid rgba(102, 126, 234, 0.3); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                    <h4 style="color: #818cf8; margin-bottom: 10px;">üéØ Solution Alignment</h4>
                    <p style="color: #cbd5e0; margin-bottom: 10px;">This discovery framework is specifically aligned with ${accountData.yourCompany}'s solutions:</p>
                    <div style="color: #94a3b8; font-size: 0.9em; line-height: 1.6;">
                        ${accountData.problemsSolved.split('\n').filter(p => p.trim()).map(p => 
                            `<div style="margin: 5px 0;">‚úì ${p.trim().replace(/^[-‚Ä¢]/, '').trim()}</div>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('discoveryContent').innerHTML = alignmentNote + discovery;
            
            // Switch to discovery tab
            switchTab('discovery');
            updateProgress();
        }

        // Generate complete 6-pillar discovery framework
        function generateCompleteDiscoveryFramework() {
            const personaLower = accountData.persona.toLowerCase();
            let discoveryData = {};
            
            // Generate persona-specific discovery content
            if (personaLower.includes('cro') || personaLower.includes('revenue') || personaLower.includes('vp sales')) {
                // Revenue Operations discovery
                discoveryData = {
                    currentState: [
                        {
                            title: "Manual Forecasting & Spreadsheet Hell",
                            happening: [
                                "Sales forecast manually compiled from rep spreadsheets and CRM exports",
                                "CFO/Board want weekly updates but it takes 2-3 days to produce",
                                "Multiple versions of 'truth' - reps have one number, managers another",
                                "No systematic way to track forecast accuracy or learn from misses"
                            ],
                            problem: [
                                "Decision-making delayed by 3-5 days waiting for forecast",
                                "Board/investors lose confidence when numbers keep changing",
                                "Team spends 20+ hours/month on forecast vs. selling",
                                "Can't identify trending issues until too late"
                            ]
                        },
                        {
                            title: "No Structured Sales Methodology",
                            happening: [
                                "Each rep uses their own approach - some SPIN, some Challenger, most 'wing it'",
                                "No consistent qualification framework (MEDDICC, BANT, etc.)",
                                "Deal reviews are subjective - no common language",
                                "New reps take 6+ months to ramp with no playbook"
                            ],
                            problem: [
                                "Pipeline quality is guesswork - can't tell real deals from hope",
                                "Losing winnable deals because reps don't know what to ask",
                                "Can't scale - every new hire is rebuild from scratch",
                                "Coaching is inconsistent - no framework to coach to"
                            ]
                        },
                        {
                            title: "Territory & Quota Planning by Gut Feel",
                            happening: [
                                "Territories assigned by gut feel or 'whoever asks first'",
                                "Quotas set top-down with no bottoms-up capacity modeling",
                                "No clear rules for account assignment",
                                "Can't answer: 'Do we have enough pipeline to hit the number?'"
                            ],
                            problem: [
                                "Reps complain territories are unfair (often right)",
                                "Setting team up to fail with unrealistic quotas",
                                "Best reps leave when they see bad territory design",
                                "Can't model hiring needs or predict when to scale"
                            ]
                        }
                    ],
                    problems: [
                        {
                            problem: "Forecast Inaccuracy & Lack of Predictability",
                            severity: 9,
                            urgency: "High",
                            description: "Can't reliably predict revenue 30-60 days out, creating board mistrust and missed hiring/investment decisions"
                        },
                        {
                            problem: "Poor Pipeline Quality & Deal Slippage",
                            severity: 8,
                            urgency: "High",
                            description: "30-40% of 'committed' deals slip each quarter because qualification is inconsistent"
                        },
                        {
                            problem: "Slow Rep Ramp & High Turnover",
                            severity: 7,
                            urgency: "Medium",
                            description: "New reps take 6-9 months to productivity; 30%+ churn in first year"
                        },
                        {
                            problem: "Unscalable Operations & Manual Work",
                            severity: 8,
                            urgency: "High",
                            description: "RevOps/Sales leaders spending 40%+ time on manual reporting vs. strategic work"
                        }
                    ],
                    businessImpact: [
                        {
                            category: "Revenue Risk",
                            impact: "$2-5M in missed targets due to poor forecasting and deal slippage",
                            calculation: "30% slip rate √ó $10M quarterly target = $3M/quarter at risk"
                        },
                        {
                            category: "Time/Productivity Cost",
                            impact: "$500K+ annually in wasted productivity on manual forecasting and admin",
                            calculation: "10 people √ó 20 hours/month √ó $100/hour √ó 12 months = $240K+ just on forecasting"
                        },
                        {
                            category: "Talent/Turnover Cost",
                            impact: "$300-600K in annual turnover costs from poor onboarding and territory issues",
                            calculation: "30% turnover √ó 10 reps √ó $100K replacement cost = $300K"
                        },
                        {
                            category: "Opportunity Cost",
                            impact: "6-12 months delayed growth trajectory; can't confidently invest in expansion",
                            calculation: "Can't hire ahead of revenue because can't predict capacity needs"
                        }
                    ],
                    rootCause: [
                        {
                            surface: "Manual forecasting taking too long",
                            underlying: "No single source of truth or systematic roll-up process",
                            why: "Grew from 5 to 25 reps without building operational infrastructure; band-aided with spreadsheets"
                        },
                        {
                            surface: "Inconsistent deal qualification",
                            underlying: "Never implemented a formal sales methodology",
                            why: "Early success came from founder-led sales; didn't document or systematize what worked"
                        },
                        {
                            surface: "Unfair territories and quota complaints",
                            underlying: "No data-driven territory design or capacity planning",
                            why: "Sales leadership came from individual contributor roles; never learned ops/planning disciplines"
                        },
                        {
                            surface: "Long ramp times for new reps",
                            underlying: "No documented playbook, training program, or coaching framework",
                            why: "Top performers succeeded on intuition; never codified their approach for others to learn"
                        }
                    ],
                    requiredOutcomes: [
                        {
                            timeframe: "30 Days",
                            outcomes: [
                                "Document current-state processes and identify top 3 quick wins",
                                "Implement structured forecast roll-up (reduce time from 3 days to 4 hours)",
                                "Choose and begin rolling out sales methodology (MEDDICC or similar)"
                            ]
                        },
                        {
                            timeframe: "90 Days",
                            outcomes: [
                                "Achieve 85%+ forecast accuracy (currently 60-70%)",
                                "Complete territory redesign with clear assignment rules",
                                "All reps certified on new methodology; manager coaching program launched",
                                "Reduce manual reporting time by 75%"
                            ]
                        },
                        {
                            timeframe: "6-12 Months",
                            outcomes: [
                                "New rep ramp time reduced from 6-9 months to 3-4 months",
                                "Turnover reduced to <15% (from 30%+)",
                                "Systematic capacity planning enables confident hiring decisions",
                                "Board/investors have real-time visibility into revenue operations"
                            ]
                        }
                    ],
                    decisionCriteria: {
                        mustHaves: [
                            "Proven methodology (MEDDICC, Challenger, SPIN) - not invented here",
                            "Can implement without replacing CRM or existing tech stack",
                            "Results visible within 90 days, not 12-18 months",
                            "Includes training/enablement, not just consulting/documentation",
                            "Reference customers at similar stage (Series A/B SaaS)"
                        ],
                        niceToHaves: [
                            "Ongoing coaching support, not just initial implementation",
                            "Templates and tools (territory planning, forecast models, etc.)",
                            "Fractional RevOps support during transition"
                        ],
                        evaluation: {
                            process: "CRO evaluates ‚Üí Finance reviews ROI ‚Üí CEO approves ‚Üí 2-week decision timeline",
                            committee: [
                                `${accountData.persona} (Economic Buyer)`,
                                "CFO (Financial approval)",
                                "CEO (Strategic alignment)",
                                "VP Sales (User/Champion)"
                            ],
                            timing: "Budget available now; urgency driven by Q4 planning cycle starting in 6 weeks"
                        }
                    }
                };
            } else {
                // Generic discovery for other personas
                discoveryData = {
                    currentState: [
                        {
                            title: "Manual, Time-Consuming Processes",
                            happening: [
                                "Key workflows rely on spreadsheets, email, and manual coordination",
                                "No automation or systematic approach to recurring tasks",
                                "Data scattered across multiple tools"
                            ],
                            problem: [
                                "Team spends time on admin vs strategic work",
                                "Errors and delays from manual processes",
                                "Can't scale without adding headcount"
                            ]
                        },
                        {
                            title: "Lack of Visibility & Real-Time Insights",
                            happening: [
                                "Reports generated manually and out of date",
                                "Leadership questions take days to answer",
                                "Issues discovered reactively"
                            ],
                            problem: [
                                "Decision-making delayed waiting for data",
                                "Problems identified too late",
                                "Stakeholders lose confidence"
                            ]
                        },
                        {
                            title: "No Standardized Framework",
                            happening: [
                                "Each person uses their own approach",
                                "No consistent playbook or best practices",
                                "Quality varies by person"
                            ],
                            problem: [
                                "Can't scale - every hire reinvents wheel",
                                "Inconsistent outcomes",
                                "Coaching is ad-hoc"
                            ]
                        }
                    ],
                    problems: [
                        {
                            problem: "Operational Inefficiency",
                            severity: 8,
                            urgency: "High",
                            description: "Manual processes consuming 40%+ of team capacity"
                        },
                        {
                            problem: "Poor Visibility & Slow Decision-Making",
                            severity: 7,
                            urgency: "Medium",
                            description: "Leadership can't get real-time answers to critical questions"
                        },
                        {
                            problem: "Scaling Challenges",
                            severity: 8,
                            urgency: "High",
                            description: "Can't grow without proportionally adding headcount"
                        }
                    ],
                    businessImpact: [
                        {
                            category: "Productivity Cost",
                            impact: "$300-500K annually in wasted manual work",
                            calculation: "5 people √ó 15 hours/week √ó $75/hour √ó 50 weeks"
                        },
                        {
                            category: "Opportunity Cost",
                            impact: "Delayed strategic initiatives; reactive vs proactive posture",
                            calculation: "Team spending 60% time on operations vs 40% on strategy"
                        },
                        {
                            category: "Quality/Risk",
                            impact: "Errors and delays impacting customer/stakeholder confidence",
                            calculation: "2-3 major issues per quarter traced to manual processes"
                        }
                    ],
                    rootCause: [
                        {
                            surface: "Manual processes taking too long",
                            underlying: "No investment in operational infrastructure",
                            why: "Grew quickly without building systematic processes"
                        },
                        {
                            surface: "Inconsistent quality",
                            underlying: "No documented playbook or standards",
                            why: "Early team figured it out as they went; never systematized"
                        }
                    ],
                    requiredOutcomes: [
                        {
                            timeframe: "30 Days",
                            outcomes: [
                                "Document current processes",
                                "Identify quick wins and automation opportunities",
                                "Build initial framework"
                            ]
                        },
                        {
                            timeframe: "90 Days",
                            outcomes: [
                                "Reduce manual work by 50%+",
                                "Implement systematic processes",
                                "Real-time visibility into operations"
                            ]
                        },
                        {
                            timeframe: "6-12 Months",
                            outcomes: [
                                "Scalable operations that don't break with growth",
                                "Team focused on strategic work vs firefighting",
                                "Consistent quality and outcomes"
                            ]
                        }
                    ],
                    decisionCriteria: {
                        mustHaves: [
                            "Proven approach with reference customers",
                            "Results visible within 90 days",
                            "Implementation support, not just documentation",
                            "Works with existing systems"
                        ],
                        niceToHaves: [
                            "Ongoing support after initial implementation",
                            "Templates and frameworks",
                            "Training for team"
                        ],
                        evaluation: {
                            process: `${accountData.persona} evaluates ‚Üí Finance reviews ‚Üí CEO approves`,
                            committee: [
                                `${accountData.persona} (Economic Buyer)`,
                                "CFO (Budget approval)",
                                "CEO (Strategic alignment)"
                            ],
                            timing: "Budget available; urgency driven by upcoming planning cycle"
                        }
                    }
                };
            }
            
            // Build HTML for all 6 pillars
            let html = '';
            
            // PILLAR 1: CURRENT STATE
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #a78bfa; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(167, 139, 250, 0.3); padding-bottom: 10px;">
                        1Ô∏è‚É£ Current State ‚Äî Key Challenges
                    </h3>
            `;
            
            discoveryData.currentState.forEach((c, i) => {
                html += `
                    <div class="challenge">
                        <h5>${i + 1}. ${c.title}</h5>
                        <p style="color: #a78bfa; margin: 10px 0 5px 0; font-weight: 600;">What's happening today:</p>
                        <ul>
                            ${c.happening.map(h => `<li>${h}</li>`).join('')}
                        </ul>
                        <p style="color: #f87171; margin: 10px 0 5px 0; font-weight: 600;">Why this is a problem:</p>
                        <ul>
                            ${c.problem.map(p => `<li>${p}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // PILLAR 2: PROBLEMS & PAIN POINTS
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #f87171; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(248, 113, 113, 0.3); padding-bottom: 10px;">
                        2Ô∏è‚É£ Problems & Pain Points ‚Äî Prioritized
                    </h3>
            `;
            
            discoveryData.problems.forEach((p, i) => {
                const severityColor = p.severity >= 8 ? '#ef4444' : p.severity >= 6 ? '#f59e0b' : '#10b981';
                const urgencyColor = p.urgency === 'High' ? '#ef4444' : p.urgency === 'Medium' ? '#f59e0b' : '#10b981';
                
                html += `
                    <div class="challenge">
                        <h5>${i + 1}. ${p.problem}</h5>
                        <div style="display: flex; gap: 20px; margin: 10px 0;">
                            <div style="color: ${severityColor}; font-weight: 600;">
                                Severity: ${p.severity}/10
                            </div>
                            <div style="color: ${urgencyColor}; font-weight: 600;">
                                Urgency: ${p.urgency}
                            </div>
                        </div>
                        <p style="color: #cbd5e0; margin-top: 10px;">${p.description}</p>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // PILLAR 3: BUSINESS IMPACT
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #fbbf24; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(251, 191, 36, 0.3); padding-bottom: 10px;">
                        3Ô∏è‚É£ Business Impact ‚Äî Quantified Costs
                    </h3>
            `;
            
            discoveryData.businessImpact.forEach((bi, i) => {
                html += `
                    <div class="challenge">
                        <h5>${bi.category}</h5>
                        <p style="color: #fbbf24; font-weight: 600; font-size: 1.1em; margin: 10px 0;">
                            ${bi.impact}
                        </p>
                        <p style="color: #94a3b8; font-size: 0.9em; margin-top: 5px;">
                            üìä Calculation: ${bi.calculation}
                        </p>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // PILLAR 4: ROOT CAUSE
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #fb923c; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(251, 146, 60, 0.3); padding-bottom: 10px;">
                        4Ô∏è‚É£ Root Cause Analysis
                    </h3>
            `;
            
            discoveryData.rootCause.forEach((rc, i) => {
                html += `
                    <div class="challenge">
                        <p style="color: #94a3b8; font-weight: 600; margin-bottom: 5px;">Surface Symptom:</p>
                        <p style="color: #cbd5e0; margin-bottom: 15px;">${rc.surface}</p>
                        
                        <p style="color: #fb923c; font-weight: 600; margin-bottom: 5px;">Underlying Cause:</p>
                        <p style="color: #cbd5e0; margin-bottom: 15px;">${rc.underlying}</p>
                        
                        <p style="color: #f87171; font-weight: 600; margin-bottom: 5px;">Why It Hasn't Been Solved:</p>
                        <p style="color: #cbd5e0;">${rc.why}</p>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // PILLAR 5: REQUIRED OUTCOMES
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #10b981; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(16, 185, 129, 0.3); padding-bottom: 10px;">
                        5Ô∏è‚É£ Required Outcomes ‚Äî Success Metrics
                    </h3>
            `;
            
            discoveryData.requiredOutcomes.forEach((ro, i) => {
                html += `
                    <div class="challenge">
                        <h5>${ro.timeframe}</h5>
                        <ul style="color: #cbd5e0;">
                            ${ro.outcomes.map(o => `<li>${o}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // PILLAR 6: DECISION CRITERIA
            html += `
                <div style="margin-bottom: 40px;">
                    <h3 style="color: #818cf8; font-size: 1.5em; margin-bottom: 20px; border-bottom: 2px solid rgba(129, 140, 248, 0.3); padding-bottom: 10px;">
                        6Ô∏è‚É£ Decision Criteria ‚Äî Evaluation Framework
                    </h3>
                    
                    <div class="challenge">
                        <h5>Must-Haves (Deal Breakers)</h5>
                        <ul style="color: #cbd5e0;">
                            ${discoveryData.decisionCriteria.mustHaves.map(m => `<li>${m}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="challenge">
                        <h5>Nice-to-Haves</h5>
                        <ul style="color: #cbd5e0;">
                            ${discoveryData.decisionCriteria.niceToHaves.map(n => `<li>${n}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="challenge">
                        <h5>Evaluation Process</h5>
                        <p style="color: #cbd5e0; margin-bottom: 15px;">${discoveryData.decisionCriteria.evaluation.process}</p>
                        
                        <p style="color: #a78bfa; font-weight: 600; margin-bottom: 5px;">Buying Committee:</p>
                        <ul style="color: #cbd5e0;">
                            ${discoveryData.decisionCriteria.evaluation.committee.map(c => `<li>${c}</li>`).join('')}
                        </ul>
                        
                        <p style="color: #fbbf24; font-weight: 600; margin-top: 15px; margin-bottom: 5px;">Timeline & Budget:</p>
                        <p style="color: #cbd5e0;">${discoveryData.decisionCriteria.evaluation.timing}</p>
                    </div>
                </div>
            `;
            
            return html;
        }

        // Regenerate discovery
        function regenerateDiscovery() {
            if (confirm('Regenerate complete discovery framework? Your current content will be replaced.')) {
                const discovery = generateCompleteDiscoveryFramework();
                accountData.discovery = discovery;
                
                const alignmentNote = `
                    <div style="background: rgba(102, 126, 234, 0.1); border: 2px solid rgba(102, 126, 234, 0.3); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                        <h4 style="color: #818cf8; margin-bottom: 10px;">üéØ Solution Alignment</h4>
                        <p style="color: #cbd5e0; margin-bottom: 10px;">This discovery framework is specifically aligned with ${accountData.yourCompany}'s solutions:</p>
                        <div style="color: #94a3b8; font-size: 0.9em; line-height: 1.6;">
                            ${accountData.problemsSolved.split('\n').filter(p => p.trim()).map(p => 
                                `<div style="margin: 5px 0;">‚úì ${p.trim().replace(/^[-‚Ä¢]/, '').trim()}</div>`
                            ).join('')}
                        </div>
                    </div>
                `;
                
                document.getElementById('discoveryContent').innerHTML = alignmentNote + discovery;
            }
        }

        // Edit discovery
        function editDiscovery() {
            alert('Edit mode coming soon! For now, you can add custom notes in the section below.');
        }

        // Save discovery
        function saveDiscovery() {
            const notes = document.getElementById('customNotes').value;
            accountData.customNotes = notes;
            alert('‚úÖ Discovery saved!');
        }

        // Generate messaging
        function generateMessaging() {
            if (!accountData.discovery) {
                alert('‚ö†Ô∏è Please generate discovery first');
                return;
            }

            // Generate messaging content
            const messaging = generateMessagingContent();
            accountData.messaging = messaging;
            
            document.getElementById('messagingEmpty').style.display = 'none';
            document.getElementById('messagingGenerated').style.display = 'block';
            document.getElementById('messagingContent').innerHTML = messaging;
            
            // Populate data source indicators
            const discoveryText = document.getElementById('discoveryContent').innerText;
            const challengeMatches = discoveryText.match(/\d+\.\s+([^\n]+)/g);
            let topChallenges = challengeMatches ? challengeMatches.slice(0, 3).map(c => c.replace(/^\d+\.\s+/, '').trim()) : ['See discovery'];
            
            // Extract trigger from research
            const researchLower = accountData.research.toLowerCase();
            let trigger = "Recent growth";
            if (researchLower.includes('series b') || researchLower.includes('funding')) trigger = "Recent funding";
            else if (researchLower.includes('new cro') || researchLower.includes('new vp')) trigger = "New leadership";
            else if (researchLower.includes('expansion')) trigger = "Market expansion";
            else if (researchLower.includes('missed') || researchLower.includes('miss')) trigger = "Missed targets";
            
            document.getElementById('msg-company').textContent = accountData.company;
            document.getElementById('msg-persona').textContent = accountData.persona;
            document.getElementById('msg-trigger').textContent = trigger;
            document.getElementById('msg-challenges').textContent = topChallenges[0];
            document.getElementById('msg-yourcompany').textContent = accountData.yourCompany;
            
            switchTab('messaging');
            updateProgress();
        }

        // Generate messaging content - NOW USES YOUR ACTUAL DATA
        function generateMessagingContent() {
            // Extract key challenges from discovery
            const discoveryText = document.getElementById('discoveryContent').innerText;
            const customNotes = document.getElementById('customNotes').value;
            
            // Get the actual data
            const company = accountData.company;
            const persona = accountData.persona;
            const yourCompany = accountData.yourCompany;
            const research = accountData.research;
            
            // Parse research to find triggers (look for key phrases)
            let trigger = "recent growth";
            let urgency = "scaling operations";
            
            // Try to extract specific triggers from research
            const researchLower = research.toLowerCase();
            if (researchLower.includes('series b') || researchLower.includes('series a') || researchLower.includes('funding')) {
                trigger = "recent funding round";
                urgency = "investor pressure to scale efficiently";
            } else if (researchLower.includes('new cro') || researchLower.includes('new vp') || researchLower.includes('new hire')) {
                trigger = "new revenue leadership";
                urgency = "mandate to improve operations";
            } else if (researchLower.includes('expansion') || researchLower.includes('geographic') || researchLower.includes('new market')) {
                trigger = "market expansion";
                urgency = "need for scalable processes";
            } else if (researchLower.includes('missed') || researchLower.includes('miss') || researchLower.includes('below target')) {
                trigger = "missed revenue targets";
                urgency = "board pressure to fix forecasting";
            }
            
            // Extract first 3 challenges from discovery for email
            const challengeMatches = discoveryText.match(/\d+\.\s+([^\n]+)/g);
            let topChallenges = [];
            if (challengeMatches && challengeMatches.length >= 3) {
                topChallenges = challengeMatches.slice(0, 3).map(c => 
                    c.replace(/^\d+\.\s+/, '').trim()
                );
            } else {
                // Fallback if parsing fails
                topChallenges = [
                    "Manual, time-consuming processes",
                    "Lack of visibility and real-time insights",
                    "No standardized methodology"
                ];
            }
            
            // Find similar company mention in research or use generic
            let similarCompany = "[Similar Company]";
            const companyMatches = research.match(/similar to ([^,.\n]+)/i);
            if (companyMatches) {
                similarCompany = companyMatches[1];
            }
            
            // Extract a specific outcome from research if mentioned
            let outcome = "10x ROI in the first year";
            if (researchLower.includes('forecast')) {
                outcome = "improved forecast accuracy by 15+ points and cut planning time 75%";
            } else if (researchLower.includes('pipeline')) {
                outcome = "increased pipeline visibility and improved win rates by 23%";
            } else if (researchLower.includes('methodology')) {
                outcome = "implemented MEDDICC and reduced sales cycle by 30%";
            }

            const messages = [
                {
                    type: "Email Step 1: Trigger Opener",
                    subject: `${company}'s ${trigger.includes('funding') ? 'post-funding' : 'revenue ops'} challenge`,
                    body: `Hi {{first_name}},

Noticed ${company} recently ${trigger}. Most ${persona}s at this stage hit these walls:

‚Ä¢ ${topChallenges[0]}
‚Ä¢ ${topChallenges[1]}
‚Ä¢ ${topChallenges[2]}

Sound familiar?

I'm ${yourCompany ? yourCompany : 'working with'} ${persona}s at ${similarCompany} and similar ${accountData.industry || 'companies'} who've faced the same challenges - especially the ${urgency} phase.

Worth a 15-minute conversation to see if there's a fit?

Best,
{{your_name}}

P.S. - ${customNotes ? 'Quick context: ' + customNotes.split('\n')[0] : 'Happy to share what worked for similar companies in your space.'}`
                },
                {
                    type: "Email Step 2: Value + Proof",
                    subject: `Re: ${company}'s revenue ops`,
                    body: `Hi {{first_name}},

Following up on my note about ${topChallenges[0].toLowerCase()}.

Quick context: ${similarCompany} had the same challenge - their ${persona} was dealing with:
${topChallenges.slice(0, 2).map(c => `‚Ä¢ ${c}`).join('\n')}

After ${yourCompany ? 'working with ' + yourCompany : 'implementing our framework'}:
‚Ä¢ ${outcome}
‚Ä¢ Real-time visibility into operations
‚Ä¢ Scalable processes that don't break when headcount doubles

${customNotes && customNotes.includes('timeline') ? 'I know you mentioned timeline is important - we typically see results in 30-60 days.' : ''}

Open to a brief call to discuss what this could look like for ${company}?

Best,
{{your_name}}`
                },
                {
                    type: "Call Script: Sandler-Style Opener",
                    subject: "Use this for cold calls",
                    body: `[PATTERN INTERRUPT]
"Hi {{first_name}}, this is {{your_name}} from ${yourCompany || '[Your Company]'}. Did I catch you at a bad time?"

[UPFRONT CONTRACT]
"I know you're busy. I'll be brief - I work with ${persona}s who are dealing with ${topChallenges[0].toLowerCase()}. Does that sound familiar?"

[IF YES] "Great, I have a couple quick questions. If it seems like a fit, we can schedule a proper follow-up. If not, I'll let you go. Fair?"

[PAIN QUESTIONS - Based on YOUR discovery]
1. "${topChallenges[0]} - walk me through how that's impacting ${company} right now?"
   
2. "You mentioned ${trigger} - how has that changed your ${persona.includes('CRO') || persona.includes('Sales') ? 'forecasting and planning' : 'operational'} needs?"

3. "${topChallenges[1]} - how much time does your team spend on this per week?"

4. "If you could wave a magic wand and fix one thing about ${topChallenges[2].toLowerCase()}, what would it be?"

[IMPLICATION QUESTIONS]
5. "How is ${topChallenges[0].toLowerCase()} impacting your ability to ${urgency}?"

6. "What happens if this doesn't get fixed in the next 90 days?"

[NEED-PAYOFF]
7. "If we could ${topChallenges[0].includes('Manual') || topChallenges[0].includes('manual') ? 'automate' : 'solve'} ${topChallenges[0].toLowerCase()} and give you ${topChallenges[1].includes('visibility') ? 'real-time visibility' : 'a structured framework'}, what would that mean for ${company}?"

[TIME ASK]
"Based on what you've shared, especially around ${topChallenges[0].toLowerCase()}, I think there's a fit here. Can we schedule 30 minutes next week to dive deeper?"

[NOTES]
- Listen for: ${topChallenges.map(c => c.toLowerCase()).join(', ')}
- Qualify: Budget authority, timeline, decision process
- Reference research: ${trigger}, ${urgency}
${customNotes ? '- Custom note: ' + customNotes.split('\n')[0] : ''}
- Next step: ${yourCompany ? yourCompany + ' discovery workshop' : 'Demo or discovery call'}`
                },
                {
                    type: "LinkedIn Message",
                    subject: "Connection request or InMail",
                    body: `Hi {{first_name}},

${persona.includes('CRO') || persona.includes('VP') ? 'Fellow revenue leader here' : 'Reaching out as someone who works with ' + persona + 's'} - saw ${company}'s ${trigger} and wanted to connect.

I work with ${persona}s tackling ${topChallenges[0].toLowerCase()} - especially at companies going through ${urgency}.

${customNotes && customNotes.includes('LinkedIn') ? customNotes.split('\n').find(n => n.includes('LinkedIn')) : 'Curious how you\'re approaching this as ' + company + ' scales?'}

Best,
{{your_name}}`
                },
                {
                    type: "Email Step 3: Case Study",
                    subject: `How ${similarCompany} solved ${topChallenges[0].toLowerCase()}`,
                    body: `Hi {{first_name}},

Quick case study that might be relevant:

**Challenge:** ${similarCompany}'s ${persona} faced:
‚Ä¢ ${topChallenges[0]}
‚Ä¢ ${topChallenges[1]}

Sound familiar?

**Approach:** ${yourCompany ? 'We worked with them to' : 'They implemented'}:
1. ${topChallenges[0].includes('Manual') ? 'Automated their forecasting process' : 'Built a structured framework'}
2. ${topChallenges[1].includes('visibility') ? 'Created real-time dashboards' : 'Standardized their methodology'}
3. ${topChallenges[2].includes('methodology') ? 'Rolled out MEDDICC/SPIN across the team' : 'Implemented systematic planning'}

**Results:**
‚Ä¢ ${outcome}
‚Ä¢ Leadership team now makes decisions in hours, not days
‚Ä¢ Team scaled from ${accountData.size && accountData.size.includes('201-500') ? '50 to 150' : '20 to 75'} without breaking operations

Similar to ${company}'s situation with ${trigger}?

Let's talk.

Best,
{{your_name}}`
                },
                {
                    type: "Email Step 4: Breakup",
                    subject: `Should I close your file?`,
                    body: `Hi {{first_name}},

I've reached out a few times about ${topChallenges[0].toLowerCase()} at ${company}.

I'm guessing one of three things:
1. Not a priority right now (totally fair)
2. Already solved (great!)
3. My emails got buried (happens to all of us)

If it's #1 or #2, no worries - I'll close your file.

If it's #3 and ${topChallenges[0].toLowerCase()} IS something you're looking to improve, just reply "interested" and I'll send over some times.

Either way, best of luck with ${trigger}.

Best,
{{your_name}}`
                }
            ];

            let html = '';
            messages.forEach((m, i) => {
                html += `
                    <div class="prompt-box" style="margin-bottom: 30px;">
                        <button class="copy-btn" onclick="copyMessage(${i})">üìã Copy</button>
                        <h4>${m.type}</h4>
                        ${m.subject ? `<p style="color: #cbd5e0;"><strong>Subject:</strong> ${m.subject}</p>` : ''}
                        <pre id="message-${i}" style="white-space: pre-wrap;">${m.body}</pre>
                    </div>
                `;
            });

            return html;
        }

        // Copy message
        function copyMessage(index) {
            const message = document.getElementById(`message-${index}`).textContent;
            navigator.clipboard.writeText(message).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // Regenerate messaging
        function regenerateMessaging() {
            if (confirm('Regenerate all messaging? Current content will be replaced.')) {
                const messaging = generateMessagingContent();
                accountData.messaging = messaging;
                document.getElementById('messagingContent').innerHTML = messaging;
            }
        }

        // Save messaging
        function saveMessaging() {
            alert('‚úÖ Messaging saved! Copy to your outreach tool and start your campaign.');
        }

        // Initialize
        console.log('ü§ñ AI-Powered Research Workflow loaded');
        updateProgress();
    </script>
</div>

<script>

    // Accordion toggle
    document.querySelectorAll('.accordion-header').forEach(header => {
      header.addEventListener('click', () => {
        const item = header.parentElement;
        const alreadyOpen = item.classList.contains('open');
        document.querySelectorAll('.accordion-item').forEach(i => i.classList.remove('open'));
        if (!alreadyOpen) item.classList.add('open');
      });
    });

    const STORAGE_KEY = 'bearops_icp';

    function getICPElements() {
      return {
        snapshot: document.getElementById('icp-snapshot'),
        metaCoreBuyer: document.getElementById('icp-meta-coreBuyer'),
        metaOrgType: document.getElementById('icp-meta-orgType'),
        metaSize: document.getElementById('icp-meta-size'),
        metaEngagement: document.getElementById('icp-meta-engagement'),
        firmo: document.getElementById('icp-firmo'),
        firmoExtra: document.getElementById('icp-firmo-extra'),
        tiers: document.getElementById('icp-tiers'),
        techno: document.getElementById('icp-techno'),
        technoExtra: document.getElementById('icp-techno-extra'),
        technoNotes: document.getElementById('icp-techno-notes'),
        triggers: document.getElementById('icp-triggers'),
        triggersExtra: document.getElementById('icp-triggers-extra'),
        triggerTags: document.getElementById('icp-trigger-tags'),
        disqual: document.getElementById('icp-disqual'),
        disqualExtra: document.getElementById('icp-disqual-extra'),
        disqualNotes: document.getElementById('icp-disqual-notes'),
        logos: document.getElementById('icp-logos'),
        logosExtra: document.getElementById('icp-logos-extra'),
        logosNotes: document.getElementById('icp-logos-notes')
      };
    }

    function readICPFromDOM() {
      const el = getICPElements();
      const model = {};
      Object.keys(el).forEach(key => {
        if (el[key]) model[key] = el[key].innerHTML;
      });
      return model;
    }

    function applyICPToDOM(model) {
      const el = getICPElements();
      Object.keys(el).forEach(key => {
        if (el[key] && model[key] !== undefined) {
          el[key].innerHTML = model[key];
        }
      });
    }

    // Default template values (mirrors initial HTML)
    const DEFAULT_ICP = (function() {
      // defer until DOM is ready ‚Äì but script is at the end so DOM is parsed
      return readICPFromDOM();
    })();

    function saveICP() {
      const model = readICPFromDOM();
      localStorage.setItem(STORAGE_KEY, JSON.stringify(model));
      alert('üéØ ICP saved in this browser (bearops_icp).');
    }

    function loadICP() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return;
      try {
        const model = JSON.parse(raw);
        applyICPToDOM(model);
      } catch (e) {
        console.warn('Unable to parse saved ICP model', e);
      }
    }

    function resetICP() {
      if (!confirm('Reset ICP to the original template? This will overwrite unsaved changes.')) return;
      applyICPToDOM(DEFAULT_ICP);
      localStorage.removeItem(STORAGE_KEY);
    }

    document.getElementById('btnSaveICP').addEventListener('click', saveICP);
    document.getElementById('btnResetICP').addEventListener('click', resetICP);

    document.addEventListener('DOMContentLoaded', loadICP);

    // --- AI helper: build prompts from current ICP content ---
    function generateICPPrompts() {
      const el = getICPElements ? getICPElements() : {};

      const getText = (node) => {
        if (!node) return '';
        return node.innerText || node.textContent || '';
      };

      const snapshot = getText(el.snapshot);
      const coreBuyer = getText(document.getElementById('icp-meta-coreBuyer'));
      const orgType = getText(document.getElementById('icp-meta-orgType'));
      const sizeScale = getText(document.getElementById('icp-meta-size'));
      const engagement = getText(document.getElementById('icp-meta-engagement'));
      const firmo = getText(el.firmo);
      const firmoExtra = getText(el.firmoExtra);
      const tiers = getText(el.tiers);
      const techno = getText(el.techno);
      const technoExtra = getText(el.technoExtra);
      const triggers = getText(el.triggers);
      const triggersExtra = getText(el.triggersExtra);
      const disqual = getText(el.disqual);
      const disqualExtra = getText(el.disqualExtra);
      const logos = getText(el.logos);

      const firmoPrompt = `Act as a senior GTM strategist helping define an Ideal Customer Profile.

CURRENT DRAFT SNAPSHOT:
${snapshot || '[Not written yet]'}

CURRENT NOTES:
Core Buyer: ${coreBuyer || '[Not set]'}
Org Type: ${orgType || '[Not set]'}
Size / Scale: ${sizeScale || '[Not set]'}
Engagement Model: ${engagement || '[Not set]'}

FIRMOGRAPHICS I'VE ALREADY WRITTEN:
${firmo || '[No firmographics yet]'}
${firmoExtra || ''}

TIERS / SEGMENTATION NOTES:
${tiers || '[No tiering rules yet]'}

YOUR TASK:
1. Propose a clear firmographic definition for my ICP, including:
   - Target industries / verticals
   - Employee / revenue bands
   - Regions/markets
   - Ownership / governance profile (VC-backed, PE, listed, public sector, etc.)

2. Define Tier 1, Tier 2 and Tier 3 accounts with explicit rules (so I can turn this into a scoring model).
   - For each tier, give: typical company examples, minimum thresholds, and when to avoid.

3. Suggest 3‚Äì5 concrete examples (anonymised company archetypes) that match each tier.

Output in a structured, bullet-based format I can paste back into my ICP template.`;

      const techPrompt = `Act as a technographics analyst helping me define the tech stack profile of my ICP.

SNAPSHOT / CONTEXT:
${snapshot || '[No snapshot yet]'}

CURRENT FIRMOGRAPHICS (for context):
${firmo || ''}

TECH NOTES I'VE ALREADY WRITTEN:
${techno || '[No technographics yet]'}
${technoExtra || ''}
Additional notes: ${el.technoNotes ? getText(el.technoNotes) : ''}

YOUR TASK:
1. Describe the ideal existing tool stack for this ICP (CRM, data, analytics, infrastructure, adjacent tools).
2. List "good fit" patterns (e.g. Salesforce + modern data stack) and "bad fit" patterns (e.g. on-prem only, no APIs).
3. Suggest 5‚Äì10 concrete tech signals I can look for on LinkedIn/website/job posts to confirm ICP fit.
4. Propose 2‚Äì3 short sentences I can paste into the ICP under "Technographics" to make this crisp and usable for SDRs/AEs.`;

      const triggerPrompt = `You are helping me operationalise my ICP into real-world outbound triggers.

CONTEXT SNAPSHOT:
${snapshot || '[No snapshot yet]'}

CURRENT TRIGGER NOTES:
${triggers || '[No positive triggers defined yet]'}
${triggersExtra || ''}

DISQUALIFIERS (for contrast):
${disqual || ''}
${disqualExtra || ''}

YOUR TASK:
1. Propose a list of 10‚Äì15 high-value POSITIVE TRIGGERS that indicate my ICP is likely in a buying window.
   - Split into: Company-level, Persona-level, Market/Regulatory-level.
2. For each trigger, explain why it matters for the problems I likely solve, and what a rep should look for (e.g. funding news, hiring patterns, leadership changes).
3. Mark the top 5 "GO NOW" triggers that should bump an account into Tier 1 outreach.
4. Suggest 3‚Äì5 example LinkedIn/Google search queries I can use to systematically find these triggers.`;

      const disqualPrompt = `Help me define a clear Anti-ICP / disqualification framework.

CURRENT ICP SNAPSHOT:
${snapshot || '[No snapshot yet]'}

CURRENT DISQUALIFIERS:
${disqual || '[No disqualifiers written yet]'}
${disqualExtra || ''}
NOTES:
${el.disqualNotes ? getText(el.disqualNotes) : ''}

YOUR TASK:
1. Propose 8‚Äì12 disqualifier criteria that mean we should:
   - STOP outbound entirely, or
   - De-prioritise to Tier 3 / nurture only.
2. Group disqualifiers into:
   - Company profile (size, model, industry, funding)
   - Tech / security stance
   - Buying behaviour / culture
   - Commercial constraints (deal size, budget, time horizon)
3. For each disqualifier, give:
   - A plain-English description
   - What to look for (signals)
   - How strong it is (Hard Stop vs Soft Caution)
4. Suggest 3‚Äì5 rules I can embed in my scoring model (e.g. "If X, auto-Tier 3").`;

      document.getElementById('icpPromptFirmo').textContent = firmoPrompt;
      document.getElementById('icpPromptTech').textContent = techPrompt;
      document.getElementById('icpPromptTriggers').textContent = triggerPrompt;
      document.getElementById('icpPromptDisqual').textContent = disqualPrompt;

      alert('‚úÖ Prompts generated. Copy whichever you need and paste into your AI tool.');
    }

    function copyICPPrompt(id, btn) {
      const pre = document.getElementById(id);
      if (!pre) return;
      const text = pre.textContent || pre.innerText || '';
      if (!text.trim()) return;

      navigator.clipboard.writeText(text).then(() => {
        const original = btn.textContent;
        btn.textContent = '‚úÖ Copied';
        setTimeout(() => { btn.textContent = original; }, 1600);
      }).catch(() => {
        alert('Could not copy to clipboard. Please select and copy manually.');
      });
    }
  
</script>
</body>
</html>